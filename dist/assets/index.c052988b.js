(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerpolicy&&(s.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?s.credentials="include":i.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Ia={},Ul={exports:{}},He={},ee={exports:{}},O={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var li=Symbol.for("react.element"),Cg=Symbol.for("react.portal"),xg=Symbol.for("react.fragment"),_g=Symbol.for("react.strict_mode"),Dg=Symbol.for("react.profiler"),Mg=Symbol.for("react.provider"),Pg=Symbol.for("react.context"),$g=Symbol.for("react.forward_ref"),Ng=Symbol.for("react.suspense"),Rg=Symbol.for("react.memo"),Tg=Symbol.for("react.lazy"),Ec=Symbol.iterator;function Lg(e){return e===null||typeof e!="object"?null:(e=Ec&&e[Ec]||e["@@iterator"],typeof e=="function"?e:null)}var Lh={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Oh=Object.assign,Hh={};function ir(e,t,n){this.props=e,this.context=t,this.refs=Hh,this.updater=n||Lh}ir.prototype.isReactComponent={};ir.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ir.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function zh(){}zh.prototype=ir.prototype;function Vl(e,t,n){this.props=e,this.context=t,this.refs=Hh,this.updater=n||Lh}var Bl=Vl.prototype=new zh;Bl.constructor=Vl;Oh(Bl,ir.prototype);Bl.isPureReactComponent=!0;var Cc=Array.isArray,Ah=Object.prototype.hasOwnProperty,Wl={current:null},bh={key:!0,ref:!0,__self:!0,__source:!0};function jh(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)Ah.call(t,r)&&!bh.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:li,type:e,key:s,ref:o,props:i,_owner:Wl.current}}function Og(e,t){return{$$typeof:li,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Gl(e){return typeof e=="object"&&e!==null&&e.$$typeof===li}function Hg(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var xc=/\/+/g;function Do(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Hg(""+e.key):t.toString(36)}function Qi(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case li:case Cg:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+Do(o,0):r,Cc(i)?(n="",e!=null&&(n=e.replace(xc,"$&/")+"/"),Qi(i,t,n,"",function(u){return u})):i!=null&&(Gl(i)&&(i=Og(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(xc,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",Cc(e))for(var a=0;a<e.length;a++){s=e[a];var l=r+Do(s,a);o+=Qi(s,t,n,l,i)}else if(l=Lg(e),typeof l=="function")for(e=l.call(e),a=0;!(s=e.next()).done;)s=s.value,l=r+Do(s,a++),o+=Qi(s,t,n,l,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function xi(e,t,n){if(e==null)return e;var r=[],i=0;return Qi(e,r,"","",function(s){return t.call(n,s,i++)}),r}function zg(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ie={current:null},Ji={transition:null},Ag={ReactCurrentDispatcher:Ie,ReactCurrentBatchConfig:Ji,ReactCurrentOwner:Wl};function Fh(){throw Error("act(...) is not supported in production builds of React.")}O.Children={map:xi,forEach:function(e,t,n){xi(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return xi(e,function(){t++}),t},toArray:function(e){return xi(e,function(t){return t})||[]},only:function(e){if(!Gl(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};O.Component=ir;O.Fragment=xg;O.Profiler=Dg;O.PureComponent=Vl;O.StrictMode=_g;O.Suspense=Ng;O.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ag;O.act=Fh;O.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Oh({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=Wl.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)Ah.call(t,l)&&!bh.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}return{$$typeof:li,type:e.type,key:i,ref:s,props:r,_owner:o}};O.createContext=function(e){return e={$$typeof:Pg,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Mg,_context:e},e.Consumer=e};O.createElement=jh;O.createFactory=function(e){var t=jh.bind(null,e);return t.type=e,t};O.createRef=function(){return{current:null}};O.forwardRef=function(e){return{$$typeof:$g,render:e}};O.isValidElement=Gl;O.lazy=function(e){return{$$typeof:Tg,_payload:{_status:-1,_result:e},_init:zg}};O.memo=function(e,t){return{$$typeof:Rg,type:e,compare:t===void 0?null:t}};O.startTransition=function(e){var t=Ji.transition;Ji.transition={};try{e()}finally{Ji.transition=t}};O.unstable_act=Fh;O.useCallback=function(e,t){return Ie.current.useCallback(e,t)};O.useContext=function(e){return Ie.current.useContext(e)};O.useDebugValue=function(){};O.useDeferredValue=function(e){return Ie.current.useDeferredValue(e)};O.useEffect=function(e,t){return Ie.current.useEffect(e,t)};O.useId=function(){return Ie.current.useId()};O.useImperativeHandle=function(e,t,n){return Ie.current.useImperativeHandle(e,t,n)};O.useInsertionEffect=function(e,t){return Ie.current.useInsertionEffect(e,t)};O.useLayoutEffect=function(e,t){return Ie.current.useLayoutEffect(e,t)};O.useMemo=function(e,t){return Ie.current.useMemo(e,t)};O.useReducer=function(e,t,n){return Ie.current.useReducer(e,t,n)};O.useRef=function(e){return Ie.current.useRef(e)};O.useState=function(e){return Ie.current.useState(e)};O.useSyncExternalStore=function(e,t,n){return Ie.current.useSyncExternalStore(e,t,n)};O.useTransition=function(){return Ie.current.useTransition()};O.version="18.3.1";(function(e){e.exports=O})(ee);var Uh={exports:{}},Vh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t($,T){var L=$.length;$.push(T);e:for(;0<L;){var q=L-1>>>1,se=$[q];if(0<i(se,T))$[q]=T,$[L]=se,L=q;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var T=$[0],L=$.pop();if(L!==T){$[0]=L;e:for(var q=0,se=$.length,Ei=se>>>1;q<Ei;){var Xt=2*(q+1)-1,_o=$[Xt],Zt=Xt+1,Ci=$[Zt];if(0>i(_o,L))Zt<se&&0>i(Ci,_o)?($[q]=Ci,$[Zt]=L,q=Zt):($[q]=_o,$[Xt]=L,q=Xt);else if(Zt<se&&0>i(Ci,L))$[q]=Ci,$[Zt]=L,q=Zt;else break e}}return T}function i($,T){var L=$.sortIndex-T.sortIndex;return L!==0?L:$.id-T.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,d=null,f=3,v=!1,y=!1,g=!1,I=typeof setTimeout=="function"?setTimeout:null,h=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m($){for(var T=n(u);T!==null;){if(T.callback===null)r(u);else if(T.startTime<=$)r(u),T.sortIndex=T.expirationTime,t(l,T);else break;T=n(u)}}function w($){if(g=!1,m($),!y)if(n(l)!==null)y=!0,Co(k);else{var T=n(u);T!==null&&xo(w,T.startTime-$)}}function k($,T){y=!1,g&&(g=!1,h(_),_=-1),v=!0;var L=f;try{for(m(T),d=n(l);d!==null&&(!(d.expirationTime>T)||$&&!Q());){var q=d.callback;if(typeof q=="function"){d.callback=null,f=d.priorityLevel;var se=q(d.expirationTime<=T);T=e.unstable_now(),typeof se=="function"?d.callback=se:d===n(l)&&r(l),m(T)}else r(l);d=n(l)}if(d!==null)var Ei=!0;else{var Xt=n(u);Xt!==null&&xo(w,Xt.startTime-T),Ei=!1}return Ei}finally{d=null,f=L,v=!1}}var S=!1,E=null,_=-1,M=5,D=-1;function Q(){return!(e.unstable_now()-D<M)}function Be(){if(E!==null){var $=e.unstable_now();D=$;var T=!0;try{T=E(!0,$)}finally{T?We():(S=!1,E=null)}}else S=!1}var We;if(typeof p=="function")We=function(){p(Be)};else if(typeof MessageChannel<"u"){var In=new MessageChannel,Eg=In.port2;In.port1.onmessage=Be,We=function(){Eg.postMessage(null)}}else We=function(){I(Be,0)};function Co($){E=$,S||(S=!0,We())}function xo($,T){_=I(function(){$(e.unstable_now())},T)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function($){$.callback=null},e.unstable_continueExecution=function(){y||v||(y=!0,Co(k))},e.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<$?Math.floor(1e3/$):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function($){switch(f){case 1:case 2:case 3:var T=3;break;default:T=f}var L=f;f=T;try{return $()}finally{f=L}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function($,T){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var L=f;f=$;try{return T()}finally{f=L}},e.unstable_scheduleCallback=function($,T,L){var q=e.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?q+L:q):L=q,$){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=L+se,$={id:c++,callback:T,priorityLevel:$,startTime:L,expirationTime:se,sortIndex:-1},L>q?($.sortIndex=L,t(u,$),n(l)===null&&$===n(u)&&(g?(h(_),_=-1):g=!0,xo(w,L-q))):($.sortIndex=se,t(l,$),y||v||(y=!0,Co(k))),$},e.unstable_shouldYield=Q,e.unstable_wrapCallback=function($){var T=f;return function(){var L=f;f=T;try{return $.apply(this,arguments)}finally{f=L}}}})(Vh);(function(e){e.exports=Vh})(Uh);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bg=ee.exports,Le=Uh.exports;function C(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Bh=new Set,Ar={};function vn(e,t){Kn(e,t),Kn(e+"Capture",t)}function Kn(e,t){for(Ar[e]=t,e=0;e<t.length;e++)Bh.add(t[e])}var gt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ea=Object.prototype.hasOwnProperty,jg=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_c={},Dc={};function Fg(e){return Ea.call(Dc,e)?!0:Ea.call(_c,e)?!1:jg.test(e)?Dc[e]=!0:(_c[e]=!0,!1)}function Ug(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Vg(e,t,n,r){if(t===null||typeof t>"u"||Ug(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ee(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var he={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){he[e]=new Ee(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];he[t]=new Ee(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){he[e]=new Ee(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){he[e]=new Ee(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){he[e]=new Ee(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){he[e]=new Ee(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){he[e]=new Ee(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){he[e]=new Ee(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){he[e]=new Ee(e,5,!1,e.toLowerCase(),null,!1,!1)});var Kl=/[\-:]([a-z])/g;function Ql(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Kl,Ql);he[t]=new Ee(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Kl,Ql);he[t]=new Ee(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Kl,Ql);he[t]=new Ee(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){he[e]=new Ee(e,1,!1,e.toLowerCase(),null,!1,!1)});he.xlinkHref=new Ee("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){he[e]=new Ee(e,1,!1,e.toLowerCase(),null,!0,!0)});function Jl(e,t,n,r){var i=he.hasOwnProperty(t)?he[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Vg(t,n,i,r)&&(n=null),r||i===null?Fg(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Ct=bg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_i=Symbol.for("react.element"),Cn=Symbol.for("react.portal"),xn=Symbol.for("react.fragment"),ql=Symbol.for("react.strict_mode"),Ca=Symbol.for("react.profiler"),Wh=Symbol.for("react.provider"),Gh=Symbol.for("react.context"),Yl=Symbol.for("react.forward_ref"),xa=Symbol.for("react.suspense"),_a=Symbol.for("react.suspense_list"),Xl=Symbol.for("react.memo"),Dt=Symbol.for("react.lazy"),Kh=Symbol.for("react.offscreen"),Mc=Symbol.iterator;function lr(e){return e===null||typeof e!="object"?null:(e=Mc&&e[Mc]||e["@@iterator"],typeof e=="function"?e:null)}var K=Object.assign,Mo;function wr(e){if(Mo===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Mo=t&&t[1]||""}return`
`+Mo+e}var Po=!1;function $o(e,t){if(!e||Po)return"";Po=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{Po=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?wr(e):""}function Bg(e){switch(e.tag){case 5:return wr(e.type);case 16:return wr("Lazy");case 13:return wr("Suspense");case 19:return wr("SuspenseList");case 0:case 2:case 15:return e=$o(e.type,!1),e;case 11:return e=$o(e.type.render,!1),e;case 1:return e=$o(e.type,!0),e;default:return""}}function Da(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case xn:return"Fragment";case Cn:return"Portal";case Ca:return"Profiler";case ql:return"StrictMode";case xa:return"Suspense";case _a:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Gh:return(e.displayName||"Context")+".Consumer";case Wh:return(e._context.displayName||"Context")+".Provider";case Yl:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Xl:return t=e.displayName||null,t!==null?t:Da(e.type)||"Memo";case Dt:t=e._payload,e=e._init;try{return Da(e(t))}catch{}}return null}function Wg(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Da(t);case 8:return t===ql?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ut(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Qh(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Gg(e){var t=Qh(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Di(e){e._valueTracker||(e._valueTracker=Gg(e))}function Jh(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=Qh(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function ms(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ma(e,t){var n=t.checked;return K({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Pc(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Ut(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function qh(e,t){t=t.checked,t!=null&&Jl(e,"checked",t,!1)}function Pa(e,t){qh(e,t);var n=Ut(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?$a(e,t.type,n):t.hasOwnProperty("defaultValue")&&$a(e,t.type,Ut(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function $c(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function $a(e,t,n){(t!=="number"||ms(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var kr=Array.isArray;function bn(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Ut(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Na(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(C(91));return K({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Nc(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(C(92));if(kr(n)){if(1<n.length)throw Error(C(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Ut(n)}}function Yh(e,t){var n=Ut(t.value),r=Ut(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Rc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Xh(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ra(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Xh(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Mi,Zh=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Mi=Mi||document.createElement("div"),Mi.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Mi.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function br(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Er={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Kg=["Webkit","ms","Moz","O"];Object.keys(Er).forEach(function(e){Kg.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Er[t]=Er[e]})});function ed(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Er.hasOwnProperty(e)&&Er[e]?(""+t).trim():t+"px"}function td(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=ed(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var Qg=K({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ta(e,t){if(t){if(Qg[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(C(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(C(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(C(61))}if(t.style!=null&&typeof t.style!="object")throw Error(C(62))}}function La(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Oa=null;function Zl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ha=null,jn=null,Fn=null;function Tc(e){if(e=fi(e)){if(typeof Ha!="function")throw Error(C(280));var t=e.stateNode;t&&(t=eo(t),Ha(e.stateNode,e.type,t))}}function nd(e){jn?Fn?Fn.push(e):Fn=[e]:jn=e}function rd(){if(jn){var e=jn,t=Fn;if(Fn=jn=null,Tc(e),t)for(e=0;e<t.length;e++)Tc(t[e])}}function id(e,t){return e(t)}function sd(){}var No=!1;function od(e,t,n){if(No)return e(t,n);No=!0;try{return id(e,t,n)}finally{No=!1,(jn!==null||Fn!==null)&&(sd(),rd())}}function jr(e,t){var n=e.stateNode;if(n===null)return null;var r=eo(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(C(231,t,typeof n));return n}var za=!1;if(gt)try{var ur={};Object.defineProperty(ur,"passive",{get:function(){za=!0}}),window.addEventListener("test",ur,ur),window.removeEventListener("test",ur,ur)}catch{za=!1}function Jg(e,t,n,r,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var Cr=!1,vs=null,gs=!1,Aa=null,qg={onError:function(e){Cr=!0,vs=e}};function Yg(e,t,n,r,i,s,o,a,l){Cr=!1,vs=null,Jg.apply(qg,arguments)}function Xg(e,t,n,r,i,s,o,a,l){if(Yg.apply(this,arguments),Cr){if(Cr){var u=vs;Cr=!1,vs=null}else throw Error(C(198));gs||(gs=!0,Aa=u)}}function gn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function ad(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Lc(e){if(gn(e)!==e)throw Error(C(188))}function Zg(e){var t=e.alternate;if(!t){if(t=gn(e),t===null)throw Error(C(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Lc(i),e;if(s===r)return Lc(i),t;s=s.sibling}throw Error(C(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(C(189))}}if(n.alternate!==r)throw Error(C(190))}if(n.tag!==3)throw Error(C(188));return n.stateNode.current===n?e:t}function ld(e){return e=Zg(e),e!==null?ud(e):null}function ud(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=ud(e);if(t!==null)return t;e=e.sibling}return null}var cd=Le.unstable_scheduleCallback,Oc=Le.unstable_cancelCallback,ey=Le.unstable_shouldYield,ty=Le.unstable_requestPaint,Y=Le.unstable_now,ny=Le.unstable_getCurrentPriorityLevel,eu=Le.unstable_ImmediatePriority,fd=Le.unstable_UserBlockingPriority,ys=Le.unstable_NormalPriority,ry=Le.unstable_LowPriority,hd=Le.unstable_IdlePriority,qs=null,at=null;function iy(e){if(at&&typeof at.onCommitFiberRoot=="function")try{at.onCommitFiberRoot(qs,e,void 0,(e.current.flags&128)===128)}catch{}}var Ye=Math.clz32?Math.clz32:ay,sy=Math.log,oy=Math.LN2;function ay(e){return e>>>=0,e===0?32:31-(sy(e)/oy|0)|0}var Pi=64,$i=4194304;function Sr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ws(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=Sr(a):(s&=o,s!==0&&(r=Sr(s)))}else o=n&~i,o!==0?r=Sr(o):s!==0&&(r=Sr(s));if(r===0)return 0;if(t!==0&&t!==r&&(t&i)===0&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if((r&4)!==0&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Ye(t),i=1<<n,r|=e[n],t&=~i;return r}function ly(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function uy(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Ye(s),a=1<<o,l=i[o];l===-1?((a&n)===0||(a&r)!==0)&&(i[o]=ly(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}function ba(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function dd(){var e=Pi;return Pi<<=1,(Pi&4194240)===0&&(Pi=64),e}function Ro(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ui(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ye(t),e[t]=n}function cy(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Ye(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function tu(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Ye(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var b=0;function pd(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var md,nu,vd,gd,yd,ja=!1,Ni=[],Tt=null,Lt=null,Ot=null,Fr=new Map,Ur=new Map,Pt=[],fy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Hc(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":Lt=null;break;case"mouseover":case"mouseout":Ot=null;break;case"pointerover":case"pointerout":Fr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ur.delete(t.pointerId)}}function cr(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=fi(t),t!==null&&nu(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function hy(e,t,n,r,i){switch(t){case"focusin":return Tt=cr(Tt,e,t,n,r,i),!0;case"dragenter":return Lt=cr(Lt,e,t,n,r,i),!0;case"mouseover":return Ot=cr(Ot,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Fr.set(s,cr(Fr.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Ur.set(s,cr(Ur.get(s)||null,e,t,n,r,i)),!0}return!1}function wd(e){var t=nn(e.target);if(t!==null){var n=gn(t);if(n!==null){if(t=n.tag,t===13){if(t=ad(n),t!==null){e.blockedOn=t,yd(e.priority,function(){vd(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function qi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Fa(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Oa=r,n.target.dispatchEvent(r),Oa=null}else return t=fi(n),t!==null&&nu(t),e.blockedOn=n,!1;t.shift()}return!0}function zc(e,t,n){qi(e)&&n.delete(t)}function dy(){ja=!1,Tt!==null&&qi(Tt)&&(Tt=null),Lt!==null&&qi(Lt)&&(Lt=null),Ot!==null&&qi(Ot)&&(Ot=null),Fr.forEach(zc),Ur.forEach(zc)}function fr(e,t){e.blockedOn===t&&(e.blockedOn=null,ja||(ja=!0,Le.unstable_scheduleCallback(Le.unstable_NormalPriority,dy)))}function Vr(e){function t(i){return fr(i,e)}if(0<Ni.length){fr(Ni[0],e);for(var n=1;n<Ni.length;n++){var r=Ni[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Tt!==null&&fr(Tt,e),Lt!==null&&fr(Lt,e),Ot!==null&&fr(Ot,e),Fr.forEach(t),Ur.forEach(t),n=0;n<Pt.length;n++)r=Pt[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&(n=Pt[0],n.blockedOn===null);)wd(n),n.blockedOn===null&&Pt.shift()}var Un=Ct.ReactCurrentBatchConfig,ks=!0;function py(e,t,n,r){var i=b,s=Un.transition;Un.transition=null;try{b=1,ru(e,t,n,r)}finally{b=i,Un.transition=s}}function my(e,t,n,r){var i=b,s=Un.transition;Un.transition=null;try{b=4,ru(e,t,n,r)}finally{b=i,Un.transition=s}}function ru(e,t,n,r){if(ks){var i=Fa(e,t,n,r);if(i===null)Uo(e,t,r,Ss,n),Hc(e,r);else if(hy(i,e,t,n,r))r.stopPropagation();else if(Hc(e,r),t&4&&-1<fy.indexOf(e)){for(;i!==null;){var s=fi(i);if(s!==null&&md(s),s=Fa(e,t,n,r),s===null&&Uo(e,t,r,Ss,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Uo(e,t,r,null,n)}}var Ss=null;function Fa(e,t,n,r){if(Ss=null,e=Zl(r),e=nn(e),e!==null)if(t=gn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=ad(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Ss=e,null}function kd(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ny()){case eu:return 1;case fd:return 4;case ys:case ry:return 16;case hd:return 536870912;default:return 16}default:return 16}}var Nt=null,iu=null,Yi=null;function Sd(){if(Yi)return Yi;var e,t=iu,n=t.length,r,i="value"in Nt?Nt.value:Nt.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return Yi=i.slice(e,1<r?1-r:void 0)}function Xi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ri(){return!0}function Ac(){return!1}function ze(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ri:Ac,this.isPropagationStopped=Ac,this}return K(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ri)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ri)},persist:function(){},isPersistent:Ri}),t}var sr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},su=ze(sr),ci=K({},sr,{view:0,detail:0}),vy=ze(ci),To,Lo,hr,Ys=K({},ci,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ou,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==hr&&(hr&&e.type==="mousemove"?(To=e.screenX-hr.screenX,Lo=e.screenY-hr.screenY):Lo=To=0,hr=e),To)},movementY:function(e){return"movementY"in e?e.movementY:Lo}}),bc=ze(Ys),gy=K({},Ys,{dataTransfer:0}),yy=ze(gy),wy=K({},ci,{relatedTarget:0}),Oo=ze(wy),ky=K({},sr,{animationName:0,elapsedTime:0,pseudoElement:0}),Sy=ze(ky),Iy=K({},sr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Ey=ze(Iy),Cy=K({},sr,{data:0}),jc=ze(Cy),xy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_y={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function My(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Dy[e])?!!t[e]:!1}function ou(){return My}var Py=K({},ci,{key:function(e){if(e.key){var t=xy[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Xi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?_y[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ou,charCode:function(e){return e.type==="keypress"?Xi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Xi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),$y=ze(Py),Ny=K({},Ys,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Fc=ze(Ny),Ry=K({},ci,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ou}),Ty=ze(Ry),Ly=K({},sr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Oy=ze(Ly),Hy=K({},Ys,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),zy=ze(Hy),Ay=[9,13,27,32],au=gt&&"CompositionEvent"in window,xr=null;gt&&"documentMode"in document&&(xr=document.documentMode);var by=gt&&"TextEvent"in window&&!xr,Id=gt&&(!au||xr&&8<xr&&11>=xr),Uc=String.fromCharCode(32),Vc=!1;function Ed(e,t){switch(e){case"keyup":return Ay.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Cd(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var _n=!1;function jy(e,t){switch(e){case"compositionend":return Cd(t);case"keypress":return t.which!==32?null:(Vc=!0,Uc);case"textInput":return e=t.data,e===Uc&&Vc?null:e;default:return null}}function Fy(e,t){if(_n)return e==="compositionend"||!au&&Ed(e,t)?(e=Sd(),Yi=iu=Nt=null,_n=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Id&&t.locale!=="ko"?null:t.data;default:return null}}var Uy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Bc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Uy[e.type]:t==="textarea"}function xd(e,t,n,r){nd(r),t=Is(t,"onChange"),0<t.length&&(n=new su("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var _r=null,Br=null;function Vy(e){Hd(e,0)}function Xs(e){var t=Pn(e);if(Jh(t))return e}function By(e,t){if(e==="change")return t}var _d=!1;if(gt){var Ho;if(gt){var zo="oninput"in document;if(!zo){var Wc=document.createElement("div");Wc.setAttribute("oninput","return;"),zo=typeof Wc.oninput=="function"}Ho=zo}else Ho=!1;_d=Ho&&(!document.documentMode||9<document.documentMode)}function Gc(){_r&&(_r.detachEvent("onpropertychange",Dd),Br=_r=null)}function Dd(e){if(e.propertyName==="value"&&Xs(Br)){var t=[];xd(t,Br,e,Zl(e)),od(Vy,t)}}function Wy(e,t,n){e==="focusin"?(Gc(),_r=t,Br=n,_r.attachEvent("onpropertychange",Dd)):e==="focusout"&&Gc()}function Gy(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Xs(Br)}function Ky(e,t){if(e==="click")return Xs(t)}function Qy(e,t){if(e==="input"||e==="change")return Xs(t)}function Jy(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var tt=typeof Object.is=="function"?Object.is:Jy;function Wr(e,t){if(tt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Ea.call(t,i)||!tt(e[i],t[i]))return!1}return!0}function Kc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Qc(e,t){var n=Kc(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Kc(n)}}function Md(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Md(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Pd(){for(var e=window,t=ms();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ms(e.document)}return t}function lu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function qy(e){var t=Pd(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Md(n.ownerDocument.documentElement,n)){if(r!==null&&lu(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=Qc(n,s);var o=Qc(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Yy=gt&&"documentMode"in document&&11>=document.documentMode,Dn=null,Ua=null,Dr=null,Va=!1;function Jc(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Va||Dn==null||Dn!==ms(r)||(r=Dn,"selectionStart"in r&&lu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Dr&&Wr(Dr,r)||(Dr=r,r=Is(Ua,"onSelect"),0<r.length&&(t=new su("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Dn)))}function Ti(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Mn={animationend:Ti("Animation","AnimationEnd"),animationiteration:Ti("Animation","AnimationIteration"),animationstart:Ti("Animation","AnimationStart"),transitionend:Ti("Transition","TransitionEnd")},Ao={},$d={};gt&&($d=document.createElement("div").style,"AnimationEvent"in window||(delete Mn.animationend.animation,delete Mn.animationiteration.animation,delete Mn.animationstart.animation),"TransitionEvent"in window||delete Mn.transitionend.transition);function Zs(e){if(Ao[e])return Ao[e];if(!Mn[e])return e;var t=Mn[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in $d)return Ao[e]=t[n];return e}var Nd=Zs("animationend"),Rd=Zs("animationiteration"),Td=Zs("animationstart"),Ld=Zs("transitionend"),Od=new Map,qc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Kt(e,t){Od.set(e,t),vn(t,[e])}for(var bo=0;bo<qc.length;bo++){var jo=qc[bo],Xy=jo.toLowerCase(),Zy=jo[0].toUpperCase()+jo.slice(1);Kt(Xy,"on"+Zy)}Kt(Nd,"onAnimationEnd");Kt(Rd,"onAnimationIteration");Kt(Td,"onAnimationStart");Kt("dblclick","onDoubleClick");Kt("focusin","onFocus");Kt("focusout","onBlur");Kt(Ld,"onTransitionEnd");Kn("onMouseEnter",["mouseout","mouseover"]);Kn("onMouseLeave",["mouseout","mouseover"]);Kn("onPointerEnter",["pointerout","pointerover"]);Kn("onPointerLeave",["pointerout","pointerover"]);vn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));vn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));vn("onBeforeInput",["compositionend","keypress","textInput","paste"]);vn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));vn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));vn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ir="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),e0=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ir));function Yc(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Xg(r,t,void 0,e),e.currentTarget=null}function Hd(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;Yc(i,a,u),s=l}else for(o=0;o<r.length;o++){if(a=r[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;Yc(i,a,u),s=l}}}if(gs)throw e=Aa,gs=!1,Aa=null,e}function F(e,t){var n=t[Qa];n===void 0&&(n=t[Qa]=new Set);var r=e+"__bubble";n.has(r)||(zd(t,e,2,!1),n.add(r))}function Fo(e,t,n){var r=0;t&&(r|=4),zd(n,e,r,t)}var Li="_reactListening"+Math.random().toString(36).slice(2);function Gr(e){if(!e[Li]){e[Li]=!0,Bh.forEach(function(n){n!=="selectionchange"&&(e0.has(n)||Fo(n,!1,e),Fo(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Li]||(t[Li]=!0,Fo("selectionchange",!1,t))}}function zd(e,t,n,r){switch(kd(t)){case 1:var i=py;break;case 4:i=my;break;default:i=ru}n=i.bind(null,t,n,e),i=void 0,!za||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Uo(e,t,n,r,i){var s=r;if((t&1)===0&&(t&2)===0&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=nn(a),o===null)return;if(l=o.tag,l===5||l===6){r=s=o;continue e}a=a.parentNode}}r=r.return}od(function(){var u=s,c=Zl(n),d=[];e:{var f=Od.get(e);if(f!==void 0){var v=su,y=e;switch(e){case"keypress":if(Xi(n)===0)break e;case"keydown":case"keyup":v=$y;break;case"focusin":y="focus",v=Oo;break;case"focusout":y="blur",v=Oo;break;case"beforeblur":case"afterblur":v=Oo;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=bc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=yy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=Ty;break;case Nd:case Rd:case Td:v=Sy;break;case Ld:v=Oy;break;case"scroll":v=vy;break;case"wheel":v=zy;break;case"copy":case"cut":case"paste":v=Ey;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Fc}var g=(t&4)!==0,I=!g&&e==="scroll",h=g?f!==null?f+"Capture":null:f;g=[];for(var p=u,m;p!==null;){m=p;var w=m.stateNode;if(m.tag===5&&w!==null&&(m=w,h!==null&&(w=jr(p,h),w!=null&&g.push(Kr(p,w,m)))),I)break;p=p.return}0<g.length&&(f=new v(f,y,null,n,c),d.push({event:f,listeners:g}))}}if((t&7)===0){e:{if(f=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",f&&n!==Oa&&(y=n.relatedTarget||n.fromElement)&&(nn(y)||y[yt]))break e;if((v||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,v?(y=n.relatedTarget||n.toElement,v=u,y=y?nn(y):null,y!==null&&(I=gn(y),y!==I||y.tag!==5&&y.tag!==6)&&(y=null)):(v=null,y=u),v!==y)){if(g=bc,w="onMouseLeave",h="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(g=Fc,w="onPointerLeave",h="onPointerEnter",p="pointer"),I=v==null?f:Pn(v),m=y==null?f:Pn(y),f=new g(w,p+"leave",v,n,c),f.target=I,f.relatedTarget=m,w=null,nn(c)===u&&(g=new g(h,p+"enter",y,n,c),g.target=m,g.relatedTarget=I,w=g),I=w,v&&y)t:{for(g=v,h=y,p=0,m=g;m;m=En(m))p++;for(m=0,w=h;w;w=En(w))m++;for(;0<p-m;)g=En(g),p--;for(;0<m-p;)h=En(h),m--;for(;p--;){if(g===h||h!==null&&g===h.alternate)break t;g=En(g),h=En(h)}g=null}else g=null;v!==null&&Xc(d,f,v,g,!1),y!==null&&I!==null&&Xc(d,I,y,g,!0)}}e:{if(f=u?Pn(u):window,v=f.nodeName&&f.nodeName.toLowerCase(),v==="select"||v==="input"&&f.type==="file")var k=By;else if(Bc(f))if(_d)k=Qy;else{k=Gy;var S=Wy}else(v=f.nodeName)&&v.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=Ky);if(k&&(k=k(e,u))){xd(d,k,n,c);break e}S&&S(e,f,u),e==="focusout"&&(S=f._wrapperState)&&S.controlled&&f.type==="number"&&$a(f,"number",f.value)}switch(S=u?Pn(u):window,e){case"focusin":(Bc(S)||S.contentEditable==="true")&&(Dn=S,Ua=u,Dr=null);break;case"focusout":Dr=Ua=Dn=null;break;case"mousedown":Va=!0;break;case"contextmenu":case"mouseup":case"dragend":Va=!1,Jc(d,n,c);break;case"selectionchange":if(Yy)break;case"keydown":case"keyup":Jc(d,n,c)}var E;if(au)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else _n?Ed(e,n)&&(_="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(Id&&n.locale!=="ko"&&(_n||_!=="onCompositionStart"?_==="onCompositionEnd"&&_n&&(E=Sd()):(Nt=c,iu="value"in Nt?Nt.value:Nt.textContent,_n=!0)),S=Is(u,_),0<S.length&&(_=new jc(_,e,null,n,c),d.push({event:_,listeners:S}),E?_.data=E:(E=Cd(n),E!==null&&(_.data=E)))),(E=by?jy(e,n):Fy(e,n))&&(u=Is(u,"onBeforeInput"),0<u.length&&(c=new jc("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:u}),c.data=E))}Hd(d,t)})}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Is(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=jr(e,n),s!=null&&r.unshift(Kr(e,s,i)),s=jr(e,t),s!=null&&r.push(Kr(e,s,i))),e=e.return}return r}function En(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Xc(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&u!==null&&(a=u,i?(l=jr(n,s),l!=null&&o.unshift(Kr(n,l,a))):i||(l=jr(n,s),l!=null&&o.push(Kr(n,l,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var t0=/\r\n?/g,n0=/\u0000|\uFFFD/g;function Zc(e){return(typeof e=="string"?e:""+e).replace(t0,`
`).replace(n0,"")}function Oi(e,t,n){if(t=Zc(t),Zc(e)!==t&&n)throw Error(C(425))}function Es(){}var Ba=null,Wa=null;function Ga(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ka=typeof setTimeout=="function"?setTimeout:void 0,r0=typeof clearTimeout=="function"?clearTimeout:void 0,ef=typeof Promise=="function"?Promise:void 0,i0=typeof queueMicrotask=="function"?queueMicrotask:typeof ef<"u"?function(e){return ef.resolve(null).then(e).catch(s0)}:Ka;function s0(e){setTimeout(function(){throw e})}function Vo(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Vr(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Vr(t)}function Ht(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function tf(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var or=Math.random().toString(36).slice(2),ot="__reactFiber$"+or,Qr="__reactProps$"+or,yt="__reactContainer$"+or,Qa="__reactEvents$"+or,o0="__reactListeners$"+or,a0="__reactHandles$"+or;function nn(e){var t=e[ot];if(t)return t;for(var n=e.parentNode;n;){if(t=n[yt]||n[ot]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=tf(e);e!==null;){if(n=e[ot])return n;e=tf(e)}return t}e=n,n=e.parentNode}return null}function fi(e){return e=e[ot]||e[yt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Pn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(C(33))}function eo(e){return e[Qr]||null}var Ja=[],$n=-1;function Qt(e){return{current:e}}function U(e){0>$n||(e.current=Ja[$n],Ja[$n]=null,$n--)}function j(e,t){$n++,Ja[$n]=e.current,e.current=t}var Vt={},ye=Qt(Vt),De=Qt(!1),cn=Vt;function Qn(e,t){var n=e.type.contextTypes;if(!n)return Vt;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Me(e){return e=e.childContextTypes,e!=null}function Cs(){U(De),U(ye)}function nf(e,t,n){if(ye.current!==Vt)throw Error(C(168));j(ye,t),j(De,n)}function Ad(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(C(108,Wg(e)||"Unknown",i));return K({},n,r)}function xs(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Vt,cn=ye.current,j(ye,e),j(De,De.current),!0}function rf(e,t,n){var r=e.stateNode;if(!r)throw Error(C(169));n?(e=Ad(e,t,cn),r.__reactInternalMemoizedMergedChildContext=e,U(De),U(ye),j(ye,e)):U(De),j(De,n)}var ht=null,to=!1,Bo=!1;function bd(e){ht===null?ht=[e]:ht.push(e)}function l0(e){to=!0,bd(e)}function Jt(){if(!Bo&&ht!==null){Bo=!0;var e=0,t=b;try{var n=ht;for(b=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}ht=null,to=!1}catch(i){throw ht!==null&&(ht=ht.slice(e+1)),cd(eu,Jt),i}finally{b=t,Bo=!1}}return null}var Nn=[],Rn=0,_s=null,Ds=0,Ae=[],be=0,fn=null,pt=1,mt="";function en(e,t){Nn[Rn++]=Ds,Nn[Rn++]=_s,_s=e,Ds=t}function jd(e,t,n){Ae[be++]=pt,Ae[be++]=mt,Ae[be++]=fn,fn=e;var r=pt;e=mt;var i=32-Ye(r)-1;r&=~(1<<i),n+=1;var s=32-Ye(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,pt=1<<32-Ye(t)+i|n<<i|r,mt=s+e}else pt=1<<s|n<<i|r,mt=e}function uu(e){e.return!==null&&(en(e,1),jd(e,1,0))}function cu(e){for(;e===_s;)_s=Nn[--Rn],Nn[Rn]=null,Ds=Nn[--Rn],Nn[Rn]=null;for(;e===fn;)fn=Ae[--be],Ae[be]=null,mt=Ae[--be],Ae[be]=null,pt=Ae[--be],Ae[be]=null}var Te=null,Re=null,V=!1,Je=null;function Fd(e,t){var n=je(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function sf(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Te=e,Re=Ht(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Te=e,Re=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=fn!==null?{id:pt,overflow:mt}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=je(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Te=e,Re=null,!0):!1;default:return!1}}function qa(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Ya(e){if(V){var t=Re;if(t){var n=t;if(!sf(e,t)){if(qa(e))throw Error(C(418));t=Ht(n.nextSibling);var r=Te;t&&sf(e,t)?Fd(r,n):(e.flags=e.flags&-4097|2,V=!1,Te=e)}}else{if(qa(e))throw Error(C(418));e.flags=e.flags&-4097|2,V=!1,Te=e}}}function of(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Te=e}function Hi(e){if(e!==Te)return!1;if(!V)return of(e),V=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ga(e.type,e.memoizedProps)),t&&(t=Re)){if(qa(e))throw Ud(),Error(C(418));for(;t;)Fd(e,t),t=Ht(t.nextSibling)}if(of(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(C(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Re=Ht(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Re=null}}else Re=Te?Ht(e.stateNode.nextSibling):null;return!0}function Ud(){for(var e=Re;e;)e=Ht(e.nextSibling)}function Jn(){Re=Te=null,V=!1}function fu(e){Je===null?Je=[e]:Je.push(e)}var u0=Ct.ReactCurrentBatchConfig;function dr(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(C(309));var r=n.stateNode}if(!r)throw Error(C(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(C(284));if(!n._owner)throw Error(C(290,e))}return e}function zi(e,t){throw e=Object.prototype.toString.call(t),Error(C(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function af(e){var t=e._init;return t(e._payload)}function Vd(e){function t(h,p){if(e){var m=h.deletions;m===null?(h.deletions=[p],h.flags|=16):m.push(p)}}function n(h,p){if(!e)return null;for(;p!==null;)t(h,p),p=p.sibling;return null}function r(h,p){for(h=new Map;p!==null;)p.key!==null?h.set(p.key,p):h.set(p.index,p),p=p.sibling;return h}function i(h,p){return h=jt(h,p),h.index=0,h.sibling=null,h}function s(h,p,m){return h.index=m,e?(m=h.alternate,m!==null?(m=m.index,m<p?(h.flags|=2,p):m):(h.flags|=2,p)):(h.flags|=1048576,p)}function o(h){return e&&h.alternate===null&&(h.flags|=2),h}function a(h,p,m,w){return p===null||p.tag!==6?(p=Yo(m,h.mode,w),p.return=h,p):(p=i(p,m),p.return=h,p)}function l(h,p,m,w){var k=m.type;return k===xn?c(h,p,m.props.children,w,m.key):p!==null&&(p.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Dt&&af(k)===p.type)?(w=i(p,m.props),w.ref=dr(h,p,m),w.return=h,w):(w=ss(m.type,m.key,m.props,null,h.mode,w),w.ref=dr(h,p,m),w.return=h,w)}function u(h,p,m,w){return p===null||p.tag!==4||p.stateNode.containerInfo!==m.containerInfo||p.stateNode.implementation!==m.implementation?(p=Xo(m,h.mode,w),p.return=h,p):(p=i(p,m.children||[]),p.return=h,p)}function c(h,p,m,w,k){return p===null||p.tag!==7?(p=an(m,h.mode,w,k),p.return=h,p):(p=i(p,m),p.return=h,p)}function d(h,p,m){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Yo(""+p,h.mode,m),p.return=h,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case _i:return m=ss(p.type,p.key,p.props,null,h.mode,m),m.ref=dr(h,null,p),m.return=h,m;case Cn:return p=Xo(p,h.mode,m),p.return=h,p;case Dt:var w=p._init;return d(h,w(p._payload),m)}if(kr(p)||lr(p))return p=an(p,h.mode,m,null),p.return=h,p;zi(h,p)}return null}function f(h,p,m,w){var k=p!==null?p.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return k!==null?null:a(h,p,""+m,w);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case _i:return m.key===k?l(h,p,m,w):null;case Cn:return m.key===k?u(h,p,m,w):null;case Dt:return k=m._init,f(h,p,k(m._payload),w)}if(kr(m)||lr(m))return k!==null?null:c(h,p,m,w,null);zi(h,m)}return null}function v(h,p,m,w,k){if(typeof w=="string"&&w!==""||typeof w=="number")return h=h.get(m)||null,a(p,h,""+w,k);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case _i:return h=h.get(w.key===null?m:w.key)||null,l(p,h,w,k);case Cn:return h=h.get(w.key===null?m:w.key)||null,u(p,h,w,k);case Dt:var S=w._init;return v(h,p,m,S(w._payload),k)}if(kr(w)||lr(w))return h=h.get(m)||null,c(p,h,w,k,null);zi(p,w)}return null}function y(h,p,m,w){for(var k=null,S=null,E=p,_=p=0,M=null;E!==null&&_<m.length;_++){E.index>_?(M=E,E=null):M=E.sibling;var D=f(h,E,m[_],w);if(D===null){E===null&&(E=M);break}e&&E&&D.alternate===null&&t(h,E),p=s(D,p,_),S===null?k=D:S.sibling=D,S=D,E=M}if(_===m.length)return n(h,E),V&&en(h,_),k;if(E===null){for(;_<m.length;_++)E=d(h,m[_],w),E!==null&&(p=s(E,p,_),S===null?k=E:S.sibling=E,S=E);return V&&en(h,_),k}for(E=r(h,E);_<m.length;_++)M=v(E,h,_,m[_],w),M!==null&&(e&&M.alternate!==null&&E.delete(M.key===null?_:M.key),p=s(M,p,_),S===null?k=M:S.sibling=M,S=M);return e&&E.forEach(function(Q){return t(h,Q)}),V&&en(h,_),k}function g(h,p,m,w){var k=lr(m);if(typeof k!="function")throw Error(C(150));if(m=k.call(m),m==null)throw Error(C(151));for(var S=k=null,E=p,_=p=0,M=null,D=m.next();E!==null&&!D.done;_++,D=m.next()){E.index>_?(M=E,E=null):M=E.sibling;var Q=f(h,E,D.value,w);if(Q===null){E===null&&(E=M);break}e&&E&&Q.alternate===null&&t(h,E),p=s(Q,p,_),S===null?k=Q:S.sibling=Q,S=Q,E=M}if(D.done)return n(h,E),V&&en(h,_),k;if(E===null){for(;!D.done;_++,D=m.next())D=d(h,D.value,w),D!==null&&(p=s(D,p,_),S===null?k=D:S.sibling=D,S=D);return V&&en(h,_),k}for(E=r(h,E);!D.done;_++,D=m.next())D=v(E,h,_,D.value,w),D!==null&&(e&&D.alternate!==null&&E.delete(D.key===null?_:D.key),p=s(D,p,_),S===null?k=D:S.sibling=D,S=D);return e&&E.forEach(function(Be){return t(h,Be)}),V&&en(h,_),k}function I(h,p,m,w){if(typeof m=="object"&&m!==null&&m.type===xn&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case _i:e:{for(var k=m.key,S=p;S!==null;){if(S.key===k){if(k=m.type,k===xn){if(S.tag===7){n(h,S.sibling),p=i(S,m.props.children),p.return=h,h=p;break e}}else if(S.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Dt&&af(k)===S.type){n(h,S.sibling),p=i(S,m.props),p.ref=dr(h,S,m),p.return=h,h=p;break e}n(h,S);break}else t(h,S);S=S.sibling}m.type===xn?(p=an(m.props.children,h.mode,w,m.key),p.return=h,h=p):(w=ss(m.type,m.key,m.props,null,h.mode,w),w.ref=dr(h,p,m),w.return=h,h=w)}return o(h);case Cn:e:{for(S=m.key;p!==null;){if(p.key===S)if(p.tag===4&&p.stateNode.containerInfo===m.containerInfo&&p.stateNode.implementation===m.implementation){n(h,p.sibling),p=i(p,m.children||[]),p.return=h,h=p;break e}else{n(h,p);break}else t(h,p);p=p.sibling}p=Xo(m,h.mode,w),p.return=h,h=p}return o(h);case Dt:return S=m._init,I(h,p,S(m._payload),w)}if(kr(m))return y(h,p,m,w);if(lr(m))return g(h,p,m,w);zi(h,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,p!==null&&p.tag===6?(n(h,p.sibling),p=i(p,m),p.return=h,h=p):(n(h,p),p=Yo(m,h.mode,w),p.return=h,h=p),o(h)):n(h,p)}return I}var qn=Vd(!0),Bd=Vd(!1),Ms=Qt(null),Ps=null,Tn=null,hu=null;function du(){hu=Tn=Ps=null}function pu(e){var t=Ms.current;U(Ms),e._currentValue=t}function Xa(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Vn(e,t){Ps=e,hu=Tn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(_e=!0),e.firstContext=null)}function Ue(e){var t=e._currentValue;if(hu!==e)if(e={context:e,memoizedValue:t,next:null},Tn===null){if(Ps===null)throw Error(C(308));Tn=e,Ps.dependencies={lanes:0,firstContext:e}}else Tn=Tn.next=e;return t}var rn=null;function mu(e){rn===null?rn=[e]:rn.push(e)}function Wd(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,mu(t)):(n.next=i.next,i.next=n),t.interleaved=n,wt(e,r)}function wt(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Mt=!1;function vu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Gd(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function vt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zt(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(A&2)!==0){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,wt(e,n)}return i=r.interleaved,i===null?(t.next=t,mu(r)):(t.next=i.next,i.next=t),r.interleaved=t,wt(e,n)}function Zi(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,tu(e,n)}}function lf(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function $s(e,t,n,r){var i=e.updateQueue;Mt=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var d=i.baseState;o=0,c=u=l=null,a=s;do{var f=a.lane,v=a.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:v,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var y=e,g=a;switch(f=t,v=n,g.tag){case 1:if(y=g.payload,typeof y=="function"){d=y.call(v,d,f);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=g.payload,f=typeof y=="function"?y.call(v,d,f):y,f==null)break e;d=K({},d,f);break e;case 2:Mt=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,f=i.effects,f===null?i.effects=[a]:f.push(a))}else v={eventTime:v,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=v,l=d):c=c.next=v,o|=f;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;f=a,a=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(1);if(c===null&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);dn|=o,e.lanes=o,e.memoizedState=d}}function uf(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(C(191,i));i.call(r)}}}var hi={},lt=Qt(hi),Jr=Qt(hi),qr=Qt(hi);function sn(e){if(e===hi)throw Error(C(174));return e}function gu(e,t){switch(j(qr,t),j(Jr,e),j(lt,hi),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Ra(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Ra(t,e)}U(lt),j(lt,t)}function Yn(){U(lt),U(Jr),U(qr)}function Kd(e){sn(qr.current);var t=sn(lt.current),n=Ra(t,e.type);t!==n&&(j(Jr,e),j(lt,n))}function yu(e){Jr.current===e&&(U(lt),U(Jr))}var B=Qt(0);function Ns(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Wo=[];function wu(){for(var e=0;e<Wo.length;e++)Wo[e]._workInProgressVersionPrimary=null;Wo.length=0}var es=Ct.ReactCurrentDispatcher,Go=Ct.ReactCurrentBatchConfig,hn=0,W=null,Z=null,ae=null,Rs=!1,Mr=!1,Yr=0,c0=0;function de(){throw Error(C(321))}function ku(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!tt(e[n],t[n]))return!1;return!0}function Su(e,t,n,r,i,s){if(hn=s,W=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,es.current=e===null||e.memoizedState===null?p0:m0,e=n(r,i),Mr){s=0;do{if(Mr=!1,Yr=0,25<=s)throw Error(C(301));s+=1,ae=Z=null,t.updateQueue=null,es.current=v0,e=n(r,i)}while(Mr)}if(es.current=Ts,t=Z!==null&&Z.next!==null,hn=0,ae=Z=W=null,Rs=!1,t)throw Error(C(300));return e}function Iu(){var e=Yr!==0;return Yr=0,e}function it(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ae===null?W.memoizedState=ae=e:ae=ae.next=e,ae}function Ve(){if(Z===null){var e=W.alternate;e=e!==null?e.memoizedState:null}else e=Z.next;var t=ae===null?W.memoizedState:ae.next;if(t!==null)ae=t,Z=e;else{if(e===null)throw Error(C(310));Z=e,e={memoizedState:Z.memoizedState,baseState:Z.baseState,baseQueue:Z.baseQueue,queue:Z.queue,next:null},ae===null?W.memoizedState=ae=e:ae=ae.next=e}return ae}function Xr(e,t){return typeof t=="function"?t(e):t}function Ko(e){var t=Ve(),n=t.queue;if(n===null)throw Error(C(311));n.lastRenderedReducer=e;var r=Z,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((hn&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=d,o=r):l=l.next=d,W.lanes|=c,dn|=c}u=u.next}while(u!==null&&u!==s);l===null?o=r:l.next=a,tt(r,t.memoizedState)||(_e=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,W.lanes|=s,dn|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Qo(e){var t=Ve(),n=t.queue;if(n===null)throw Error(C(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);tt(s,t.memoizedState)||(_e=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function Qd(){}function Jd(e,t){var n=W,r=Ve(),i=t(),s=!tt(r.memoizedState,i);if(s&&(r.memoizedState=i,_e=!0),r=r.queue,Eu(Xd.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||ae!==null&&ae.memoizedState.tag&1){if(n.flags|=2048,Zr(9,Yd.bind(null,n,r,i,t),void 0,null),le===null)throw Error(C(349));(hn&30)!==0||qd(n,t,i)}return i}function qd(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=W.updateQueue,t===null?(t={lastEffect:null,stores:null},W.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Yd(e,t,n,r){t.value=n,t.getSnapshot=r,Zd(t)&&ep(e)}function Xd(e,t,n){return n(function(){Zd(t)&&ep(e)})}function Zd(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!tt(e,n)}catch{return!0}}function ep(e){var t=wt(e,1);t!==null&&Xe(t,e,1,-1)}function cf(e){var t=it();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xr,lastRenderedState:e},t.queue=e,e=e.dispatch=d0.bind(null,W,e),[t.memoizedState,e]}function Zr(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=W.updateQueue,t===null?(t={lastEffect:null,stores:null},W.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function tp(){return Ve().memoizedState}function ts(e,t,n,r){var i=it();W.flags|=e,i.memoizedState=Zr(1|t,n,void 0,r===void 0?null:r)}function no(e,t,n,r){var i=Ve();r=r===void 0?null:r;var s=void 0;if(Z!==null){var o=Z.memoizedState;if(s=o.destroy,r!==null&&ku(r,o.deps)){i.memoizedState=Zr(t,n,s,r);return}}W.flags|=e,i.memoizedState=Zr(1|t,n,s,r)}function ff(e,t){return ts(8390656,8,e,t)}function Eu(e,t){return no(2048,8,e,t)}function np(e,t){return no(4,2,e,t)}function rp(e,t){return no(4,4,e,t)}function ip(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function sp(e,t,n){return n=n!=null?n.concat([e]):null,no(4,4,ip.bind(null,t,e),n)}function Cu(){}function op(e,t){var n=Ve();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ku(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ap(e,t){var n=Ve();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ku(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function lp(e,t,n){return(hn&21)===0?(e.baseState&&(e.baseState=!1,_e=!0),e.memoizedState=n):(tt(n,t)||(n=dd(),W.lanes|=n,dn|=n,e.baseState=!0),t)}function f0(e,t){var n=b;b=n!==0&&4>n?n:4,e(!0);var r=Go.transition;Go.transition={};try{e(!1),t()}finally{b=n,Go.transition=r}}function up(){return Ve().memoizedState}function h0(e,t,n){var r=bt(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},cp(e))fp(t,n);else if(n=Wd(e,t,n,r),n!==null){var i=ke();Xe(n,e,r,i),hp(n,t,r)}}function d0(e,t,n){var r=bt(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(cp(e))fp(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,tt(a,o)){var l=t.interleaved;l===null?(i.next=i,mu(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=Wd(e,t,i,r),n!==null&&(i=ke(),Xe(n,e,r,i),hp(n,t,r))}}function cp(e){var t=e.alternate;return e===W||t!==null&&t===W}function fp(e,t){Mr=Rs=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function hp(e,t,n){if((n&4194240)!==0){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,tu(e,n)}}var Ts={readContext:Ue,useCallback:de,useContext:de,useEffect:de,useImperativeHandle:de,useInsertionEffect:de,useLayoutEffect:de,useMemo:de,useReducer:de,useRef:de,useState:de,useDebugValue:de,useDeferredValue:de,useTransition:de,useMutableSource:de,useSyncExternalStore:de,useId:de,unstable_isNewReconciler:!1},p0={readContext:Ue,useCallback:function(e,t){return it().memoizedState=[e,t===void 0?null:t],e},useContext:Ue,useEffect:ff,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,ts(4194308,4,ip.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ts(4194308,4,e,t)},useInsertionEffect:function(e,t){return ts(4,2,e,t)},useMemo:function(e,t){var n=it();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=it();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=h0.bind(null,W,e),[r.memoizedState,e]},useRef:function(e){var t=it();return e={current:e},t.memoizedState=e},useState:cf,useDebugValue:Cu,useDeferredValue:function(e){return it().memoizedState=e},useTransition:function(){var e=cf(!1),t=e[0];return e=f0.bind(null,e[1]),it().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=W,i=it();if(V){if(n===void 0)throw Error(C(407));n=n()}else{if(n=t(),le===null)throw Error(C(349));(hn&30)!==0||qd(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,ff(Xd.bind(null,r,s,e),[e]),r.flags|=2048,Zr(9,Yd.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=it(),t=le.identifierPrefix;if(V){var n=mt,r=pt;n=(r&~(1<<32-Ye(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Yr++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=c0++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},m0={readContext:Ue,useCallback:op,useContext:Ue,useEffect:Eu,useImperativeHandle:sp,useInsertionEffect:np,useLayoutEffect:rp,useMemo:ap,useReducer:Ko,useRef:tp,useState:function(){return Ko(Xr)},useDebugValue:Cu,useDeferredValue:function(e){var t=Ve();return lp(t,Z.memoizedState,e)},useTransition:function(){var e=Ko(Xr)[0],t=Ve().memoizedState;return[e,t]},useMutableSource:Qd,useSyncExternalStore:Jd,useId:up,unstable_isNewReconciler:!1},v0={readContext:Ue,useCallback:op,useContext:Ue,useEffect:Eu,useImperativeHandle:sp,useInsertionEffect:np,useLayoutEffect:rp,useMemo:ap,useReducer:Qo,useRef:tp,useState:function(){return Qo(Xr)},useDebugValue:Cu,useDeferredValue:function(e){var t=Ve();return Z===null?t.memoizedState=e:lp(t,Z.memoizedState,e)},useTransition:function(){var e=Qo(Xr)[0],t=Ve().memoizedState;return[e,t]},useMutableSource:Qd,useSyncExternalStore:Jd,useId:up,unstable_isNewReconciler:!1};function Ke(e,t){if(e&&e.defaultProps){t=K({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Za(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:K({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ro={isMounted:function(e){return(e=e._reactInternals)?gn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ke(),i=bt(e),s=vt(r,i);s.payload=t,n!=null&&(s.callback=n),t=zt(e,s,i),t!==null&&(Xe(t,e,i,r),Zi(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ke(),i=bt(e),s=vt(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=zt(e,s,i),t!==null&&(Xe(t,e,i,r),Zi(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ke(),r=bt(e),i=vt(n,r);i.tag=2,t!=null&&(i.callback=t),t=zt(e,i,r),t!==null&&(Xe(t,e,r,n),Zi(t,e,r))}};function hf(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!Wr(n,r)||!Wr(i,s):!0}function dp(e,t,n){var r=!1,i=Vt,s=t.contextType;return typeof s=="object"&&s!==null?s=Ue(s):(i=Me(t)?cn:ye.current,r=t.contextTypes,s=(r=r!=null)?Qn(e,i):Vt),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function df(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function el(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},vu(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Ue(s):(s=Me(t)?cn:ye.current,i.context=Qn(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(Za(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&ro.enqueueReplaceState(i,i.state,null),$s(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Xn(e,t){try{var n="",r=t;do n+=Bg(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function Jo(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function tl(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var g0=typeof WeakMap=="function"?WeakMap:Map;function pp(e,t,n){n=vt(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Os||(Os=!0,fl=r),tl(e,t)},n}function mp(e,t,n){n=vt(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){tl(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){tl(e,t),typeof r!="function"&&(At===null?At=new Set([this]):At.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function pf(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new g0;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=N0.bind(null,e,t,n),t.then(e,e))}function mf(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function vf(e,t,n,r,i){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=vt(-1,1),t.tag=2,zt(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var y0=Ct.ReactCurrentOwner,_e=!1;function we(e,t,n,r){t.child=e===null?Bd(t,null,n,r):qn(t,e.child,n,r)}function gf(e,t,n,r,i){n=n.render;var s=t.ref;return Vn(t,i),r=Su(e,t,n,r,s,i),n=Iu(),e!==null&&!_e?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,kt(e,t,i)):(V&&n&&uu(t),t.flags|=1,we(e,t,r,i),t.child)}function yf(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!Ru(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,vp(e,t,s,r,i)):(e=ss(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,(e.lanes&i)===0){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Wr,n(o,r)&&e.ref===t.ref)return kt(e,t,i)}return t.flags|=1,e=jt(s,r),e.ref=t.ref,e.return=t,t.child=e}function vp(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(Wr(s,r)&&e.ref===t.ref)if(_e=!1,t.pendingProps=r=s,(e.lanes&i)!==0)(e.flags&131072)!==0&&(_e=!0);else return t.lanes=e.lanes,kt(e,t,i)}return nl(e,t,n,r,i)}function gp(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},j(On,$e),$e|=n;else{if((n&1073741824)===0)return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,j(On,$e),$e|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,j(On,$e),$e|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,j(On,$e),$e|=r;return we(e,t,i,n),t.child}function yp(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function nl(e,t,n,r,i){var s=Me(n)?cn:ye.current;return s=Qn(t,s),Vn(t,i),n=Su(e,t,n,r,s,i),r=Iu(),e!==null&&!_e?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,kt(e,t,i)):(V&&r&&uu(t),t.flags|=1,we(e,t,n,i),t.child)}function wf(e,t,n,r,i){if(Me(n)){var s=!0;xs(t)}else s=!1;if(Vn(t,i),t.stateNode===null)ns(e,t),dp(t,n,r),el(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Ue(u):(u=Me(n)?cn:ye.current,u=Qn(t,u));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||l!==u)&&df(t,o,r,u),Mt=!1;var f=t.memoizedState;o.state=f,$s(t,r,o,i),l=t.memoizedState,a!==r||f!==l||De.current||Mt?(typeof c=="function"&&(Za(t,n,c,r),l=t.memoizedState),(a=Mt||hf(t,n,a,r,f,l,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Gd(e,t),a=t.memoizedProps,u=t.type===t.elementType?a:Ke(t.type,a),o.props=u,d=t.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Ue(l):(l=Me(n)?cn:ye.current,l=Qn(t,l));var v=n.getDerivedStateFromProps;(c=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==d||f!==l)&&df(t,o,r,l),Mt=!1,f=t.memoizedState,o.state=f,$s(t,r,o,i);var y=t.memoizedState;a!==d||f!==y||De.current||Mt?(typeof v=="function"&&(Za(t,n,v,r),y=t.memoizedState),(u=Mt||hf(t,n,u,r,f,y,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=y),o.props=r,o.state=y,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&f===e.memoizedState||(t.flags|=1024),r=!1)}return rl(e,t,n,r,s,i)}function rl(e,t,n,r,i,s){yp(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&rf(t,n,!1),kt(e,t,s);r=t.stateNode,y0.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=qn(t,e.child,null,s),t.child=qn(t,null,a,s)):we(e,t,a,s),t.memoizedState=r.state,i&&rf(t,n,!0),t.child}function wp(e){var t=e.stateNode;t.pendingContext?nf(e,t.pendingContext,t.pendingContext!==t.context):t.context&&nf(e,t.context,!1),gu(e,t.containerInfo)}function kf(e,t,n,r,i){return Jn(),fu(i),t.flags|=256,we(e,t,n,r),t.child}var il={dehydrated:null,treeContext:null,retryLane:0};function sl(e){return{baseLanes:e,cachePool:null,transitions:null}}function kp(e,t,n){var r=t.pendingProps,i=B.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),j(B,i&1),e===null)return Ya(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},(r&1)===0&&s!==null?(s.childLanes=0,s.pendingProps=o):s=oo(o,r,0,null),e=an(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=sl(n),t.memoizedState=il,e):xu(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return w0(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var l={mode:"hidden",children:r.children};return(o&1)===0&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=jt(i,l),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=jt(a,s):(s=an(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?sl(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=il,r}return s=e.child,e=s.sibling,r=jt(s,{mode:"visible",children:r.children}),(t.mode&1)===0&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function xu(e,t){return t=oo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ai(e,t,n,r){return r!==null&&fu(r),qn(t,e.child,null,n),e=xu(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function w0(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=Jo(Error(C(422))),Ai(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=oo({mode:"visible",children:r.children},i,0,null),s=an(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,(t.mode&1)!==0&&qn(t,e.child,null,o),t.child.memoizedState=sl(o),t.memoizedState=il,s);if((t.mode&1)===0)return Ai(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(C(419)),r=Jo(s,r,void 0),Ai(e,t,o,r)}if(a=(o&e.childLanes)!==0,_e||a){if(r=le,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=(i&(r.suspendedLanes|o))!==0?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,wt(e,i),Xe(r,e,i,-1))}return Nu(),r=Jo(Error(C(421))),Ai(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=R0.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Re=Ht(i.nextSibling),Te=t,V=!0,Je=null,e!==null&&(Ae[be++]=pt,Ae[be++]=mt,Ae[be++]=fn,pt=e.id,mt=e.overflow,fn=t),t=xu(t,r.children),t.flags|=4096,t)}function Sf(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Xa(e.return,t,n)}function qo(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Sp(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(we(e,t,r.children,n),r=B.current,(r&2)!==0)r=r&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Sf(e,n,t);else if(e.tag===19)Sf(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(j(B,r),(t.mode&1)===0)t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Ns(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),qo(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Ns(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}qo(t,!0,n,null,s);break;case"together":qo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ns(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function kt(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),dn|=t.lanes,(n&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(C(153));if(t.child!==null){for(e=t.child,n=jt(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=jt(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function k0(e,t,n){switch(t.tag){case 3:wp(t),Jn();break;case 5:Kd(t);break;case 1:Me(t.type)&&xs(t);break;case 4:gu(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;j(Ms,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(j(B,B.current&1),t.flags|=128,null):(n&t.child.childLanes)!==0?kp(e,t,n):(j(B,B.current&1),e=kt(e,t,n),e!==null?e.sibling:null);j(B,B.current&1);break;case 19:if(r=(n&t.childLanes)!==0,(e.flags&128)!==0){if(r)return Sp(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),j(B,B.current),r)break;return null;case 22:case 23:return t.lanes=0,gp(e,t,n)}return kt(e,t,n)}var Ip,ol,Ep,Cp;Ip=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ol=function(){};Ep=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,sn(lt.current);var s=null;switch(n){case"input":i=Ma(e,i),r=Ma(e,r),s=[];break;case"select":i=K({},i,{value:void 0}),r=K({},r,{value:void 0}),s=[];break;case"textarea":i=Na(e,i),r=Na(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Es)}Ta(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ar.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var l=r[u];if(a=i?.[u],r.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ar.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&F("scroll",e),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(t.updateQueue=u)&&(t.flags|=4)}};Cp=function(e,t,n,r){n!==r&&(t.flags|=4)};function pr(e,t){if(!V)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function pe(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function S0(e,t,n){var r=t.pendingProps;switch(cu(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pe(t),null;case 1:return Me(t.type)&&Cs(),pe(t),null;case 3:return r=t.stateNode,Yn(),U(De),U(ye),wu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Hi(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Je!==null&&(pl(Je),Je=null))),ol(e,t),pe(t),null;case 5:yu(t);var i=sn(qr.current);if(n=t.type,e!==null&&t.stateNode!=null)Ep(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(C(166));return pe(t),null}if(e=sn(lt.current),Hi(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[ot]=t,r[Qr]=s,e=(t.mode&1)!==0,n){case"dialog":F("cancel",r),F("close",r);break;case"iframe":case"object":case"embed":F("load",r);break;case"video":case"audio":for(i=0;i<Ir.length;i++)F(Ir[i],r);break;case"source":F("error",r);break;case"img":case"image":case"link":F("error",r),F("load",r);break;case"details":F("toggle",r);break;case"input":Pc(r,s),F("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},F("invalid",r);break;case"textarea":Nc(r,s),F("invalid",r)}Ta(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&Oi(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Oi(r.textContent,a,e),i=["children",""+a]):Ar.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&F("scroll",r)}switch(n){case"input":Di(r),$c(r,s,!0);break;case"textarea":Di(r),Rc(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Es)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Xh(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[ot]=t,e[Qr]=r,Ip(e,t,!1,!1),t.stateNode=e;e:{switch(o=La(n,r),n){case"dialog":F("cancel",e),F("close",e),i=r;break;case"iframe":case"object":case"embed":F("load",e),i=r;break;case"video":case"audio":for(i=0;i<Ir.length;i++)F(Ir[i],e);i=r;break;case"source":F("error",e),i=r;break;case"img":case"image":case"link":F("error",e),F("load",e),i=r;break;case"details":F("toggle",e),i=r;break;case"input":Pc(e,r),i=Ma(e,r),F("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=K({},r,{value:void 0}),F("invalid",e);break;case"textarea":Nc(e,r),i=Na(e,r),F("invalid",e);break;default:i=r}Ta(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?td(e,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Zh(e,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&br(e,l):typeof l=="number"&&br(e,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ar.hasOwnProperty(s)?l!=null&&s==="onScroll"&&F("scroll",e):l!=null&&Jl(e,s,l,o))}switch(n){case"input":Di(e),$c(e,r,!1);break;case"textarea":Di(e),Rc(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Ut(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?bn(e,!!r.multiple,s,!1):r.defaultValue!=null&&bn(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Es)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return pe(t),null;case 6:if(e&&t.stateNode!=null)Cp(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(C(166));if(n=sn(qr.current),sn(lt.current),Hi(t)){if(r=t.stateNode,n=t.memoizedProps,r[ot]=t,(s=r.nodeValue!==n)&&(e=Te,e!==null))switch(e.tag){case 3:Oi(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Oi(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[ot]=t,t.stateNode=r}return pe(t),null;case 13:if(U(B),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(V&&Re!==null&&(t.mode&1)!==0&&(t.flags&128)===0)Ud(),Jn(),t.flags|=98560,s=!1;else if(s=Hi(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(C(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(C(317));s[ot]=t}else Jn(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;pe(t),s=!1}else Je!==null&&(pl(Je),Je=null),s=!0;if(!s)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(B.current&1)!==0?te===0&&(te=3):Nu())),t.updateQueue!==null&&(t.flags|=4),pe(t),null);case 4:return Yn(),ol(e,t),e===null&&Gr(t.stateNode.containerInfo),pe(t),null;case 10:return pu(t.type._context),pe(t),null;case 17:return Me(t.type)&&Cs(),pe(t),null;case 19:if(U(B),s=t.memoizedState,s===null)return pe(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)pr(s,!1);else{if(te!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(o=Ns(e),o!==null){for(t.flags|=128,pr(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return j(B,B.current&1|2),t.child}e=e.sibling}s.tail!==null&&Y()>Zn&&(t.flags|=128,r=!0,pr(s,!1),t.lanes=4194304)}else{if(!r)if(e=Ns(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),pr(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!V)return pe(t),null}else 2*Y()-s.renderingStartTime>Zn&&n!==1073741824&&(t.flags|=128,r=!0,pr(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Y(),t.sibling=null,n=B.current,j(B,r?n&1|2:n&1),t):(pe(t),null);case 22:case 23:return $u(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&(t.mode&1)!==0?($e&1073741824)!==0&&(pe(t),t.subtreeFlags&6&&(t.flags|=8192)):pe(t),null;case 24:return null;case 25:return null}throw Error(C(156,t.tag))}function I0(e,t){switch(cu(t),t.tag){case 1:return Me(t.type)&&Cs(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Yn(),U(De),U(ye),wu(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return yu(t),null;case 13:if(U(B),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(C(340));Jn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return U(B),null;case 4:return Yn(),null;case 10:return pu(t.type._context),null;case 22:case 23:return $u(),null;case 24:return null;default:return null}}var bi=!1,me=!1,E0=typeof WeakSet=="function"?WeakSet:Set,P=null;function Ln(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){J(e,t,r)}else n.current=null}function al(e,t,n){try{n()}catch(r){J(e,t,r)}}var If=!1;function C0(e,t){if(Ba=ks,e=Pd(),lu(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,d=e,f=null;t:for(;;){for(var v;d!==n||i!==0&&d.nodeType!==3||(a=o+i),d!==s||r!==0&&d.nodeType!==3||(l=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(v=d.firstChild)!==null;)f=d,d=v;for(;;){if(d===e)break t;if(f===n&&++u===i&&(a=o),f===s&&++c===r&&(l=o),(v=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=v}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Wa={focusedElem:e,selectionRange:n},ks=!1,P=t;P!==null;)if(t=P,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,P=e;else for(;P!==null;){t=P;try{var y=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var g=y.memoizedProps,I=y.memoizedState,h=t.stateNode,p=h.getSnapshotBeforeUpdate(t.elementType===t.type?g:Ke(t.type,g),I);h.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var m=t.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(C(163))}}catch(w){J(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,P=e;break}P=t.return}return y=If,If=!1,y}function Pr(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&al(t,n,s)}i=i.next}while(i!==r)}}function io(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ll(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function xp(e){var t=e.alternate;t!==null&&(e.alternate=null,xp(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[ot],delete t[Qr],delete t[Qa],delete t[o0],delete t[a0])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function _p(e){return e.tag===5||e.tag===3||e.tag===4}function Ef(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||_p(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function ul(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Es));else if(r!==4&&(e=e.child,e!==null))for(ul(e,t,n),e=e.sibling;e!==null;)ul(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(cl(e,t,n),e=e.sibling;e!==null;)cl(e,t,n),e=e.sibling}var ce=null,Qe=!1;function _t(e,t,n){for(n=n.child;n!==null;)Dp(e,t,n),n=n.sibling}function Dp(e,t,n){if(at&&typeof at.onCommitFiberUnmount=="function")try{at.onCommitFiberUnmount(qs,n)}catch{}switch(n.tag){case 5:me||Ln(n,t);case 6:var r=ce,i=Qe;ce=null,_t(e,t,n),ce=r,Qe=i,ce!==null&&(Qe?(e=ce,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):ce.removeChild(n.stateNode));break;case 18:ce!==null&&(Qe?(e=ce,n=n.stateNode,e.nodeType===8?Vo(e.parentNode,n):e.nodeType===1&&Vo(e,n),Vr(e)):Vo(ce,n.stateNode));break;case 4:r=ce,i=Qe,ce=n.stateNode.containerInfo,Qe=!0,_t(e,t,n),ce=r,Qe=i;break;case 0:case 11:case 14:case 15:if(!me&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&((s&2)!==0||(s&4)!==0)&&al(n,t,o),i=i.next}while(i!==r)}_t(e,t,n);break;case 1:if(!me&&(Ln(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){J(n,t,a)}_t(e,t,n);break;case 21:_t(e,t,n);break;case 22:n.mode&1?(me=(r=me)||n.memoizedState!==null,_t(e,t,n),me=r):_t(e,t,n);break;default:_t(e,t,n)}}function Cf(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new E0),t.forEach(function(r){var i=T0.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Ge(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:ce=a.stateNode,Qe=!1;break e;case 3:ce=a.stateNode.containerInfo,Qe=!0;break e;case 4:ce=a.stateNode.containerInfo,Qe=!0;break e}a=a.return}if(ce===null)throw Error(C(160));Dp(s,o,i),ce=null,Qe=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){J(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Mp(t,e),t=t.sibling}function Mp(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Ge(t,e),rt(e),r&4){try{Pr(3,e,e.return),io(3,e)}catch(g){J(e,e.return,g)}try{Pr(5,e,e.return)}catch(g){J(e,e.return,g)}}break;case 1:Ge(t,e),rt(e),r&512&&n!==null&&Ln(n,n.return);break;case 5:if(Ge(t,e),rt(e),r&512&&n!==null&&Ln(n,n.return),e.flags&32){var i=e.stateNode;try{br(i,"")}catch(g){J(e,e.return,g)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&qh(i,s),La(a,o);var u=La(a,s);for(o=0;o<l.length;o+=2){var c=l[o],d=l[o+1];c==="style"?td(i,d):c==="dangerouslySetInnerHTML"?Zh(i,d):c==="children"?br(i,d):Jl(i,c,d,u)}switch(a){case"input":Pa(i,s);break;case"textarea":Yh(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var v=s.value;v!=null?bn(i,!!s.multiple,v,!1):f!==!!s.multiple&&(s.defaultValue!=null?bn(i,!!s.multiple,s.defaultValue,!0):bn(i,!!s.multiple,s.multiple?[]:"",!1))}i[Qr]=s}catch(g){J(e,e.return,g)}}break;case 6:if(Ge(t,e),rt(e),r&4){if(e.stateNode===null)throw Error(C(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(g){J(e,e.return,g)}}break;case 3:if(Ge(t,e),rt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Vr(t.containerInfo)}catch(g){J(e,e.return,g)}break;case 4:Ge(t,e),rt(e);break;case 13:Ge(t,e),rt(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Mu=Y())),r&4&&Cf(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(me=(u=me)||c,Ge(t,e),me=u):Ge(t,e),rt(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&(e.mode&1)!==0)for(P=e,c=e.child;c!==null;){for(d=P=c;P!==null;){switch(f=P,v=f.child,f.tag){case 0:case 11:case 14:case 15:Pr(4,f,f.return);break;case 1:Ln(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){r=f,n=f.return;try{t=r,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(g){J(r,n,g)}}break;case 5:Ln(f,f.return);break;case 22:if(f.memoizedState!==null){_f(d);continue}}v!==null?(v.return=f,P=v):_f(d)}c=c.sibling}e:for(c=null,d=e;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=d.stateNode,l=d.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=ed("display",o))}catch(g){J(e,e.return,g)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){J(e,e.return,g)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===e)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;d.sibling===null;){if(d.return===null||d.return===e)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Ge(t,e),rt(e),r&4&&Cf(e);break;case 21:break;default:Ge(t,e),rt(e)}}function rt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(_p(n)){var r=n;break e}n=n.return}throw Error(C(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(br(i,""),r.flags&=-33);var s=Ef(e);cl(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Ef(e);ul(e,a,o);break;default:throw Error(C(161))}}catch(l){J(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function x0(e,t,n){P=e,Pp(e)}function Pp(e,t,n){for(var r=(e.mode&1)!==0;P!==null;){var i=P,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||bi;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||me;a=bi;var u=me;if(bi=o,(me=l)&&!u)for(P=i;P!==null;)o=P,l=o.child,o.tag===22&&o.memoizedState!==null?Df(i):l!==null?(l.return=o,P=l):Df(i);for(;s!==null;)P=s,Pp(s),s=s.sibling;P=i,bi=a,me=u}xf(e)}else(i.subtreeFlags&8772)!==0&&s!==null?(s.return=i,P=s):xf(e)}}function xf(e){for(;P!==null;){var t=P;if((t.flags&8772)!==0){var n=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:me||io(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!me)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Ke(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&uf(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}uf(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&Vr(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(C(163))}me||t.flags&512&&ll(t)}catch(f){J(t,t.return,f)}}if(t===e){P=null;break}if(n=t.sibling,n!==null){n.return=t.return,P=n;break}P=t.return}}function _f(e){for(;P!==null;){var t=P;if(t===e){P=null;break}var n=t.sibling;if(n!==null){n.return=t.return,P=n;break}P=t.return}}function Df(e){for(;P!==null;){var t=P;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{io(4,t)}catch(l){J(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){J(t,i,l)}}var s=t.return;try{ll(t)}catch(l){J(t,s,l)}break;case 5:var o=t.return;try{ll(t)}catch(l){J(t,o,l)}}}catch(l){J(t,t.return,l)}if(t===e){P=null;break}var a=t.sibling;if(a!==null){a.return=t.return,P=a;break}P=t.return}}var _0=Math.ceil,Ls=Ct.ReactCurrentDispatcher,_u=Ct.ReactCurrentOwner,Fe=Ct.ReactCurrentBatchConfig,A=0,le=null,X=null,fe=0,$e=0,On=Qt(0),te=0,ei=null,dn=0,so=0,Du=0,$r=null,xe=null,Mu=0,Zn=1/0,ft=null,Os=!1,fl=null,At=null,ji=!1,Rt=null,Hs=0,Nr=0,hl=null,rs=-1,is=0;function ke(){return(A&6)!==0?Y():rs!==-1?rs:rs=Y()}function bt(e){return(e.mode&1)===0?1:(A&2)!==0&&fe!==0?fe&-fe:u0.transition!==null?(is===0&&(is=dd()),is):(e=b,e!==0||(e=window.event,e=e===void 0?16:kd(e.type)),e)}function Xe(e,t,n,r){if(50<Nr)throw Nr=0,hl=null,Error(C(185));ui(e,n,r),((A&2)===0||e!==le)&&(e===le&&((A&2)===0&&(so|=n),te===4&&$t(e,fe)),Pe(e,r),n===1&&A===0&&(t.mode&1)===0&&(Zn=Y()+500,to&&Jt()))}function Pe(e,t){var n=e.callbackNode;uy(e,t);var r=ws(e,e===le?fe:0);if(r===0)n!==null&&Oc(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Oc(n),t===1)e.tag===0?l0(Mf.bind(null,e)):bd(Mf.bind(null,e)),i0(function(){(A&6)===0&&Jt()}),n=null;else{switch(pd(r)){case 1:n=eu;break;case 4:n=fd;break;case 16:n=ys;break;case 536870912:n=hd;break;default:n=ys}n=zp(n,$p.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function $p(e,t){if(rs=-1,is=0,(A&6)!==0)throw Error(C(327));var n=e.callbackNode;if(Bn()&&e.callbackNode!==n)return null;var r=ws(e,e===le?fe:0);if(r===0)return null;if((r&30)!==0||(r&e.expiredLanes)!==0||t)t=zs(e,r);else{t=r;var i=A;A|=2;var s=Rp();(le!==e||fe!==t)&&(ft=null,Zn=Y()+500,on(e,t));do try{P0();break}catch(a){Np(e,a)}while(1);du(),Ls.current=s,A=i,X!==null?t=0:(le=null,fe=0,t=te)}if(t!==0){if(t===2&&(i=ba(e),i!==0&&(r=i,t=dl(e,i))),t===1)throw n=ei,on(e,0),$t(e,r),Pe(e,Y()),n;if(t===6)$t(e,r);else{if(i=e.current.alternate,(r&30)===0&&!D0(i)&&(t=zs(e,r),t===2&&(s=ba(e),s!==0&&(r=s,t=dl(e,s))),t===1))throw n=ei,on(e,0),$t(e,r),Pe(e,Y()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(C(345));case 2:tn(e,xe,ft);break;case 3:if($t(e,r),(r&130023424)===r&&(t=Mu+500-Y(),10<t)){if(ws(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){ke(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Ka(tn.bind(null,e,xe,ft),t);break}tn(e,xe,ft);break;case 4:if($t(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-Ye(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=Y()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_0(r/1960))-r,10<r){e.timeoutHandle=Ka(tn.bind(null,e,xe,ft),r);break}tn(e,xe,ft);break;case 5:tn(e,xe,ft);break;default:throw Error(C(329))}}}return Pe(e,Y()),e.callbackNode===n?$p.bind(null,e):null}function dl(e,t){var n=$r;return e.current.memoizedState.isDehydrated&&(on(e,t).flags|=256),e=zs(e,t),e!==2&&(t=xe,xe=n,t!==null&&pl(t)),e}function pl(e){xe===null?xe=e:xe.push.apply(xe,e)}function D0(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!tt(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function $t(e,t){for(t&=~Du,t&=~so,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Ye(t),r=1<<n;e[n]=-1,t&=~r}}function Mf(e){if((A&6)!==0)throw Error(C(327));Bn();var t=ws(e,0);if((t&1)===0)return Pe(e,Y()),null;var n=zs(e,t);if(e.tag!==0&&n===2){var r=ba(e);r!==0&&(t=r,n=dl(e,r))}if(n===1)throw n=ei,on(e,0),$t(e,t),Pe(e,Y()),n;if(n===6)throw Error(C(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,tn(e,xe,ft),Pe(e,Y()),null}function Pu(e,t){var n=A;A|=1;try{return e(t)}finally{A=n,A===0&&(Zn=Y()+500,to&&Jt())}}function pn(e){Rt!==null&&Rt.tag===0&&(A&6)===0&&Bn();var t=A;A|=1;var n=Fe.transition,r=b;try{if(Fe.transition=null,b=1,e)return e()}finally{b=r,Fe.transition=n,A=t,(A&6)===0&&Jt()}}function $u(){$e=On.current,U(On)}function on(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,r0(n)),X!==null)for(n=X.return;n!==null;){var r=n;switch(cu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Cs();break;case 3:Yn(),U(De),U(ye),wu();break;case 5:yu(r);break;case 4:Yn();break;case 13:U(B);break;case 19:U(B);break;case 10:pu(r.type._context);break;case 22:case 23:$u()}n=n.return}if(le=e,X=e=jt(e.current,null),fe=$e=t,te=0,ei=null,Du=so=dn=0,xe=$r=null,rn!==null){for(t=0;t<rn.length;t++)if(n=rn[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}rn=null}return e}function Np(e,t){do{var n=X;try{if(du(),es.current=Ts,Rs){for(var r=W.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Rs=!1}if(hn=0,ae=Z=W=null,Mr=!1,Yr=0,_u.current=null,n===null||n.return===null){te=1,ei=t,X=null;break}e:{var s=e,o=n.return,a=n,l=t;if(t=fe,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,d=c.tag;if((c.mode&1)===0&&(d===0||d===11||d===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var v=mf(o);if(v!==null){v.flags&=-257,vf(v,o,a,s,t),v.mode&1&&pf(s,u,t),t=v,l=u;var y=t.updateQueue;if(y===null){var g=new Set;g.add(l),t.updateQueue=g}else y.add(l);break e}else{if((t&1)===0){pf(s,u,t),Nu();break e}l=Error(C(426))}}else if(V&&a.mode&1){var I=mf(o);if(I!==null){(I.flags&65536)===0&&(I.flags|=256),vf(I,o,a,s,t),fu(Xn(l,a));break e}}s=l=Xn(l,a),te!==4&&(te=2),$r===null?$r=[s]:$r.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var h=pp(s,l,t);lf(s,h);break e;case 1:a=l;var p=s.type,m=s.stateNode;if((s.flags&128)===0&&(typeof p.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(At===null||!At.has(m)))){s.flags|=65536,t&=-t,s.lanes|=t;var w=mp(s,a,t);lf(s,w);break e}}s=s.return}while(s!==null)}Lp(n)}catch(k){t=k,X===n&&n!==null&&(X=n=n.return);continue}break}while(1)}function Rp(){var e=Ls.current;return Ls.current=Ts,e===null?Ts:e}function Nu(){(te===0||te===3||te===2)&&(te=4),le===null||(dn&268435455)===0&&(so&268435455)===0||$t(le,fe)}function zs(e,t){var n=A;A|=2;var r=Rp();(le!==e||fe!==t)&&(ft=null,on(e,t));do try{M0();break}catch(i){Np(e,i)}while(1);if(du(),A=n,Ls.current=r,X!==null)throw Error(C(261));return le=null,fe=0,te}function M0(){for(;X!==null;)Tp(X)}function P0(){for(;X!==null&&!ey();)Tp(X)}function Tp(e){var t=Hp(e.alternate,e,$e);e.memoizedProps=e.pendingProps,t===null?Lp(e):X=t,_u.current=null}function Lp(e){var t=e;do{var n=t.alternate;if(e=t.return,(t.flags&32768)===0){if(n=S0(n,t,$e),n!==null){X=n;return}}else{if(n=I0(n,t),n!==null){n.flags&=32767,X=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{te=6,X=null;return}}if(t=t.sibling,t!==null){X=t;return}X=t=e}while(t!==null);te===0&&(te=5)}function tn(e,t,n){var r=b,i=Fe.transition;try{Fe.transition=null,b=1,$0(e,t,n,r)}finally{Fe.transition=i,b=r}return null}function $0(e,t,n,r){do Bn();while(Rt!==null);if((A&6)!==0)throw Error(C(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(C(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(cy(e,s),e===le&&(X=le=null,fe=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||ji||(ji=!0,zp(ys,function(){return Bn(),null})),s=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||s){s=Fe.transition,Fe.transition=null;var o=b;b=1;var a=A;A|=4,_u.current=null,C0(e,n),Mp(n,e),qy(Wa),ks=!!Ba,Wa=Ba=null,e.current=n,x0(n),ty(),A=a,b=o,Fe.transition=s}else e.current=n;if(ji&&(ji=!1,Rt=e,Hs=i),s=e.pendingLanes,s===0&&(At=null),iy(n.stateNode),Pe(e,Y()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Os)throw Os=!1,e=fl,fl=null,e;return(Hs&1)!==0&&e.tag!==0&&Bn(),s=e.pendingLanes,(s&1)!==0?e===hl?Nr++:(Nr=0,hl=e):Nr=0,Jt(),null}function Bn(){if(Rt!==null){var e=pd(Hs),t=Fe.transition,n=b;try{if(Fe.transition=null,b=16>e?16:e,Rt===null)var r=!1;else{if(e=Rt,Rt=null,Hs=0,(A&6)!==0)throw Error(C(331));var i=A;for(A|=4,P=e.current;P!==null;){var s=P,o=s.child;if((P.flags&16)!==0){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(P=u;P!==null;){var c=P;switch(c.tag){case 0:case 11:case 15:Pr(8,c,s)}var d=c.child;if(d!==null)d.return=c,P=d;else for(;P!==null;){c=P;var f=c.sibling,v=c.return;if(xp(c),c===u){P=null;break}if(f!==null){f.return=v,P=f;break}P=v}}}var y=s.alternate;if(y!==null){var g=y.child;if(g!==null){y.child=null;do{var I=g.sibling;g.sibling=null,g=I}while(g!==null)}}P=s}}if((s.subtreeFlags&2064)!==0&&o!==null)o.return=s,P=o;else e:for(;P!==null;){if(s=P,(s.flags&2048)!==0)switch(s.tag){case 0:case 11:case 15:Pr(9,s,s.return)}var h=s.sibling;if(h!==null){h.return=s.return,P=h;break e}P=s.return}}var p=e.current;for(P=p;P!==null;){o=P;var m=o.child;if((o.subtreeFlags&2064)!==0&&m!==null)m.return=o,P=m;else e:for(o=p;P!==null;){if(a=P,(a.flags&2048)!==0)try{switch(a.tag){case 0:case 11:case 15:io(9,a)}}catch(k){J(a,a.return,k)}if(a===o){P=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,P=w;break e}P=a.return}}if(A=i,Jt(),at&&typeof at.onPostCommitFiberRoot=="function")try{at.onPostCommitFiberRoot(qs,e)}catch{}r=!0}return r}finally{b=n,Fe.transition=t}}return!1}function Pf(e,t,n){t=Xn(n,t),t=pp(e,t,1),e=zt(e,t,1),t=ke(),e!==null&&(ui(e,1,t),Pe(e,t))}function J(e,t,n){if(e.tag===3)Pf(e,e,n);else for(;t!==null;){if(t.tag===3){Pf(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(At===null||!At.has(r))){e=Xn(n,e),e=mp(t,e,1),t=zt(t,e,1),e=ke(),t!==null&&(ui(t,1,e),Pe(t,e));break}}t=t.return}}function N0(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=ke(),e.pingedLanes|=e.suspendedLanes&n,le===e&&(fe&n)===n&&(te===4||te===3&&(fe&130023424)===fe&&500>Y()-Mu?on(e,0):Du|=n),Pe(e,t)}function Op(e,t){t===0&&((e.mode&1)===0?t=1:(t=$i,$i<<=1,($i&130023424)===0&&($i=4194304)));var n=ke();e=wt(e,t),e!==null&&(ui(e,t,n),Pe(e,n))}function R0(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Op(e,n)}function T0(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(C(314))}r!==null&&r.delete(t),Op(e,n)}var Hp;Hp=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||De.current)_e=!0;else{if((e.lanes&n)===0&&(t.flags&128)===0)return _e=!1,k0(e,t,n);_e=(e.flags&131072)!==0}else _e=!1,V&&(t.flags&1048576)!==0&&jd(t,Ds,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;ns(e,t),e=t.pendingProps;var i=Qn(t,ye.current);Vn(t,n),i=Su(null,t,r,e,i,n);var s=Iu();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Me(r)?(s=!0,xs(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,vu(t),i.updater=ro,t.stateNode=i,i._reactInternals=t,el(t,r,e,n),t=rl(null,t,r,!0,s,n)):(t.tag=0,V&&s&&uu(t),we(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(ns(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=O0(r),e=Ke(r,e),i){case 0:t=nl(null,t,r,e,n);break e;case 1:t=wf(null,t,r,e,n);break e;case 11:t=gf(null,t,r,e,n);break e;case 14:t=yf(null,t,r,Ke(r.type,e),n);break e}throw Error(C(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ke(r,i),nl(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ke(r,i),wf(e,t,r,i,n);case 3:e:{if(wp(t),e===null)throw Error(C(387));r=t.pendingProps,s=t.memoizedState,i=s.element,Gd(e,t),$s(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=Xn(Error(C(423)),t),t=kf(e,t,r,n,i);break e}else if(r!==i){i=Xn(Error(C(424)),t),t=kf(e,t,r,n,i);break e}else for(Re=Ht(t.stateNode.containerInfo.firstChild),Te=t,V=!0,Je=null,n=Bd(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Jn(),r===i){t=kt(e,t,n);break e}we(e,t,r,n)}t=t.child}return t;case 5:return Kd(t),e===null&&Ya(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,Ga(r,i)?o=null:s!==null&&Ga(r,s)&&(t.flags|=32),yp(e,t),we(e,t,o,n),t.child;case 6:return e===null&&Ya(t),null;case 13:return kp(e,t,n);case 4:return gu(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=qn(t,null,r,n):we(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ke(r,i),gf(e,t,r,i,n);case 7:return we(e,t,t.pendingProps,n),t.child;case 8:return we(e,t,t.pendingProps.children,n),t.child;case 12:return we(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,j(Ms,r._currentValue),r._currentValue=o,s!==null)if(tt(s.value,o)){if(s.children===i.children&&!De.current){t=kt(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(s.tag===1){l=vt(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Xa(s.return,n,t),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(C(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Xa(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}we(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Vn(t,n),i=Ue(i),r=r(i),t.flags|=1,we(e,t,r,n),t.child;case 14:return r=t.type,i=Ke(r,t.pendingProps),i=Ke(r.type,i),yf(e,t,r,i,n);case 15:return vp(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Ke(r,i),ns(e,t),t.tag=1,Me(r)?(e=!0,xs(t)):e=!1,Vn(t,n),dp(t,r,i),el(t,r,i,n),rl(null,t,r,!0,e,n);case 19:return Sp(e,t,n);case 22:return gp(e,t,n)}throw Error(C(156,t.tag))};function zp(e,t){return cd(e,t)}function L0(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function je(e,t,n,r){return new L0(e,t,n,r)}function Ru(e){return e=e.prototype,!(!e||!e.isReactComponent)}function O0(e){if(typeof e=="function")return Ru(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Yl)return 11;if(e===Xl)return 14}return 2}function jt(e,t){var n=e.alternate;return n===null?(n=je(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ss(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")Ru(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case xn:return an(n.children,i,s,t);case ql:o=8,i|=8;break;case Ca:return e=je(12,n,t,i|2),e.elementType=Ca,e.lanes=s,e;case xa:return e=je(13,n,t,i),e.elementType=xa,e.lanes=s,e;case _a:return e=je(19,n,t,i),e.elementType=_a,e.lanes=s,e;case Kh:return oo(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Wh:o=10;break e;case Gh:o=9;break e;case Yl:o=11;break e;case Xl:o=14;break e;case Dt:o=16,r=null;break e}throw Error(C(130,e==null?e:typeof e,""))}return t=je(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function an(e,t,n,r){return e=je(7,e,r,t),e.lanes=n,e}function oo(e,t,n,r){return e=je(22,e,r,t),e.elementType=Kh,e.lanes=n,e.stateNode={isHidden:!1},e}function Yo(e,t,n){return e=je(6,e,null,t),e.lanes=n,e}function Xo(e,t,n){return t=je(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function H0(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ro(0),this.expirationTimes=Ro(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ro(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Tu(e,t,n,r,i,s,o,a,l){return e=new H0(e,t,n,a,l),t===1?(t=1,s===!0&&(t|=8)):t=0,s=je(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},vu(s),e}function z0(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Cn,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function Ap(e){if(!e)return Vt;e=e._reactInternals;e:{if(gn(e)!==e||e.tag!==1)throw Error(C(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Me(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(C(171))}if(e.tag===1){var n=e.type;if(Me(n))return Ad(e,n,t)}return t}function bp(e,t,n,r,i,s,o,a,l){return e=Tu(n,r,!0,e,i,s,o,a,l),e.context=Ap(null),n=e.current,r=ke(),i=bt(n),s=vt(r,i),s.callback=t??null,zt(n,s,i),e.current.lanes=i,ui(e,i,r),Pe(e,r),e}function ao(e,t,n,r){var i=t.current,s=ke(),o=bt(i);return n=Ap(n),t.context===null?t.context=n:t.pendingContext=n,t=vt(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=zt(i,t,o),e!==null&&(Xe(e,i,o,s),Zi(e,i,o)),o}function As(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function $f(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Lu(e,t){$f(e,t),(e=e.alternate)&&$f(e,t)}function A0(){return null}var jp=typeof reportError=="function"?reportError:function(e){console.error(e)};function Ou(e){this._internalRoot=e}lo.prototype.render=Ou.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(C(409));ao(e,t,null,null)};lo.prototype.unmount=Ou.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;pn(function(){ao(null,e,null,null)}),t[yt]=null}};function lo(e){this._internalRoot=e}lo.prototype.unstable_scheduleHydration=function(e){if(e){var t=gd();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&t!==0&&t<Pt[n].priority;n++);Pt.splice(n,0,e),n===0&&wd(e)}};function Hu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function uo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Nf(){}function b0(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=As(o);s.call(u)}}var o=bp(t,r,e,0,null,!1,!1,"",Nf);return e._reactRootContainer=o,e[yt]=o.current,Gr(e.nodeType===8?e.parentNode:e),pn(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var u=As(l);a.call(u)}}var l=Tu(e,0,!1,null,null,!1,!1,"",Nf);return e._reactRootContainer=l,e[yt]=l.current,Gr(e.nodeType===8?e.parentNode:e),pn(function(){ao(t,l,n,r)}),l}function co(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=As(o);a.call(l)}}ao(t,o,e,i)}else o=b0(n,t,e,i,r);return As(o)}md=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Sr(t.pendingLanes);n!==0&&(tu(t,n|1),Pe(t,Y()),(A&6)===0&&(Zn=Y()+500,Jt()))}break;case 13:pn(function(){var r=wt(e,1);if(r!==null){var i=ke();Xe(r,e,1,i)}}),Lu(e,1)}};nu=function(e){if(e.tag===13){var t=wt(e,134217728);if(t!==null){var n=ke();Xe(t,e,134217728,n)}Lu(e,134217728)}};vd=function(e){if(e.tag===13){var t=bt(e),n=wt(e,t);if(n!==null){var r=ke();Xe(n,e,t,r)}Lu(e,t)}};gd=function(){return b};yd=function(e,t){var n=b;try{return b=e,t()}finally{b=n}};Ha=function(e,t,n){switch(t){case"input":if(Pa(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=eo(r);if(!i)throw Error(C(90));Jh(r),Pa(r,i)}}}break;case"textarea":Yh(e,n);break;case"select":t=n.value,t!=null&&bn(e,!!n.multiple,t,!1)}};id=Pu;sd=pn;var j0={usingClientEntryPoint:!1,Events:[fi,Pn,eo,nd,rd,Pu]},mr={findFiberByHostInstance:nn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},F0={bundleType:mr.bundleType,version:mr.version,rendererPackageName:mr.rendererPackageName,rendererConfig:mr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ct.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=ld(e),e===null?null:e.stateNode},findFiberByHostInstance:mr.findFiberByHostInstance||A0,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Fi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Fi.isDisabled&&Fi.supportsFiber)try{qs=Fi.inject(F0),at=Fi}catch{}}He.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j0;He.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Hu(t))throw Error(C(200));return z0(e,t,null,n)};He.createRoot=function(e,t){if(!Hu(e))throw Error(C(299));var n=!1,r="",i=jp;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Tu(e,1,!1,null,null,n,!1,r,i),e[yt]=t.current,Gr(e.nodeType===8?e.parentNode:e),new Ou(t)};He.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(C(188)):(e=Object.keys(e).join(","),Error(C(268,e)));return e=ld(t),e=e===null?null:e.stateNode,e};He.flushSync=function(e){return pn(e)};He.hydrate=function(e,t,n){if(!uo(t))throw Error(C(200));return co(null,e,t,!0,n)};He.hydrateRoot=function(e,t,n){if(!Hu(e))throw Error(C(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=jp;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=bp(t,null,e,1,n??null,i,!1,s,o),e[yt]=t.current,Gr(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new lo(t)};He.render=function(e,t,n){if(!uo(t))throw Error(C(200));return co(null,e,t,!1,n)};He.unmountComponentAtNode=function(e){if(!uo(e))throw Error(C(40));return e._reactRootContainer?(pn(function(){co(null,null,e,!1,function(){e._reactRootContainer=null,e[yt]=null})}),!0):!1};He.unstable_batchedUpdates=Pu;He.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!uo(n))throw Error(C(200));if(e==null||e._reactInternals===void 0)throw Error(C(38));return co(e,t,n,!1,r)};He.version="18.3.1-next-f1338f8080-20240426";(function(e){function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(n){console.error(n)}}t(),e.exports=He})(Ul);var Rf=Ul.exports;Ia.createRoot=Rf.createRoot,Ia.hydrateRoot=Rf.hydrateRoot;const U0="_container_z34fi_37",V0="_header_z34fi_47",B0="_main_z34fi_54",W0="_laser_z34fi_62",Zo={container:U0,header:V0,main:B0,laser:W0};var Fp=Object.defineProperty,G0=Object.getOwnPropertyDescriptor,K0=Object.getOwnPropertyNames,Q0=Object.prototype.hasOwnProperty,J0=(e,t)=>{for(var n in t)Fp(e,n,{get:t[n],enumerable:!0})},Tf=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of K0(t))!Q0.call(e,i)&&i!==n&&Fp(e,i,{get:()=>t[i],enumerable:!(r=G0(t,i))||r.enumerable});return e},q0=(e,t,n)=>(Tf(e,t,"default"),n&&Tf(n,t,"default"));function Y0(e){const[t,n]=ee.exports.useState([]);return ee.exports.useEffect(()=>{if(!e)return;const r=e.subscribeToPresence(i=>{n(i)});return()=>{r(),n([])}},[e]),t}var ml=!1,vl=[];function X0(){const e=vl;vl=[],ml=!1,Ul.exports.unstable_batchedUpdates(()=>{for(const t of e)t()})}function zu(e,t,n,r=[]){const[i,s]=ee.exports.useState(void 0);return ee.exports.useEffect(()=>{if(!e)return;const o=e.subscribe(t,{onData:a=>{vl.push(()=>s(a)),ml||(Promise.resolve().then(X0),ml=!0)}});return()=>{o(),s(void 0)}},[e,...r]),i===void 0?n:i}function di(e,t){return e===void 0?t:e(t)}function Up(e,t=void 0,n=console){return{put:(r,i)=>tw(e,t,r,i),init:(r,i)=>ew(e,t,r,i),update:(r,i)=>sw(e,t,r,i,n),delete:(r,i)=>ow(e,r,i),has:(r,i)=>nw(e,r,i),get:(r,i)=>rw(e,t,r,i),mustGet:(r,i)=>iw(e,t,r,i),list:(r,i)=>aw(e,t,r,i),listIDs:(r,i)=>lw(e,r,i)}}function nt(e,t){return`${e}/${t}`}function Z0(e,t){return t.substring(e.length+1)}async function ew(e,t,n,r){const i=di(t,r),s=nt(e,i.id);return await n.has(s)?!1:(await n.put(s,i),!0)}async function tw(e,t,n,r){const i=di(t,r);await n.put(nt(e,i.id),i)}function nw(e,t,n){return t.has(nt(e,n))}function rw(e,t,n,r){return Au(t,n,nt(e,r))}async function iw(e,t,n,r){const i=await Au(t,n,nt(e,r));if(i===void 0)throw new Error(`no such entity ${r}`);return i}async function sw(e,t,n,r,i){const{id:s}=r,o=nt(e,s),a=await Au(t,n,o);if(a===void 0){i.debug?.(`no such entity ${s}, skipping update`);return}const l={...a,...r},u=di(t,l);await n.put(o,u)}async function ow(e,t,n){await t.del(nt(e,n))}async function aw(e,t,n,r){const{startAtID:i,limit:s}=r??{},o=[];for await(const a of n.scan({prefix:nt(e,""),start:{key:nt(e,i??"")},limit:s}).values())o.push(di(t,a));return o}async function lw(e,t,n){const{startAtID:r,limit:i}=n??{},s=[];for await(const o of t.scan({prefix:nt(e,""),start:{key:nt(e,r??"")},limit:i}).keys())s.push(Z0(e,o));return s}async function Au(e,t,n){const r=await t.get(n);return r===void 0?r:di(e,r)}const Lf=e=>e[Math.floor(Math.random()*e.length)],{init:uw,get:cw,put:b_,update:j_}=Up("client-state");function fw(e,t){return uw(e,{id:e.clientID,...t})}const hw=["#2de2e6","#ff4365","#541388","#f6019d","#f9c80e"],dw=[["\u{1F436}","Puppy"],["\u{1F431}","Kitty"],["\u{1F42D}","Mouse"],["\u{1F439}","Hamster"],["\u{1F430}","Bunny"],["\u{1F98A}","Fox"],["\u{1F43B}","Bear"],["\u{1F43C}","Panda"],["\u{1F428}","Koala"],["\u{1F437}","Pig"],["\u{1F435}","Monkey"],["\u{1F981}","Lion"],["\u{1F42F}","Tiger"],["\u{1F42E}","Cow"],["\u{1F438}","Frog"],["\u{1F425}","Chicken"]];function pw(){const e=localStorage.getItem("userInfo");if(e)return JSON.parse(e);const[t,n]=Lf(dw),r={avatar:t,name:n,color:Lf(hw)};return localStorage.setItem("userInfo",JSON.stringify(r)),r}async function mw(e,t){if(!(await fo(e)).owner)return e.set("boardState",{boardInfo:{name:"Unnamed Board",owner:t,mode:"editing"}})}async function fo(e){return(await e.get("boardState"))?.boardInfo??{name:"Unnamed Board",owner:null,mode:"viewing"}}async function vw(e,{userId:t,name:n}){const r=await fo(e);if(r.owner===t)return e.set("boardState",{boardInfo:{...r,name:n}})}async function gw(e,t){const n=await fo(e);if(n.owner===t)return e.set("boardState",{boardInfo:{...n,mode:n.mode==="editing"?"voting":n.mode==="voting"?"viewing":"editing"}})}const{get:Vp,put:yw,update:gl,delete:ww,list:kw}=Up("retro-item");async function Sw(e,{id:t,value:n}){const r=await Vp(e,t);if(!!r)return gl(e,{...r,value:n})}async function Iw(e,t){return(await kw(e)).filter(r=>!!r&&r.column===t)}async function Ew(e,{id:t,userId:n}){const r=await Vp(e,t);if(!!r)return r.upvotes.includes(n)?gl(e,{...r,upvotes:r.upvotes.filter(i=>i!==n)}):gl(e,{...r,upvotes:[...r.upvotes,n]})}let Rr=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");function Hn(e,t){return e?{ok:!1,code:"join",left:e,right:t}:t}function Wn(e,t){return{ok:!1,code:"prepend",key:e,tree:t}}function Cw(e,t){const n=e.code;switch(n){case"invalid_type":return{code:n,path:t,expected:e.expected};case"invalid_literal":return{code:n,path:t,expected:e.expected};case"missing_value":return{code:n,path:t};case"invalid_length":return{code:n,path:t,minLength:e.minLength,maxLength:e.maxLength};case"unrecognized_keys":return{code:n,path:t,keys:e.keys};case"invalid_union":return{code:n,path:t,tree:e.tree};default:return{code:n,path:t,error:e.error}}}function bu(e,t=[],n=[]){for(;;)if(e.code==="join")bu(e.left,t.slice(),n),e=e.right;else if(e.code==="prepend")t.push(e.key),e=e.tree;else return e.code==="custom_error"&&typeof e.error=="object"&&e.error.path!==void 0&&t.push(...e.error.path),n.push(Cw(e,t)),n}function ea(e,t){return e.length===0?"nothing":e.length===1?e[0]:`${e.slice(0,-1).join(", ")} ${t} ${e[e.length-1]}`}function Of(e){return typeof e=="bigint"?`${e}n`:JSON.stringify(e)}function Bp(e){let t=0;for(;;)if(e.code==="join")t+=Bp(e.left),e=e.right;else if(e.code==="prepend")e=e.tree;else return t+1}function Wp(e){let t="",n=0;for(;;)if(e.code==="join")n+=Bp(e.right),e=e.left;else if(e.code==="prepend")t+="."+e.key,e=e.tree;else break;let r="validation failed";if(e.code==="invalid_type")r=`expected ${ea(e.expected,"or")}`;else if(e.code==="invalid_literal")r=`expected ${ea(e.expected.map(Of),"or")}`;else if(e.code==="missing_value")r="missing value";else if(e.code==="unrecognized_keys"){const s=e.keys;r=`unrecognized ${s.length===1?"key":"keys"} ${ea(s.map(Of),"and")}`}else if(e.code==="invalid_length"){const s=e.minLength,o=e.maxLength;r="expected an array with ",s>0?o===s?r+=`${s}`:o<1/0?r+=`between ${s} and ${o}`:r+=`at least ${s}`:r+=`at most ${o}`,r+=" item(s)"}else if(e.code==="custom_error"){const s=e.error;typeof s=="string"?r=s:s!==void 0&&(s.message!==void 0&&(r=s.message),s.path!==void 0&&(t+="."+s.path.join(".")))}let i=`${e.code} at .${t.slice(1)} (${r})`;return n===1?i+=" (+ 1 other issue)":n>1&&(i+=` (+ ${n} other issues)`),i}class ju extends Error{constructor(t){super(Wp(t)),this.issueTree=t,Object.setPrototypeOf(this,new.target.prototype),this.name=new.target.name,this._issues=void 0}get issues(){return this._issues===void 0&&(this._issues=bu(this.issueTree)),this._issues}}class Gp{constructor(t){this.issueTree=t,this.ok=!1,this._issues=void 0,this._message=void 0}get issues(){return this._issues===void 0&&(this._issues=bu(this.issueTree)),this._issues}get message(){return this._message===void 0&&(this._message=Wp(this.issueTree)),this._message}throw(){throw new ju(this.issueTree)}}function pi(e){return{ok:!0,value:e}}function Fu(e){return new Gp({ok:!1,code:"custom_error",error:e})}function yl(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)}const ti=1,ni=2,Gn=4;class Kp{optional(){return new _w(this)}default(t){const n=pi(t);return new zn(this.optional(),r=>r===void 0?n:void 0)}assert(t,n){const r={ok:!1,code:"custom_error",error:n};return new zn(this,(i,s)=>t(i,s)?void 0:r)}map(t){return new zn(this,(n,r)=>({ok:!0,value:t(n,r)}))}chain(t){return new zn(this,(n,r)=>{const i=t(n,r);return i.ok?i:i.issueTree})}}class Ce extends Kp{nullable(){return new xw(this)}toTerminals(t){t(this)}try(t,n){let r=ti;n?.mode==="passthrough"?r=0:n?.mode==="strip"&&(r=ni);const i=this.func(t,r);return i===void 0?{ok:!0,value:t}:i.ok?{ok:!0,value:i.value}:new Gp(i)}parse(t,n){let r=ti;n?.mode==="passthrough"?r=0:n?.mode==="strip"&&(r=ni);const i=this.func(t,r);if(i===void 0)return t;if(i.ok)return i.value;throw new ju(i)}}class xw extends Ce{constructor(t){super(),this.type=t,this.name="nullable"}func(t,n){return t===null?void 0:this.type.func(t,n)}toTerminals(t){t(em),this.type.toTerminals(t)}nullable(){return this}}class _w extends Kp{constructor(t){super(),this.type=t,this.name="optional"}func(t,n){return t===void 0||n&Gn?void 0:this.type.func(t,n)}toTerminals(t){t(this),t(Zp),this.type.toTerminals(t)}optional(){return this}}function Qp(e,t){if(typeof e!="number"){const n=t>>5;for(let r=e.length;r<=n;r++)e.push(0);return e[n]|=1<<t%32,e}else return t<32?e|1<<t:Qp([e,0],t)}function vr(e,t){return typeof e=="number"?t<32?e>>>t&1:0:e[t>>5]>>>t%32&1}class dt extends Ce{constructor(t,n,r){super(),this.shape=t,this.restType=n,this.checks=r,this.name="object"}check(t,n){var r;const i={ok:!1,code:"custom_error",error:n};return new dt(this.shape,this.restType,[...(r=this.checks)!==null&&r!==void 0?r:[],{func:t,issue:i}])}func(t,n){let r=this._func;return r===void 0&&(r=Dw(this.shape,this.restType,this.checks),this._func=r),r(t,n)}rest(t){return new dt(this.shape,t)}extend(t){return new dt(Object.assign(Object.assign({},this.shape),t),this.restType)}pick(...t){const n={};return t.forEach(r=>{n[r]=this.shape[r]}),new dt(n,void 0)}omit(...t){const n=Object.assign({},this.shape);return t.forEach(r=>{delete n[r]}),new dt(n,this.restType)}partial(){var t;const n={};Object.keys(this.shape).forEach(i=>{n[i]=this.shape[i].optional()});const r=(t=this.restType)===null||t===void 0?void 0:t.optional();return new dt(n,r)}}function Dw(e,t,n){const r=[],i=[];for(const v in e){let y=!1;e[v].toTerminals(g=>{y||(y=g.name==="optional")}),y?i.push(v):r.push(v)}const s=[...r,...i],o=s.length,a={ok:!1,code:"invalid_type",expected:["object"]};if(o===0&&t?.name==="unknown")return function(v,y){if(!yl(v))return a;if(n!==void 0){for(let g=0;g<n.length;g++)if(!n[g].func(v))return n[g].issue}};const l=s.map(v=>e[v]),u=r.length,c=Object.create(null);s.forEach((v,y)=>{c[v]=~y});const d=r.map(v=>Wn(v,{ok:!1,code:"missing_value"}));function f(v,y,g){y==="__proto__"?Object.defineProperty(v,y,{value:g,writable:!0,enumerable:!0,configurable:!0}):v[y]=g}return function(v,y){if(!yl(v))return a;let g=!1,I=v,h,p,m=0,w=0;if(y&ti||y&ni||t!==void 0)for(const k in v){const S=v[k],E=~c[k];let _;if(E>=0)w++,m=Qp(m,E),_=l[E].func(S,y);else if(t!==void 0)_=t.func(S,y);else{if(y&ti)p===void 0?p=[k]:p.push(k);else if(y&ni&&h===void 0&&!g){I={},g=!0;for(let M=0;M<o;M++)if(vr(m,M)){const D=s[M];f(I,D,v[D])}}continue}if(_===void 0)g&&h===void 0&&f(I,k,S);else if(!_.ok)h=Hn(h,Wn(k,_));else if(h===void 0){if(!g)if(I={},g=!0,t===void 0){for(let M=0;M<o;M++)if(M!==E&&vr(m,M)){const D=s[M];f(I,D,v[D])}}else for(const M in v)f(I,M,v[M]);f(I,k,_.value)}}if(w<o)for(let k=0;k<o;k++){if(vr(m,k))continue;const S=s[k],E=v[S];let _=y&~Gn;if(E===void 0&&!(S in v)){if(k<u){h=Hn(h,d[k]);continue}_|=Gn}const M=l[k].func(E,_);if(M===void 0)g&&h===void 0&&!(_&Gn)&&f(I,S,E);else if(!M.ok)h=Hn(h,Wn(S,M));else if(h===void 0){if(!g)if(I={},g=!0,t===void 0){for(let D=0;D<o;D++)if(D<k||vr(m,D)){const Q=s[D];f(I,Q,v[Q])}}else{for(const D in v)f(I,D,v[D]);for(let D=0;D<k;D++)if(!vr(m,D)){const Q=s[D];f(I,Q,v[Q])}}f(I,S,M.value)}}if(p!==void 0&&(h=Hn(h,{ok:!1,code:"unrecognized_keys",keys:p})),h===void 0&&n!==void 0){for(let k=0;k<n.length;k++)if(!n[k].func(I))return n[k].issue}return h===void 0&&g?{ok:!0,value:I}:h}}class Jp extends Ce{constructor(t,n){super(),this.head=t,this.name="array",this.rest=n??Yp(),this.minLength=this.head.length,this.maxLength=n?1/0:this.minLength,this.invalidType={ok:!1,code:"invalid_type",expected:["array"]},this.invalidLength={ok:!1,code:"invalid_length",minLength:this.minLength,maxLength:this.maxLength}}func(t,n){if(!Array.isArray(t))return this.invalidType;const r=t.length,i=this.minLength,s=this.maxLength;if(r<i||r>s)return this.invalidLength;let o,a=t;for(let l=0;l<t.length;l++){const c=(l<i?this.head[l]:this.rest).func(t[l],n);c!==void 0&&(c.ok?(a===t&&(a=t.slice()),a[l]=c.value):o=Hn(o,Wn(l,c)))}return o||(t===a?void 0:{ok:!0,value:a})}}function bs(e){const t=typeof e;return t!=="object"?t:e===null?"null":Array.isArray(e)?"array":t}function gr(e){return Array.from(new Set(e))}function Mw(e){const t=new Map;e.forEach(r=>{for(const i in r)t.set(i,(t.get(i)||0)+1)});const n=[];return t.forEach((r,i)=>{r===e.length&&n.push(i)}),n}function qp(e){const t=new Map,n=new Map,r=new Map,i=[],s=[],o=[];e.forEach(({root:l,terminal:u})=>{var c;if(t.set(l,(c=t.get(l))!==null&&c!==void 0?c:t.size),u.name!=="never")if(u.name==="optional")s.push(l);else if(u.name==="unknown")i.push(l);else if(u.name==="literal"){const d=n.get(u.value)||[];d.push(l),n.set(u.value,d),o.push(bs(u.value))}else{const d=r.get(u.name)||[];d.push(l),r.set(u.name,d),o.push(u.name)}}),n.forEach((l,u)=>{const c=r.get(bs(u));c&&(c.push(...l),n.delete(u))});const a=(l,u)=>{var c,d;return((c=t.get(l))!==null&&c!==void 0?c:0)-((d=t.get(u))!==null&&d!==void 0?d:0)};return r.forEach((l,u)=>r.set(u,gr(l.concat(i).sort(a)))),n.forEach((l,u)=>n.set(u,gr(l.concat(i)).sort(a))),{types:r,literals:n,unknowns:gr(i).sort(a),optionals:gr(s).sort(a),expectedTypes:gr(o)}}function Pw(e,t){const n=[];for(const{root:f,terminal:v}of e)v.shape[t].toTerminals(y=>n.push({root:f,terminal:y}));const{types:r,literals:i,optionals:s,unknowns:o,expectedTypes:a}=qp(n);if(o.length>0||s.length>1)return;for(const f of i.values())if(f.length>1)return;for(const f of r.values())if(f.length>1)return;const l=Wn(t,{ok:!1,code:"missing_value"}),u=Wn(t,r.size===0?{ok:!1,code:"invalid_literal",expected:Array.from(i.keys())}:{ok:!1,code:"invalid_type",expected:a}),c=i.size>0?new Map:void 0;for(const[f,v]of i)c.set(f,v[0]);const d=r.size>0?{}:void 0;for(const[f,v]of r)d[f]=v[0];return function(f,v){var y;const g=f,I=g[t];if(I===void 0&&!(t in g))return s.length>0?s[0].func(g,v):l;const h=(y=d?.[bs(I)])!==null&&y!==void 0?y:c?.get(I);return h?h.func(g,v):u}}function $w(e){if(e.some(({terminal:r})=>r.name==="unknown"))return;const t=e.filter(r=>r.terminal.name==="object");if(t.length<2)return;const n=t.map(({terminal:r})=>r.shape);for(const r of Mw(n)){const i=Pw(t,r);if(i)return i}}function Nw(e){const{expectedTypes:t,literals:n,types:r,unknowns:i,optionals:s}=qp(e),o=r.size===0&&i.length===0?{ok:!1,code:"invalid_literal",expected:Array.from(n.keys())}:{ok:!1,code:"invalid_type",expected:t},a=n.size>0?n:void 0,l=r.size>0?{}:void 0;for(const[u,c]of r)l[u]=c;return function(u,c){var d,f;let v;if(c&Gn?v=s:v=(f=(d=l?.[bs(u)])!==null&&d!==void 0?d:a?.get(u))!==null&&f!==void 0?f:i,!v)return o;let y=0,g=o;for(let I=0;I<v.length;I++){const h=v[I].func(u,c);if(h===void 0||h.ok)return h;g=y>0?Hn(g,h):h,y++}return y>1?{ok:!1,code:"invalid_union",tree:g}:g}}class Rw extends Ce{constructor(t){super(),this.options=t,this.name="union"}toTerminals(t){this.options.forEach(n=>n.toTerminals(t))}func(t,n){let r=this._func;if(r===void 0){const i=[];this.options.forEach(a=>a.toTerminals(l=>{i.push({root:a,terminal:l})}));const s=Nw(i),o=$w(i);o?r=function(a,l){return yl(a)?o(a,l):s(a,l)}:r=s,this._func=r}return r(t,n)}}const Tw=Object.freeze({mode:"strict"}),Lw=Object.freeze({mode:"strip"}),Ow=Object.freeze({mode:"passthrough"});class zn extends Ce{constructor(t,n){super(),this.transformed=t,this.transform=n,this.name="transform",this.undef=pi(void 0),this.transformChain=void 0,this.transformRoot=void 0}func(t,n){let r=this.transformChain;if(!r){r=[];let a=this;for(;a instanceof zn;)r.push(a.transform),a=a.transformed;r.reverse(),this.transformChain=r,this.transformRoot=a}let i=this.transformRoot.func(t,n);if(i!==void 0&&!i.ok)return i;let s;i!==void 0?s=i.value:n&Gn?(s=void 0,i=this.undef):s=t;const o=n&ti?Tw:n&ni?Lw:Ow;for(let a=0;a<r.length;a++){const l=r[a](s,o);if(l!==void 0){if(!l.ok)return l;s=l.value,i=l}}return i}toTerminals(t){this.transformed.toTerminals(t)}}class Hw extends Ce{constructor(t){super(),this.definer=t,this.name="lazy",this.recursing=!1}func(t,n){return this.type||(this.type=this.definer()),this.type.func(t,n)}toTerminals(t){if(!this.recursing)try{this.recursing=!0,this.type||(this.type=this.definer()),this.type.toTerminals(t)}finally{this.recursing=!1}}}class zw extends Ce{constructor(){super(...arguments),this.name="never",this.issue={ok:!1,code:"invalid_type",expected:[]}}func(t,n){return this.issue}}const Aw=new zw;function Yp(){return Aw}class bw extends Ce{constructor(){super(...arguments),this.name="unknown"}func(t,n){}}const jw=new bw;function Xp(){return jw}class Fw extends Ce{constructor(){super(...arguments),this.name="undefined",this.issue={ok:!1,code:"invalid_type",expected:["undefined"]}}func(t,n){return t===void 0?void 0:this.issue}}const Zp=new Fw;function Uw(){return Zp}class Vw extends Ce{constructor(){super(...arguments),this.name="null",this.issue={ok:!1,code:"invalid_type",expected:["null"]}}func(t,n){return t===null?void 0:this.issue}}const em=new Vw;function Bw(){return em}class Ww extends Ce{constructor(){super(...arguments),this.name="number",this.issue={ok:!1,code:"invalid_type",expected:["number"]}}func(t,n){return typeof t=="number"?void 0:this.issue}}const Gw=new Ww;function Kw(){return Gw}class Qw extends Ce{constructor(){super(...arguments),this.name="bigint",this.issue={ok:!1,code:"invalid_type",expected:["bigint"]}}func(t,n){return typeof t=="bigint"?void 0:this.issue}}const Jw=new Qw;function qw(){return Jw}class Yw extends Ce{constructor(){super(...arguments),this.name="string",this.issue={ok:!1,code:"invalid_type",expected:["string"]}}func(t,n){return typeof t=="string"?void 0:this.issue}}const Xw=new Yw;function Zw(){return Xw}class e1 extends Ce{constructor(){super(...arguments),this.name="boolean",this.issue={ok:!1,code:"invalid_type",expected:["boolean"]}}func(t,n){return typeof t=="boolean"?void 0:this.issue}}const t1=new e1;function n1(){return t1}class r1 extends Ce{constructor(t){super(),this.value=t,this.name="literal",this.issue={ok:!1,code:"invalid_literal",expected:[t]}}func(t,n){return t===this.value?void 0:this.issue}}function i1(e){return new r1(e)}function Uu(e){return new dt(e,void 0)}function Vu(e){return new dt({},e??Xp())}function Bu(e){return new Jp([],e)}function s1(e){return new Jp(e)}function o1(...e){return new Rw(e)}function a1(e){return new Hw(e)}const tm=Object.freeze(Object.defineProperty({__proto__:null,ValitaError:ju,never:Yp,unknown:Xp,number:Kw,bigint:qw,string:Zw,boolean:n1,object:Uu,record:Vu,array:Bu,tuple:s1,literal:i1,union:o1,null:Bw,undefined:Uw,lazy:a1,ok:pi,err:Fu},Symbol.toStringTag,{value:"Module"}));function z(){let e,t;return{promise:new Promise((r,i)=>{e=r,t=i}),resolve:e,reject:t}}class ho{_lockP=null;async lock(){const t=this._lockP,{promise:n,resolve:r}=z();return this._lockP=n,await t,r}withLock(t){return wl(this.lock(),t)}}class nm{_lock=new ho;_writeP=null;_readP=[];read(){return this._lock.withLock(async()=>{await this._writeP;const{promise:t,resolve:n}=z();return this._readP.push(t),n})}withRead(t){return wl(this.read(),t)}async write(){return await this._lock.withLock(async()=>{await this._writeP,await Promise.all(this._readP);const{promise:t,resolve:n}=z();return this._writeP=t,this._readP=[],n})}withWrite(t){return wl(this.write(),t)}}async function wl(e,t){const n=await e;try{return await t()}finally{n()}}var x={};J0(x,{assert:()=>c1,is:()=>u1,parse:()=>Tr,readonly:()=>f1,readonlyArray:()=>d1,readonlyObject:()=>h1,readonlyRecord:()=>p1,test:()=>Wu});q0(x,tm);function kl(e){switch(typeof e){case"string":case"number":case"boolean":return JSON.stringify(e);case"undefined":return"undefined";case"bigint":return e.toString()+"n";default:return e===null?"null":Array.isArray(e)?"array":typeof e}}function ta(e,t){if(!t?.length)return kl(e);let n=e;for(const r of t)n=n[r];return kl(n)}function na(e,t,n=r=>String(r)){if(t.length===1)return n(t[0]);const r=`${n(t[t.length-2])} ${e} ${n(t[t.length-1])}`;return t.length===2?r:`${t.slice(0,-2).map(n).join(", ")}, ${r}`}function l1(e,t){const n=e.issues[0],{path:r}=n,i=r?.length?` at ${r.join(".")}`:"";switch(n.code){case"invalid_type":return`Expected ${na("or",n.expected)}${i}. Got ${ta(t,r)}`;case"missing_value":{const s=r&&r.length>1?` at ${r.slice(0,-1).join(".")}`:"";return n.path?.length?`Missing property ${n.path.at(-1)}${s}`:`TODO Unknown missing property${s}`}case"invalid_literal":return`Expected literal value ${na("or",n.expected,kl)}${i} Got ${ta(t,r)}`;case"invalid_length":return`Expected array with length ${n.minLength===n.maxLength?n.minLength:`between ${n.minLength} and ${n.maxLength}`}${i}. Got array with length ${t.length}`;case"unrecognized_keys":return n.keys.length===1?`Unexpected property ${n.keys[0]}${i}`:`Unexpected properties ${na("and",n.keys)}${i}`;case"invalid_union":return`Invalid union value${i}`;case"custom_error":{const{error:s}=n;return`${s?typeof s=="string"?s:s.message??"unknown":"unknown"}${i}. Got ${ta(t,r)}`}}}function Tr(e,t,n){const r=Wu(e,t,n);if(!r.ok)throw new TypeError(r.error);return r.value}function u1(e,t,n){return Wu(e,t,n).ok}function c1(e,t,n){Tr(e,t,n)}function Wu(e,t,n){const r=t.try(e,n?{mode:n}:void 0);return r.ok?r:{ok:!1,error:l1(r,e)}}function f1(e){return e}function h1(e){return Uu(e)}function d1(e){return Bu(e)}function p1(e){return Vu(e)}function oe(e,t="Assertion failed"){if(!e)throw new Error(t)}var Gu=x.number(),js=x.union(Gu,x.null()),m1=x.object({wsid:x.string(),timestamp:x.number().optional()}),v1=x.tuple([x.literal("connected"),m1]),g1=x.union(x.literal("AuthInvalidated"),x.literal("ClientNotFound"),x.literal("InvalidConnectionRequest"),x.literal("InvalidConnectionRequestBaseCookie"),x.literal("InvalidConnectionRequestLastMutationID"),x.literal("InvalidMessage"),x.literal("InvalidPush"),x.literal("RoomClosed"),x.literal("RoomNotFound"),x.literal("Unauthorized"),x.literal("VersionNotSupported")),y1=x.tuple([x.literal("error"),g1,x.string()]),w1=Object.prototype.hasOwnProperty,k1=Object.hasOwn||((e,t)=>w1.call(e,t));function Ku(e,t){switch(typeof e){case"boolean":case"number":case"string":return!0;case"object":return e===null?!0:Array.isArray(e)?I1(e,t):S1(e,t)}return!1}function S1(e,t){for(const n in e)if(k1(e,n)){t.push(n);const r=e[n];if(r!==void 0&&!Ku(r,t))return!1;t.pop()}return!0}function I1(e,t){for(let n=0;n<e.length;n++){if(t.push(n),!Ku(e[n],t))return!1;t.pop()}return!0}var ra=[],rm=x.unknown().chain(e=>{const t=Ku(e,ra)?pi(e):Fu({message:"Not a JSON value",path:ra.slice()});return ra.length=0,t}),E1=x.object({op:x.literal("put"),key:x.string(),value:rm}),C1=x.object({op:x.literal("del"),key:x.string()}),x1=x.object({op:x.literal("clear")}),_1=x.union(E1,C1,x1),Hf=x.array(_1),D1=x.object({baseCookie:js,cookie:Gu,lastMutationIDChanges:x.record(x.number()),presence:Hf.optional(),patch:Hf,timestamp:x.number().optional(),debugOriginTimestamp:x.number().optional(),debugServerReceivedTimestamp:x.number().optional(),debugServerSentTimestamp:x.number().optional()}),M1=x.object({pokes:x.array(D1),requestID:x.string(),debugServerBufferMs:x.number().optional()}),P1=x.tuple([x.literal("poke"),M1]),$1=x.object({}),N1=x.tuple([x.literal("pong"),$1]),R1=x.object({clientGroupID:x.string(),cookie:js,requestID:x.string()}),T1=x.object({cookie:Gu,requestID:x.string(),lastMutationIDChanges:x.record(x.number())}),L1=x.tuple([x.literal("pull"),R1]),O1=x.tuple([x.literal("pull"),T1]),H1=x.union(v1,P1,O1,y1,N1);x.array(x.object({userID:x.string(),clientID:x.string()}));x.object({jurisdiction:x.literal("eu").optional()});var z1=x.object({}),A1=x.tuple([x.literal("ping"),z1]),b1=x.object({id:x.number(),clientID:x.string(),name:x.string(),args:rm,timestamp:x.number()}),j1=x.object({clientGroupID:x.string(),mutations:x.array(b1),pushVersion:x.number(),schemaVersion:x.string(),timestamp:x.number(),requestID:x.string()}),F1=x.tuple([x.literal("push"),j1]);x.union(A1,F1,L1);var U1=new URL("https://http-intake.logs.datadoghq.com/api/v2/logs"),V1=1e3,zf=250,B1=5*1024*1024,Af=2,bf=B1/4,W1=class{#e=[];#t;#n;#r;#i;#s;#o;#a;#u=0;#f=new ho;constructor(e){const{apiKey:t,source:n,service:r,host:i,version:s,interval:o=5e3,baseURL:a=U1}=e;this.#t=t,this.#n=n,this.#r=r,this.#i=i,this.#s=s,this.#o=o,this.#a=a.toString()}log(e,t,...n){this.#e.push(Y1(n,t,e)),e==="error"||this.#e.length===zf?this.flush():this.#c()}#c(){this.#u||(this.#u=setTimeout(()=>{this.#u=0,this.flush()},this.#o))}flush(){return this.#f.withLock(async()=>{const{length:e}=this.#e;if(e!==0){do{const t=Date.now(),n=[];let r=0;for(const a of this.#e){a.flushDelayMs=t-a.date;let l=JSON.stringify(a);if(l.length>bf&&(a.message=`[Dropped message of length ${l.length}]`,l=JSON.stringify(a)),l.length+r+n.length>bf||(r+=l.length,n.push(l),n.length===V1))break}const i=n.join(`
`),s=new URL(this.#a);this.#t!==void 0&&s.searchParams.set("dd-api-key",this.#t),this.#n&&(s.searchParams.set("ddsource",this.#n),s.searchParams.set("dd-evp-origin",this.#n)),this.#r&&s.searchParams.set("service",this.#r),this.#i&&s.searchParams.set("host",this.#i),this.#s&&s.searchParams.set("ddtags",`version:${this.#s}`);let o=!1;try{const a=await fetch(s.toString(),{method:"POST",body:i,keepalive:!0});o=a.ok,o||console.error("response",a.status,a.statusText,await a.text)}catch(a){console.error("Log flush to datadog failed",a)}if(o)this.#e.splice(0,n.length);else{let a=0;for(let l=0;l<n.length;l++){const u=this.#e[l];u.flushRetryCount=(u.flushRetryCount??0)+1,u.flushRetryCount>Af&&a++}a>0&&(console.error(`Dropping ${a} datadog log messages which failed to send ${Af+1} times.`),this.#e.splice(0,a))}}while(this.#e.length>=zf);this.#e.length&&this.#c()}})}};function im(e){return Array.isArray(e)&&e.length===1?im(e[0]):e}function jf(e){return{name:e.name,message:e.message,stack:e.stack}}function G1(e){if(e instanceof Error)return jf(e);if(e instanceof Array){const t=[];for(const n of e)n instanceof Error?t.push(jf(n)):t.push(n);return t}return e}var K1="flushRetryCount",Q1="flushDelayMs",J1="@DATADOG_RESERVED_",q1=["host","source","status","service","version","trace_id","message","msg","date",Q1,K1];function Y1(e,t,n){let r;if(t!==void 0)for(const s of q1)Object.hasOwn(t,s)&&(r===void 0&&(r={...t}),r[J1+s]=r[s],delete r[s]);const i={...r??t,date:Date.now(),message:G1(im(e)),status:n};return n==="error"&&(i.error={origin:"logger"}),i}var sm={closeBeacon:!0};Object.freeze(sm);var X1={...sm};function Ff(e){return X1[e]}var Z1="/api/sync/v1/close",ek=class{#e;#t;#n;#r;#i;#s=[];#o=0;#a=0;#u=-1;#f=!1;constructor(e){oe(e.minBufferSizeMs<=e.maxBufferSizeMs),oe(e.initialBufferSizeMs>=e.minBufferSizeMs),oe(e.initialBufferSizeMs<=e.maxBufferSizeMs),oe(e.adjustBufferSizeIntervalMs>0),this.#t=e.initialBufferSizeMs,this.#n=e.minBufferSizeMs,this.#r=e.maxBufferSizeMs,this.#i=e.adjustBufferSizeIntervalMs,this.#e=this.#t}get bufferSizeMs(){return this.#e}recordMissable(e,t,n,r){if(this.#f){this.#f=!1;return}if(r=r.withContext("BufferSizer"),this.#s.push(n),this.#o++,t&&this.#a++,this.#u===-1){this.#u=e;return}if(e-this.#u<this.#i||this.#o<200)return;this.#s.sort((l,u)=>l-u);const i=this.#s[Math.floor(this.#s.length*99.5/100)],s=this.#e;r.info?.("bufferSizeMs",s,"targetBufferNeededMs",i,"this._maxBufferNeededMs.length",this.#s.length,"percentile index",Math.floor(this.#s.length*99.5/100),this.#s);let o=s;const a=this.#a/this.#o;a>.01?(o=Math.min(this.#r,Math.max(s,i)),r.info?.("High miss percent",a,"over last",e-this.#u,"ms.")):a<.005&&(o=Math.max(this.#n,Math.min(s,i)),r.info?.("Low miss percent",a,"over last",e-this.#u,"ms.")),s!==o&&r.info?.("Adjusting buffer",o>s?"up":"down","from",s,"to",o),this.#s=[],this.#o=0,this.#a=0,this.#u=e,this.#e=o,this.#f=!0}reset(){this.#e=this.#t,this.#s=[],this.#o=0,this.#a=0,this.#u=-1,this.#f=!1}};class om{constructor(t){this._sinks=t}log(t,n,...r){for(const i of this._sinks)i.log(t,n,...r)}async flush(){await Promise.all(this._sinks.map(t=>t.flush?.()))}}class tk{constructor(t,n="info",r){this.debug=void 0,this.info=void 0,this.error=void 0;const i=s=>(...o)=>t.log(s,r,...o);switch(n){case"debug":this.debug=i("debug");case"info":this.info=i("info");case"error":this.error=i("error")}this.flush=()=>t.flush?.()??Promise.resolve()}}const ri={log(e,t,...n){console[e](...nk(t),...n.map(rk))}};class mi extends tk{constructor(t="info",n,r=ri){super(r,t,n),this._level=t,this._logSink=r,this._context=n}withContext(t,n){const r={...this._context,[t]:n};return new mi(this._level,r,this._logSink)}}function nk(e){const t=[];for(const[n,r]of Object.entries(e??{})){const i=r===void 0?n:`${n}=${r}`;t.push(i)}return t}function rk(e){switch(typeof e){case"string":case"number":case"boolean":case"undefined":case"symbol":case"bigint":return e;case"object":if(e===null)return null;break}return JSON.stringify(e,ik)}function ik(e,t){return t instanceof Error?{name:t.name,message:t.message,stack:t.stack,..."cause"in t?{cause:t.cause}:null}:t}var am=Object.defineProperty,sk=Object.getOwnPropertyDescriptor,ok=Object.getOwnPropertyNames,ak=Object.prototype.hasOwnProperty,lk=(e,t)=>{for(var n in t)am(e,n,{get:t[n],enumerable:!0})},Uf=(e,t,n,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of ok(t))!ak.call(e,i)&&i!==n&&am(e,i,{get:()=>t[i],enumerable:!(r=sk(t,i))||r.enumerable});return e},uk=(e,t,n)=>(Uf(e,t,"default"),n&&Uf(n,t,"default")),lm="1.0";parseInt(lm.split(".")[1],10);var um="/api/"+lm,ck=um+"/license/status",fk=um+"/license/active";function hk(e){Qu(e,"string")}function Vf(e){Qu(e,"boolean")}function Qu(e,t){typeof e!==t&&fm(e,t)}function cm(e){e===null&&fm(e,"object"),Qu(e,"object")}function dk(e,t){let n="Invalid type: ";return e==null?n+=e:n+=`${typeof e} \`${e}\``,n+`, expected ${t}`}function fm(e,t){throw new Error(dk(e,t))}new URL("https://replicache-license.herokuapp.com/");async function pk(e,t,n,r,i){i=i.withContext("licenseActive");let s=new URL(fk,t),o=JSON.stringify({licenseKey:n,profileID:r});i.debug?.(`Sending ${s}`,o);let a=await(await e("post",s.toString(),o,{"Content-Type":"application/json",Accept:"application/json"})).text();i.debug?.(`Got ${s}`,a);let l=JSON.parse(a);vk(l)}async function mk(e,t,n,r){r=r.withContext("getLicenseStatus");let i=new URL(ck,t),s=JSON.stringify({licenseKey:n});r.debug?.(`Sending ${i}`,s);let o=await(await e("post",i.toString(),s,{"Content-Type":"application/json",Accept:"application/json"})).text();r.debug?.(`Got ${i}`,o);let a=JSON.parse(o);return gk(a),a}function vk(e){cm(e)}function gk(e){cm(e),hk(e.status),Vf(e.disable),Vf(e.pleaseUpdate)}var Bf="This key only good for automated testing";new URL("http://localhost:8080/");var Wf=new URL("https://replicache-license.herokuapp.com/");new URL("https://replicache-license-staging.herokuapp.com/");function R(e,t="Assertion failed"){if(!e)throw new Error(t)}function G(e){po(e,"string")}function Se(e){po(e,"number")}function yk(e){po(e,"boolean")}function po(e,t){typeof e!==t&&Bt(e,t)}function ie(e){e===null&&Bt(e,"object"),po(e,"object")}function er(e){Array.isArray(e)||Bt(e,"array")}function wk(e,t){let n="Invalid type: ";return e==null?n+=e:n+=`${typeof e} \`${e}\``,n+`, expected ${t}`}function Bt(e,t){throw new Error(wk(e,t))}function kk(e){if(e===null)throw new Error("Expected non-null value")}function Ju(e){if(e===void 0)throw new Error("Expected non undefined value")}function hm(){throw new Error("Unreachable")}var Sk=Object.prototype.hasOwnProperty,Wt=Object.hasOwn||((e,t)=>Sk.call(e,t));function St(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;switch(typeof e){case"boolean":case"number":case"string":return!1}if(e=e,Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!St(e[i],t[i]))return!1;return!0}if(e===null||t===null||Array.isArray(t))return!1;e=e,t=t;let n=0;for(let i in e)if(Wt(e,i)){if(!St(e[i],t[i]))return!1;n++}let r=0;for(let i in t)Wt(t,i)&&r++;return n===r}function yn(e){{switch(typeof e){case"boolean":case"number":case"string":return;case"object":return e===null?void 0:Array.isArray(e)?Ek(e):dm(e)}Bt(e,"JSON value")}}function Ik(e){ie(e),dm(e)}function dm(e){for(let t in e)if(Wt(e,t)){let n=e[t];n!==void 0&&yn(n)}}function Ek(e){for(let t of e)yn(t)}function qu(e,t){switch(typeof e){case"boolean":case"number":case"string":return!0;case"object":return e===null?!0:Array.isArray(e)?xk(e,t):Ck(e,t)}return!1}function Ck(e,t){for(let n in e)if(Wt(e,n)){t.push(n);let r=e[n];if(r!==void 0&&!qu(r,t))return!1;t.pop()}return!0}function xk(e,t){for(let n=0;n<e.length;n++){if(t.push(n),!qu(e[n],t))return!1;t.pop()}return!0}async function pm(e,t,n,r){let i={headers:{"Content-type":"application/json",Authorization:t,"X-Replicache-RequestID":n},body:JSON.stringify(r),method:"POST"},s=new Request(e,i),o=await fetch(s),a=o.status;return a!==200?[void 0,{httpStatusCode:a,errorMessage:await o.text()}]:[o,{httpStatusCode:a,errorMessage:""}]}function _k(e,t){return e===t?0:e<t?-1:1}function Yu(e,t){if(e===t)return 0;if(e===null)return-1;if(t===null)return 1;let n=Gf(e),r=Gf(t);return typeof n=="string"||typeof r=="string"?_k(String(n),String(r)):n-r}function Gf(e){return typeof e=="string"||typeof e=="number"?e:e.order}function Dk(e){if(!(e===null||typeof e=="string"||typeof e=="number")&&(Ik(e),!(typeof e.order=="string"||typeof e.order=="number")))throw new Error("Invalid cookie")}function mm(e,t){return typeof e=="object"&&e!==null&&e.error===t}function vm(e){return typeof e.error=="string"}function Ze(e){return mm(e,"ClientStateNotFound")}function et(e){if(!mm(e,"VersionNotSupported"))return!1;let{versionType:t}=e;switch(t){case void 0:case"pull":case"push":case"schema":return!0}return!1}function Mk(e){R(et(e))}function Xu(e){ie(e),Se(e.httpStatusCode),G(e.errorMessage)}function gm(e){er(e);for(let t of e)Pk(t)}function Pk(e){switch(ie(e),e.op){case"put":G(e.key),yn(e.value);break;case"del":G(e.key);break;case"clear":break;default:throw new Error(`unknown patch op \`${e.op}\`, expected one of \`put\`, \`del\`, \`clear\``)}}function $k(e){async function t(n,r){let[i,s]=await pm(e.pullURL,e.auth,r,n);return i?{response:await i.json(),httpRequestInfo:s}:{httpRequestInfo:s}}return ym.add(t),t}var ym=new WeakSet;function Nk(e){return ym.has(e)}function Rk(e){if(ie(e),Ze(e)||et(e))return;let t=e;t.cookie!==void 0&&yn(t.cookie),Se(t.lastMutationID),gm(t.patch)}function Tk(e){if(ie(e),Ze(e)||et(e))return;let t=e;t.cookie!==void 0&&Dk(t.cookie),Lk(t.lastMutationIDChanges),gm(t.patch)}function Lk(e){ie(e);for(let[t,n]of Object.entries(e))G(t),Se(n)}function Ok(e){ie(e),Xu(e.httpRequestInfo),e.response!==void 0&&Tk(e.response)}function Hk(e){ie(e),Xu(e.httpRequestInfo),e.response!==void 0&&Rk(e.response)}var Fs=new WeakSet;function Oe(e){return Zu(e,[]),e}function Zu(e,t){switch(typeof e){case"undefined":throw new TypeError("Unexpected value undefined");case"boolean":case"number":case"string":return;case"object":{if(e===null||Fs.has(e))return;Fs.add(e),t.includes(e)&&Bt(e,"Cyclic JSON object"),t.push(e),Object.freeze(e),Array.isArray(e)?zk(e,t):Ak(e,t),t.pop();return}default:Bt(e,"JSON value")}}function zk(e,t){for(let n of e)Zu(n,t)}function Ak(e,t){for(let n in e)if(Wt(e,n)){let r=e[n];r!==void 0&&Zu(r,t)}}function wn(e){if(!Sl(e,[]))throw new Error("Expected frozen object")}function Sl(e,t){switch(typeof e){case"boolean":case"number":case"string":return!0;case"object":if(e===null||Fs.has(e))return!0;if(!Object.isFrozen(e))return!1;if(t.includes(e)&&Bt(e,"Cyclic JSON object"),t.push(e),Array.isArray(e)){for(let n of e)if(!Sl(n,t))return t.pop(),!1}else for(let n in e)if(Wt(e,n)){let r=e[n];if(r!==void 0&&!Sl(r,t))return t.pop(),!1}return Fs.add(e),t.pop(),!0;default:Bt(e,"JSON value")}}function wm(e){if(e!==void 0)return Oe(e)}var bk=Promise.resolve(!0),jk=Promise.resolve(!1);Promise.resolve(void 0);var It=Promise.resolve(),Lr=Symbol(),km=class{o=new Map;#e;constructor(e){this.#e=e}has(e){switch(this.o.get(e)){case void 0:return this.#e.has(e);case Lr:return jk;default:return bk}}async get(e){let t=this.o.get(e);switch(t){case Lr:return;case void 0:{let n=await this.#e.get(e);return wm(n)}default:return t}}put(e,t){return this.o.set(e,Oe(t)),It}del(e){return this.o.set(e,Lr),It}release(){this.#e.release()}get closed(){return this.#e.closed}},Fk={durability:"relaxed"},mo="chunks",Us=class{#e;#t=!1;#n=!1;constructor(e){this.#e=Wk(e)}read(){return this.#r(Bk)}write(){return this.#r(Vk)}async close(){this.#n||(await this.#e).close(),this.#t=!0}get closed(){return this.#t}async#r(e){let t=async r=>{let{promise:i,resolve:s,reject:o}=z(),a=indexedDB.open(r);a.onupgradeneeded=()=>{let u=a.transaction;kk(u),u.abort(),this.#n=!0,o(new Kf(`Replicache IndexedDB not found: ${r}`))},a.onsuccess=()=>s(a.result),a.onerror=()=>o(a.error);let l=await i;return l.onversionchange=()=>l.close(),l},n=await this.#e;try{return e(n)}catch(r){if(!this.#t&&r instanceof DOMException){if(r.name==="InvalidStateError"){this.#e=t(n.name);let i=await this.#e;return e(i)}else if(r.name==="NotFoundError")throw this.#n=!0,indexedDB.deleteDatabase(n.name),new Kf(`Replicache IndexedDB ${n.name} missing object store. Deleting db.`)}throw r}}},Sm=class{#e;#t=!1;constructor(e){this.#e=e}has(e){return new Promise((t,n)=>{let r=Il(this.#e).count(e);r.onsuccess=()=>t(r.result>0),r.onerror=()=>n(r.error)})}get(e){return new Promise((t,n)=>{let r=Il(this.#e).get(e);r.onsuccess=()=>t(wm(r.result)),r.onerror=()=>n(r.error)})}release(){this.#t=!0}get closed(){return this.#t}},Uk=class extends km{#e;#t=!1;constructor(e){super(new Sm(e)),this.#e=e}commit(){return this.o.size===0?It:new Promise((e,t)=>{let n=this.#e,r=Il(n);for(let[i,s]of this.o)s===Lr?r.delete(i):r.put(s,i);n.oncomplete=()=>e(),n.onerror=()=>t(n.error)})}release(){this.#t=!0}get closed(){return this.#t}};function Vk(e){let t=e.transaction(mo,"readwrite",Fk);return new Uk(t)}function Bk(e){let t=e.transaction(mo,"readonly");return new Sm(t)}function Il(e){return e.objectStore(mo)}function Wk(e){return new Promise((t,n)=>{let r=indexedDB.open(e);r.onupgradeneeded=()=>{r.result.createObjectStore(mo)},r.onsuccess=()=>{let i=r.result;i.onversionchange=()=>i.close(),t(i)},r.onerror=()=>n(r.error)})}var Kf=class extends Error{name="IDBNotFoundError"},Im=class{#e;#t;#n=!1;constructor(e,t){this.#e=e,this.#t=t}release(){this.#t(),this.#n=!0}get closed(){return this.#n}has(e){return Promise.resolve(this.#e.has(e))}get(e){return Promise.resolve(this.#e.get(e))}},Gk=class extends km{#e;constructor(e,t){super(new Im(e,t)),this.#e=e}commit(){return this.o.forEach((e,t)=>{e===Lr?this.#e.delete(t):this.#e.set(t,e)}),this.o.clear(),this.release(),It}},Qf=new Map,Em=class{#e;#t;#n=!1;constructor(e){let t=Qf.get(e),n,r;t?{lock:n,map:r}=t:(n=new nm,r=new Map,Qf.set(e,{lock:n,map:r})),this.#t=n,this.#e=r}async read(){let e=await this.#t.read();return new Im(this.#e,e)}async write(){let e=await this.#t.write();return new Gk(this.#e,e)}close(){return this.#n=!0,It}get closed(){return this.#n}},tr=class extends Error{name="AbortError"},Kk=Promise.resolve();new Promise(()=>{});function ii(e,t){return e===0?Kk:new Promise((n,r)=>{let i=setTimeout(()=>{n()},e);t&&t.addEventListener("abort",()=>{clearTimeout(i),r(new tr("Aborted"))})})}function vi(e,t,n,r,i){Qk(e,t,n,r,i)}async function Qk(e,t,n,r,i){if(!i.aborted){for(r=r.withContext("bgIntervalProcess",e),r.debug?.("Starting");!i.aborted;){try{await ii(n(),i)}catch(s){if(!(s instanceof tr))throw s}if(!i.aborted){r.debug?.("Running");try{await t()}catch(s){i.aborted?r.debug?.("Error running most likely due to close.",s):r.error?.("Error running.",s)}}}r.debug?.("Stopping")}}var H={};lk(H,{assert:()=>ar,is:()=>qk,parse:()=>Cm,readonly:()=>Yk,readonlyArray:()=>tc,readonlyObject:()=>qt,readonlyRecord:()=>nc,test:()=>ec});uk(H,tm);function El(e){switch(typeof e){case"string":case"number":case"boolean":return JSON.stringify(e);case"undefined":return"undefined";case"bigint":return e.toString()+"n";default:return e===null?"null":Array.isArray(e)?"array":typeof e}}function ia(e,t){if(!t?.length)return El(e);let n=e;for(let r of t)n=n[r];return El(n)}function sa(e,t,n=r=>String(r)){if(t.length===1)return n(t[0]);let r=`${n(t[t.length-2])} ${e} ${n(t[t.length-1])}`;return t.length===2?r:`${t.slice(0,-2).map(n).join(", ")}, ${r}`}function Jk(e,t){let n=e.issues[0],{path:r}=n,i=r?.length?` at ${r.join(".")}`:"";switch(n.code){case"invalid_type":return`Expected ${sa("or",n.expected)}${i}. Got ${ia(t,r)}`;case"missing_value":{let s=r&&r.length>1?` at ${r.slice(0,-1).join(".")}`:"";return n.path?.length?`Missing property ${n.path.at(-1)}${s}`:`TODO Unknown missing property${s}`}case"invalid_literal":return`Expected literal value ${sa("or",n.expected,El)}${i} Got ${ia(t,r)}`;case"invalid_length":return`Expected array with length ${n.minLength===n.maxLength?n.minLength:`between ${n.minLength} and ${n.maxLength}`}${i}. Got array with length ${t.length}`;case"unrecognized_keys":return n.keys.length===1?`Unexpected property ${n.keys[0]}${i}`:`Unexpected properties ${sa("and",n.keys)}${i}`;case"invalid_union":return`Invalid union value${i}`;case"custom_error":{let{error:s}=n;return`${s?typeof s=="string"?s:s.message??"unknown":"unknown"}${i}. Got ${ia(t,r)}`}}}function Cm(e,t,n){let r=ec(e,t,n);if(!r.ok)throw new TypeError(r.error);return r.value}function qk(e,t,n){return ec(e,t,n).ok}function ar(e,t,n){Cm(e,t,n)}function ec(e,t,n){let r=t.try(e,n?{mode:n}:void 0);return r.ok?r:{ok:!1,error:Jk(r,e)}}function Yk(e){return e}function qt(e){return Uu(e)}function tc(e){return Bu(e)}function nc(e){return Vu(e)}var vo=typeof crypto<"u"&&typeof crypto.randomUUID<"u"?Zk:Xk;function Xk(){return tS(Uint8Array.from({length:36},()=>Math.random()*256))}function Zk(){return crypto.randomUUID()}var eS=[0,0,0,0,0,0,0,0,2,0,0,0,0,2,3,0,0,0,2,1,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0];function tS(e){return eS.map((t,n)=>{switch(t){case 0:return(e[n]&15).toString(16);case 1:return((e[n]&3)+8).toString(16);case 3:return"4";case 2:return"-"}}).join("")}var nS=/^[0-9a-v-]+$/,rS="00000000-0000-4000-8000-000000000000",ve=rS,qe=iS("",vo);function iS(e,t){let n,r=0;return()=>{n||(n=sS(e,t()));let i=String(r++);return oS(n,i)}}function sS(e,t){return e+t.replaceAll("-","").slice(e.length)}function oS(e,t){return R(t.length<=12),e+t.padStart(12,"0")}function aS(e){return typeof e=="string"&&nS.test(e)}function Et(e){ar(e,mn)}var mn=H.string().assert(aS,"Invalid hash"),xm=class{hash;data;meta;constructor(e,t,n){R(!n.includes(e),"Chunk cannot reference itself"),wn(t),this.hash=e,this.data=t,this.meta=n}};function _m(e){if(!Array.isArray(e))throw new Error("Meta must be an array");for(let t of e)G(t)}function Dm(e,t,n){let r=n();return new xm(r,e,t)}function Mm(){throw new Error("unexpected call to compute chunk hash")}function Pm(e,t,n){return new lS(e,t,n).compute()}var lS=class{#e;#t;#n;#r;#i;#s;#o;#a;constructor(e,t,n){let r=[],i=[];for(let s of e)s.old!==s.new&&(s.old&&i.push(s.old),s.new&&r.push(s.new));this.#e=r,this.#t=i,this.#n=t,this.#r=n,this.#s=new Map,this.#o=new Map,this.#a=n.areRefsCounted!==void 0,this.#i=this.#a?new Set:null}async compute(){for(let e of this.#e)await this.#u(e,1);if(await Promise.all(Array.from(this.#n.values(),e=>this.#c(e))),this.#a){R(this.#r.areRefsCounted),R(this.#i);let e;do{e=!1;for(let t of this.#n.values())if(!this.#r.areRefsCounted(t)&&!this.#i.has(t)&&this.#s.get(t)!==0){await this.#f(t,1),e=!0;break}}while(e)}for(let e of this.#t)await this.#u(e,-1);for(let[e,t]of this.#s)R(t>=0,`ref count update must be non-negative. ${e}:${t}`);return this.#s}async#u(e,t){await this.#c(e),this.#p(e,t)&&await this.#f(e,t)}async#f(e,t){if(e===ve)return;let n=await this.#r.getRefs(e);if(R(n||this.#a&&!this.#n.has(e),"refs must be defined"),n!==void 0){this.#i?.add(e);let r=n.map(i=>this.#u(i,t));await Promise.all(r)}}#c(e){let t=this.#o.get(e);return t===void 0&&(t=(async()=>{let n=await this.#r.getRefCount(e)||0;return this.#s.set(e,n),n})(),this.#o.set(e,t)),t}#p(e,t){let n=this.#s.get(e);return Se(n),this.#s.set(e,n+t),n===0&&t===1||n===1&&t===-1}};function Vs(e){return`c/${e}/d`}function os(e){return`c/${e}/m`}function oa(e){return`c/${e}/r`}function $m(e){return`h/${e}`}var Nm=class extends Error{name="ChunkNotFoundError";hash;constructor(e){super(`Chunk not found ${e}`),this.hash=e}};async function Rm(e,t){let n=await e.getChunk(t);if(n)return n;throw new Nm(t)}async function rc(e,t){let n=await t.getHead(e);return R(n,`Missing head ${e}`),n}var ic=class{#e;#t;#n;constructor(e,t,n){this.#e=e,this.#t=t,this.#n=n}async read(){return new Tm(await this.#e.read(),this.#n)}async write(){return new uS(await this.#e.write(),this.#t,this.#n)}close(){return this.#e.close()}},Tm=class{e;assertValidHash;constructor(e,t){this.e=e,this.assertValidHash=t}hasChunk(e){return this.e.has(Vs(e))}async getChunk(e){let t=await this.e.get(Vs(e));if(t===void 0)return;let n=await this.e.get(os(e)),r;return n!==void 0?(_m(n),r=n):r=[],new xm(e,t,r)}mustGetChunk(e){return Rm(this,e)}async getHead(e){let t=await this.e.get($m(e));if(t!==void 0)return Et(t),t}release(){this.e.release()}get closed(){return this.e.closed}},uS=class extends Tm{#e;#t=new Set;#n=new Map;constructor(e,t,n){super(e,n),this.#e=t}createChunk=(e,t)=>Dm(e,t,this.#e);get kvWrite(){return this.e}async putChunk(e){let{hash:t,data:n,meta:r}=e;this.assertValidHash(t);let i=Vs(t),s=this.e.put(i,n),o;if(r.length>0){for(let a of r)this.assertValidHash(a);o=this.e.put(os(t),r)}this.#t.add(t),await s,await o}setHead(e,t){return this.#r(e,t)}removeHead(e){return this.#r(e,void 0)}async#r(e,t){let n=await this.getHead(e),r=$m(e),i;t===void 0?i=this.e.del(r):i=this.e.put(r,t);let s=this.#n.get(e);s===void 0?this.#n.set(e,{new:t,old:n}):s.new=t,await i}async commit(){let e=await Pm(this.#n.values(),this.#t,this);await this.#i(e),await this.e.commit()}async getRefCount(e){let t=await this.e.get(oa(e));if(t!==void 0){if(Se(t),t<0||t>65535||t!==(t|0))throw new Error(`Invalid ref count ${t}. We expect the value to be a Uint16`);return t}}async getRefs(e){let t=await this.e.get(os(e));return t===void 0?[]:(_m(t),t)}async#i(e){let t=[];for(let[n,r]of e)if(r===0)t.push(this.#s(n));else{let i=oa(n);t.push(this.e.put(i,r))}await Promise.all(t)}async#s(e){await Promise.all([this.e.del(Vs(e)),this.e.del(os(e)),this.e.del(oa(e))]),this.#t.delete(e)}release(){this.e.release()}};function Lm(e){if(e!==(e|0)||e<4||e>7)throw new Error(`Unsupported format version: ${e}`);return e}var cS=class{#e;#t;#n;constructor(e,t){this.#e=e,this.#t=t,this.#n=new Us(t)}read(){return this.#r(e=>e.read())}write(){return this.#r(e=>e.write())}async#r(e){try{return await e(this.#n)}catch(t){if(fS(t))return this.#n instanceof Us&&(this.#e.info?.("Switching to MemStore because of Firefox private browsing error"),this.#n=new Em(this.#t)),e(this.#n);throw t}}close(){return this.#n.close()}get closed(){return this.#n.closed}};function fS(e){return Om()&&e instanceof DOMException&&e.name==="InvalidStateError"&&e.message==="A mutation operation was attempted on a database that did not allow mutations."}function Om(){return navigator.userAgent.includes("Firefox")}function Hm(e,t){return Om()?new cS(e,t):new Us(t)}function hS(e){return new Promise((t,n)=>{let r=indexedDB.deleteDatabase(e);r.onsuccess=()=>t(),r.onerror=()=>n(r.error)})}function ge(e,t){return sc(e.read(),t)}function nr(e,t){return sc(e.write(),t)}function ne(e,t){return sc(e.write(),async n=>{let r=await t(n);return await n.commit(),r})}async function sc(e,t){let n=await e;try{return await t(n)}finally{n.release()}}var dS=qt({prefix:H.string().optional(),jsonPointer:H.string(),allowEmpty:H.boolean().optional()}),pS=nc(dS);function mS(e,t){return e.jsonPointer===t.jsonPointer&&(e.allowEmpty??!1)===(t.allowEmpty??!1)&&(e.prefix??"")===(t.prefix??"")}function zm(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(let[n,r]of Object.entries(e)){let i=t[n];if(!i||!mS(r,i))return!1}return!0}var vS=qt({headHash:mn,mutatorNames:tc(H.string()),indexes:pS,mutationIDs:nc(H.number()),lastServerAckdMutationIDs:H.record(H.number()),disabled:H.boolean()}),Am="client-groups";function gS(e){ar(e,vS)}function yS(e){ie(e);let t=new Map;for(let[n,r]of Object.entries(e))r!==void 0&&(gS(r),t.set(n,r));return t}function wS(e,t){let n={};for(let[r,i]of e.entries())t.assertValidHash(i.headHash),n[r]={...i,mutatorNames:[...i.mutatorNames.values()]};return Oe(n)}async function kS(e,t){let n=await t.getChunk(e);return yS(n?.data)}async function Yt(e){let t=await e.getHead(Am);return t?kS(t,e):new Map}async function bm(e,t){let n=await Yt(t);for(let[r,i]of e){let s=n.get(r);jm(i,s)}return Fm(e,t)}async function oc(e,t,n){let r=await Yt(n),i=r.get(e);jm(t,i);let s=new Map(r);return s.set(e,t),Fm(s,n)}function jm(e,t){let n=new Set(e.mutatorNames);R(n.size===e.mutatorNames.length,"A client group's mutatorNames must be a set."),t!==void 0&&(R(zm(t.indexes,e.indexes),"A client group's index definitions must never change."),R(Um(n,t.mutatorNames),"A client group's mutatorNames must never change."))}async function Fm(e,t){let n=wS(e,t),r=Array.from(e.values(),s=>s.headHash),i=t.createChunk(n,r);return await t.putChunk(i),await t.setHead(Am,i.hash),e}function Um(e,t){if(t.length!==e.size)return!1;for(let n of t)if(!e.has(n))return!1;return!0}async function go(e,t){return(await Yt(t)).get(e)}function Vm(e){for(let[t,n]of Object.entries(e.mutationIDs)){let r=e.lastServerAckdMutationIDs[t];if(r===void 0&&n!==0||r<n)return!0}return!1}async function Bm(e,t){let n=await go(e,t);if(!n)return;let r={...n,disabled:!0};await oc(e,r,t)}function gi(e,t){let n=e.length,r=t.length,i=Math.min(n,r);for(let s=0;s<i;){let o=e.codePointAt(s),a=t.codePointAt(s);if(o!==a){if(o<128&&a<128)return o-a;let l=Yf(o,Jf),u=Yf(a,qf);return SS(Jf,l,qf,u)}s+=IS(o)}return n-r}function SS(e,t,n,r){let i=Math.min(t,r);for(let s=0;s<i;s++){let o=e[s],a=n[s];if(o!==a)return o-a}return t-r}function IS(e){return e>65535?2:1}var Wm=()=>Array.from({length:4},()=>0),Jf=Wm(),qf=Wm();function Yf(e,t){if(e<128)return t[0]=e,1;let n,r;if(e<=2047)n=1,r=192;else if(e<=65535)n=2,r=224;else if(e<=1114111)n=3,r=240;else throw new Error("Invalid code point");t[0]=(e>>6*n)+r;let i=1;for(;n>0;n--){let s=e>>6*(n-1);t[i++]=128|s&63}return i}function ac(e,t){return gi(e,t)>0}function aa(e,t){return gi(e,t)<0}function la(e,t){return gi(e,t)<=0}function Gm(e,t){let n=0;for(;n<e;){let r=n+(e-n>>1),i=t(r);if(i===0)return r;i>0?n=r+1:e=r}return n}function*Cl(...e){for(let t of e)yield*t}var Km=0,Qm=1;function Jm(e,t,n){return Oe([e,n>=7?t:t.map(r=>r.slice(0,2))])}async function Bs(e,t,n,r){let i=await n.getNode(t);if(r!==n.rootHash)return Bs(e,n.rootHash,n,n.rootHash);if(Gs(i))return i;let{entries:s}=i,o=Gt(e,s);o===s.length&&o--;let a=s[o];return Bs(e,a[1],n,r)}function Gt(e,t){return Gm(t.length,n=>gi(e,t[n][0]))}function Ws(e,t,n){return e!==t.length&&t[e][0]===n}function Xf(e,t,n){er(e),wn(e),R(e.length>=2);let[r,i]=e;Se(r),er(i);let s=r>0?G:yn;if(t>=7){for(let a of i)ES(a,s);return e}let o=i.map(a=>CS(a,s,n));return[r,o]}function ES(e,t){er(e),R(e.length>=3),G(e[0]),t(e[1]),Se(e[2])}function CS(e,t,n){er(e),R(e.length>=2),G(e[0]),t(e[1]);let r=n(e[0],e[1]);return[e[0],e[1],r]}var qm=class{entries;hash;isMutable;#e=-1;constructor(e,t,n){this.entries=e,this.hash=t,this.isMutable=n}maxKey(){return this.entries[this.entries.length-1][0]}getChildNodeSize(e){if(this.#e!==-1)return this.#e;let t=e.chunkHeaderSize;for(let n of this.entries)t+=n[2];return this.#e=t}c(e){this.#e=-1,e.updateNode(this)}};function Zf(e,t){return Jm(e.level,e.entries,t)}var yo=class extends qm{level=0;set(e,t,n,r){let i,s=Gt(e,this.entries);return Ws(s,this.entries,e)?i=1:i=0,Promise.resolve(this.#e(r,s,i,[e,t,n]))}#e(e,t,n,...r){if(this.isMutable)return this.entries.splice(t,n,...r),this.c(e),this;let i=as(this.entries,t,n,...r);return e.newDataNodeImpl(i)}del(e,t){let n=Gt(e,this.entries);return Ws(n,this.entries,e)?Promise.resolve(this.#e(t,n,1)):Promise.resolve(this)}async*keys(e){for(let t of this.entries)yield t[0]}async*entriesIter(e){for(let t of this.entries)yield t}};function as(e,t,n,...r){let i=e.slice(0,t);for(let s=0;s<r.length;s++)i.push(r[s]);for(let s=t+n;s<e.length;s++)i.push(e[s]);return i}var Ym=class xl extends qm{level;constructor(t,n,r,i){super(t,n,i),this.level=r}async set(t,n,r,i){let s=Gt(t,this.entries);s===this.entries.length&&s--;let o=this.entries[s][1],a=await(await i.getNode(o)).set(t,n,r,i),l=a.getChildNodeSize(i);if(l>i.maxSize||l<i.minSize)return this.#e(i,s,a);let u=ls(a,i.getEntrySize);return this.#t(i,s,u)}async#e(t,n,r){let i=this.level-1,s=this.entries,o,a,l;if(n>0){let f=s[n-1][1],v=await t.getNode(f);o=Cl(v.entries,r.entries),a=n-1,l=2}else if(n<s.length-1){let f=s[n+1][1],v=await t.getNode(f);o=Cl(r.entries,v.entries),a=n,l=2}else o=r.entries,a=n,l=1;let u=Zm(o,f=>f[2],t.minSize-t.chunkHeaderSize,t.maxSize-t.chunkHeaderSize),c=[];for(let f of u){let v=t.newNodeImpl(f,i),y=ls(v,t.getEntrySize);c.push(y)}if(this.isMutable)return this.entries.splice(a,l,...c),this.c(t),this;let d=as(s,a,l,...c);return t.newInternalNodeImpl(d,this.level)}#t(t,n,r){if(this.isMutable)return this.entries.splice(n,1,r),this.c(t),this;let i=as(this.entries,n,1,r);return t.newInternalNodeImpl(i,this.level)}async del(t,n){let r=Gt(t,this.entries);if(r===this.entries.length)return this;let i=this.entries[r][1],s=await n.getNode(i),o=s.hash,a=await s.del(t,n);if(a.hash===o)return this;if(a.entries.length===0){let l=as(this.entries,r,1);return n.newInternalNodeImpl(l,this.level)}if(r===0&&this.entries.length===1)return a;if(a.getChildNodeSize(n)>n.minSize){let l=ls(a,n.getEntrySize);return this.#t(n,r,l)}return this.#e(n,r,a)}async*keys(t){for(let n of this.entries)yield*(await t.getNode(n[1])).keys(t)}async*entriesIter(t){for(let n of this.entries)yield*(await t.getNode(n[1])).entriesIter(t)}getChildren(t,n,r){let i=[];for(let s=t;s<n&&s<this.entries.length;s++)i.push(r.getNode(this.entries[s][1]));return Promise.all(i)}async getCompositeChildren(t,n,r){let{level:i}=this;if(n===0)return new xl([],qe(),i-1,!0);let s=await this.getChildren(t,t+n,r);if(i>1){let a=[];for(let l of s)a.push(...l.entries);return new xl(a,qe(),i-1,!0)}R(i===1);let o=[];for(let a of s)o.push(...a.entries);return new yo(o,qe(),!0)}};function Xm(e,t,n,r){return n===0?new yo(e,t,r):new Ym(e,t,n,r)}function Gs(e){return e.level===0}function Zm(e,t,n,r){let i=[],s=[],o=0,a=[];for(let l of e){let u=t(l);u>=r?(a.length>0&&(i.push(a),s.push(o)),i.push([l]),s.push(u),o=0,a=[]):o+u>=n?(a.push(l),i.push(a),s.push(o+u),o=0,a=[]):(o+=u,a.push(l))}return o>0&&(s.length>0&&o+s[s.length-1]<=r?i[i.length-1].push(...a):i.push(a)),i}var ev=Jm(0,[],7),xS=new yo([],ve,!1);function ls(e,t){let n=e.maxKey(),r=e.hash,i=t(n,r);return[n,r,i]}var st=1,An=4,_S=5,DS=8;function ln(e){switch(typeof e){case"string":return st+An+e.length;case"number":return MS(e)?e<=-(2**30)||e>=2**30-1?st+_S:st+An:st+DS;case"boolean":return st;case"object":if(e===null)return st;if(Array.isArray(e)){let t=2*st+An;for(let n of e)t+=ln(n);return t}{let t=e,n=2*st+An;for(let r in t)if(Wt(t,r)){let i=t[r];i!==void 0&&(n+=ln(r)+ln(i))}return n}}throw new Error(`Invalid value. type: ${typeof e}, value: ${e}`)}function MS(e){return e===(e|0)}var PS=2*st+An+st+An;function tv(e,t){return PS+ln(e)+ln(t)}var eh=-1,$S=0,us=1,cs=2,_l=3,Ui=0,th=1;function*NS(e,t){let n=0,r=0,i;function s(a,l){a[_l]===eh&&(a[_l]=l)}function o(){return[n,0,0,eh]}for(;n<e.length&&r<t.length;)e[n][Ui]===t[r][Ui]?(St(e[n][th],t[r][th])?i&&(s(i,0),yield i,i=void 0):(i||(i=o()),i[cs]++,i[us]++,s(i,r)),n++,r++):e[n][Ui]<t[r][Ui]?(i||(i=o()),i[us]++,n++):(i||(i=o()),i[cs]++,s(i,r),r++);r<t.length&&(i||(i=o()),i[cs]+=t.length-r,s(i,r)),n<e.length&&(i||(i=o()),i[us]+=e.length-n),i&&(s(i,0),yield i)}var RS=11,ut=class{p=new Map;a;l;rootHash;getEntrySize;chunkHeaderSize;constructor(e,t,n=ve,r=tv,i=RS){this.a=e,this.l=t,this.rootHash=n,this.getEntrySize=r,this.chunkHeaderSize=i}async getNode(e){if(e===ve)return xS;let t=this.p.get(e);if(t)return t;let n=await this.a.mustGetChunk(e),r=Xf(n.data,this.l,this.getEntrySize),i=Xm(r[Qm],e,r[Km],!1);return this.p.set(e,i),i}async get(e){let t=await Bs(e,this.rootHash,this,this.rootHash),n=Gt(e,t.entries);if(Ws(n,t.entries,e))return t.entries[n][1]}async has(e){let t=await Bs(e,this.rootHash,this,this.rootHash),n=Gt(e,t.entries);return Ws(n,t.entries,e)}async isEmpty(){let{rootHash:e}=this,t=await this.getNode(this.rootHash);return this.rootHash!==e?this.isEmpty():t.entries.length===0}scan(e){return Dl(this.rootHash,()=>this.rootHash,this.rootHash,e,async t=>{let n=await this.getNode(t);if(n)return[n.level,n.isMutable?n.entries.slice():n.entries];let r=await this.a.mustGetChunk(t);return Xf(r.data,this.l,this.getEntrySize)})}async*keys(){yield*(await this.getNode(this.rootHash)).keys(this)}async*entries(){yield*(await this.getNode(this.rootHash)).entriesIter(this)}[Symbol.asyncIterator](){return this.entries()}async*diff(e){let[t,n]=await Promise.all([this.getNode(this.rootHash),e.getNode(e.rootHash)]);yield*fs(n,t,e,this)}};async function*fs(e,t,n,r){if(e.level>t.level){let s=await e.getCompositeChildren(0,e.entries.length,n);yield*fs(s,t,n,r);return}if(t.level>e.level){let s=await t.getCompositeChildren(0,t.entries.length,r);yield*fs(e,s,n,r);return}if(Gs(e)&&Gs(t)){yield*TS(e.entries,t.entries);return}let i=NS(e.entries,t.entries);for(let s of i){let[o,a]=await Promise.all([e.getCompositeChildren(s[$S],s[us],n),t.getCompositeChildren(s[_l],s[cs],r)]);yield*fs(o,a,n,r)}}function*TS(e,t){let n=e.length,r=t.length,i=0,s=0;for(;i<n&&s<r;){let o=e[i][0],a=t[s][0];o===a?(St(e[i][1],t[s][1])||(yield{op:"change",key:o,oldValue:e[i][1],newValue:t[s][1]}),i++,s++):o<a?(yield{op:"del",key:o,oldValue:e[i][1]},i++):(yield{op:"add",key:a,newValue:t[s][1]},s++)}for(;i<n;i++)yield{op:"del",key:e[i][0],oldValue:e[i][1]};for(;s<r;s++)yield{op:"add",key:t[s][0],newValue:t[s][1]}}async function*Dl(e,t,n,r,i){if(n===ve)return;let s=await i(n),o=s[Qm],a=0;if(r&&(a=Gt(r,o)),s[Km]>0)for(;a<o.length;a++)yield*Dl(e,t,o[a][1],r,i),r="";else for(;a<o.length;a++){let l=t();if(e!==l){yield*Dl(l,t,l,o[a][0],i);return}yield o[a]}}async function Ks(e,t){let n=[],r=t==="add"?i=>({op:"add",key:i[0],newValue:i[1]}):i=>({op:"del",key:i[0],oldValue:i[1]});for await(let i of e.entries())n.push(r(i));return n}var re="main";function nv(e){return bS(e.meta)}function yi(e){return wo(e.meta)}function LS(e){return yi(e)||nv(e)}function OS(e){return fv(e.meta)}function HS(e){return US(e.meta)}function lc(e){return OS(e)||HS(e)}var rv=class{chunk;constructor(e){this.chunk=e}get meta(){return this.chunk.data.meta}get valueHash(){return this.chunk.data.valueHash}getMutationID(e,t){return uc(e,t,this.meta)}async getNextMutationID(e,t){return await this.getMutationID(e,t)+1}get indexes(){return this.chunk.data.indexes}};async function uc(e,t,n){switch(n.type){case 1:return n.lastMutationID;case 3:return n.lastMutationID;case 5:return n.lastMutationIDs[e]??0;case 2:return n.mutationID;case 4:{if(n.clientID===e)return n.mutationID;let{basisHash:r}=n,i=await ue(r,t);return uc(e,t,i.meta)}default:hm()}}async function iv(e,t){return(await cc(e,t)).filter(n=>LS(n))}async function sv(e,t){return(await cc(e,t)).filter(n=>yi(n))}async function ov(e,t,n){let r=[],i=new Map(Object.entries(t));for(;!lc(e)&&i.size>0;){if(yi(e)){let{meta:o}=e,a=i.get(o.clientID);a!==void 0&&(o.mutationID<=a?i.delete(o.clientID):r.push(e))}let{basisHash:s}=e.meta;if(s===null)throw new Error(`Commit ${e.chunk.hash} has no basis`);e=await ue(s,n)}return r}async function zS(e,t){let n=await t.getHead(e);return R(n,`Missing head ${e}`),ct(n,t)}async function av(e,t){return(await ct(e,t)).chunk.hash}async function ct(e,t){let n=await ue(e,t);return Or(n,t)}async function Or(e,t){for(;!lc(e);){let{meta:n}=e;if(wo(n))e=await ue(n.baseSnapshotHash,t);else{let{basisHash:r}=n;if(r===null)throw new Error(`Commit ${e.chunk.hash} has no basis`);e=await ue(r,t)}}return e}function Ml(e,t){let n=e.meta;return fv(n)?[n.lastMutationIDs[t]??0,n.cookieJSON]:[n.lastMutationID,n.cookieJSON]}function Pl(e,t){return Yu(e.meta.cookieJSON,t.meta.cookieJSON)}async function cc(e,t){let n=await ue(e,t),r=[];for(;!lc(n);){let{meta:i}=n,{basisHash:s}=i;if(s===null)throw new Error(`Commit ${n.chunk.hash} has no basis`);r.push(n),n=await ue(s,t)}return r.push(n),r}async function ue(e,t){let n=await t.mustGetChunk(e);return tI(n)}async function fc(e,t){let n=await rc(e,t);return ue(n,t)}function AS(e){Se(e.lastMutationID)}function lv(e){if(Se(e.mutationID),G(e.mutatorName),!e.mutatorName)throw new Error("Missing mutator name");yn(e.mutatorArgsJSON),e.originalHash!==null&&Et(e.originalHash),Se(e.timestamp)}function uv(e){G(e.clientID),lv(e)}function wo(e){return e.type===4}function bS(e){return e.type===2}function cv(e){e.basisHash!==null&&Et(e.basisHash),yn(e.cookieJSON)}function jS(e){cv(e),Se(e.lastMutationID)}function ko(e){cv(e),FS(e.lastMutationIDs)}function FS(e){ie(e);for(let t of Object.values(e))Se(t)}function un(e){ko(e.meta)}function fv(e){return e.type===5}function US(e){return e.type===3}function VS(e){switch(ie(e),wn(e),e.basisHash!==null&&G(e.basisHash),Se(e.type),e.type){case 1:AS(e);break;case 2:lv(e);break;case 4:uv(e);break;case 3:jS(e);break;case 5:ko(e);break;default:throw new Error(`Invalid enum value ${e.type}`)}}function BS(e,t){return e.jsonPointer===t.jsonPointer&&(e.allowEmpty??!1)===(t.allowEmpty??!1)&&e.keyPrefix===t.keyPrefix}function WS(e){ie(e),wn(e),G(e.name),G(e.keyPrefix),G(e.jsonPointer),e.allowEmpty!==void 0&&yk(e.allowEmpty)}function GS(e,t){return{name:e,keyPrefix:t.prefix??"",jsonPointer:t.jsonPointer,allowEmpty:t.allowEmpty??!1}}function KS(e){ie(e),wn(e),WS(e.definition),G(e.valueHash)}function QS(e){er(e),wn(e);for(let t of e)KS(t)}function JS(e,t,n,r,i,s,o,a,l){return wi(e,ki({type:2,basisHash:t,mutationID:n,mutatorName:r,mutatorArgsJSON:i,originalHash:s,timestamp:l},o,a))}function qS(e,t,n,r,i,s,o,a,l,u,c){return wi(e,ki({type:4,basisHash:t,baseSnapshotHash:n,mutationID:r,mutatorName:i,mutatorArgsJSON:s,originalHash:o,timestamp:u,clientID:c},a,l))}function YS(e,t,n,r,i,s){return wi(e,ZS(t,n,r,i,s))}function XS(e,t,n,r,i,s){return wi(e,hv(t,n,r,i,s))}function ZS(e,t,n,r,i){return ki({type:3,basisHash:e,lastMutationID:t,cookieJSON:n},r,i)}function hv(e,t,n,r,i){return ki({type:5,basisHash:e,lastMutationIDs:t,cookieJSON:n},r,i)}function eI(e,t,n,r,i){return wi(e,ki({type:1,basisHash:t,lastMutationID:n},r,i))}function tI(e){return rI(e),new rv(e)}function wi(e,t){return new rv(e(t,dv(t)))}function dv(e){let t=[e.valueHash],{meta:n}=e;switch(n.type){case 1:n.basisHash&&t.push(n.basisHash);break;case 2:case 4:n.basisHash&&t.push(n.basisHash);break;case 3:case 5:break;default:hm()}for(let r of e.indexes)t.push(r.valueHash);return t}function ki(e,t,n){return Oe({meta:e,valueHash:t,indexes:n})}function nI(e){ie(e),wn(e),VS(e.meta),G(e.valueHash),QS(e.indexes)}function rI(e){let{data:t}=e;nI(t);let n=new Set;for(let r of t.indexes){let{name:i}=r.definition;if(n.has(i))throw new Error(`Duplicate index ${i}`);n.add(i)}}async function pv(e){let t=[];for await(let n of e)t.push(n);return t}function si(e,t){return pv(t.diff(e))}var Si=class extends ut{#e=new ho;#t=new Map;minSize;maxSize;constructor(e,t,n=ve,r=8*1024,i=16*1024,s=tv,o){super(e,t,n,s,o),this.minSize=r,this.maxSize=i}#n(e){R(e.isMutable),this.#t.set(e.hash,e),this.p.set(e.hash,e)}updateNode(e){R(e.isMutable),this.#t.delete(e.hash),e.hash=qe(),this.#n(e)}newInternalNodeImpl(e,t){let n=new Ym(e,qe(),t,!0);return this.#n(n),n}newDataNodeImpl(e){let t=new yo(e,qe(),!0);return this.#n(t),t}newNodeImpl(e,t){let n=Xm(e,qe(),t,!0);return this.#n(n),n}put(e,t){return this.#e.withLock(async()=>{let n=await this.getNode(this.rootHash),r=this.getEntrySize(e,t),i=await n.set(e,t,r,this);if(i.getChildNodeSize(this)>this.maxSize){let s=this.chunkHeaderSize,o=Zm(i.entries,c=>c[2],this.minSize-s,this.maxSize-s),{level:a}=i,l=o.map(c=>{let d=this.newNodeImpl(c,a);return ls(d,this.getEntrySize)}),u=this.newInternalNodeImpl(l,a+1);this.rootHash=u.hash;return}this.rootHash=i.hash})}del(e){return this.#e.withLock(async()=>{let t=await(await this.getNode(this.rootHash)).del(e,this),n=this.rootHash!==t.hash;return n&&(t.level>0&&t.entries.length===1?this.rootHash=t.entries[0][1]:this.rootHash=t.hash),n})}clear(){return this.#e.withLock(()=>{this.#t.clear(),this.rootHash=ve})}flush(){return this.#e.withLock(async()=>{let e=this.a;if(this.rootHash===ve){let r=e.createChunk(ev,[]);return await e.putChunk(r),r.hash}let t=[],n=mv(this.rootHash,t,e.createChunk,this.#t,this.l);return await Promise.all(t.map(r=>e.putChunk(r))),this.#t.clear(),this.rootHash=n,n})}};function mv(e,t,n,r,i){let s=r.get(e);if(s===void 0)return e;if(Gs(s)){let u=n(Zf(s,i),[]);return t.push(u),u.hash}let o=[],{entries:a}=s;for(let u=0;u<a.length;u++){let c=a[u],d=c[1],f=mv(d,t,n,r,i);f!==d&&(a[u]=[c[0],f,c[2]]),o.push(f)}let l=n(Zf(s,i),o);return t.push(l),l.hash}function nh(e){let t;return()=>(t===void 0&&(t=e()),t)}var vv=class{meta;map;constructor(e,t){this.meta=e,this.map=t}},iI=class extends vv{flush(){return this.map.flush()}clear(){return this.map.clear()}};async function $l(e,t,n,r,i,s,o){try{for(let a of sI(r,i,s,o))switch(n){case 0:await t.put(a,i);break;case 1:await t.del(a);break}}catch(a){e.info?.("Not indexing value",i,":",a)}}function sI(e,t,n,r){let i=oI(t,n);if(i===void 0){if(r)return[];throw new Error(`No value at path: ${n}`)}let s=Array.isArray(i)?i:[i],o=[];for(let a of s)if(typeof a=="string")o.push(gv([a,e]));else throw new Error("Unsupported target type");return o}var Nl="\0",Rl="\0";function gv(e){let t=e[0],n=e[1];if(t.includes("\0"))throw new Error("Secondary key cannot contain null byte");return Nl+t+Rl+n}function rh(e,t){let n=gv([e,t||""]);return t===void 0?n.slice(0,n.length-1):n}function So(e){if(e[0]!==Nl)throw new Error("Invalid version");let t=Nl.length,n=Rl.length,r=e.indexOf(Rl,t);if(r===-1)throw new Error("Invalid formatting");let i=e.slice(t,r),s=e.slice(r+n);return[i,s]}function oI(e,t){function n(s){if(!(s.startsWith("+")||s.startsWith("0")&&s.length!==1))return parseInt(s,10)}if(t==="")return e;if(!t.startsWith("/"))throw new Error(`Invalid JSON pointer: ${t}`);let r=t.split("/").slice(1).map(s=>s.replace(/~1/g,"/").replace(/~0/g,"~")),i=e;for(let s of r){let o;if(Array.isArray(i)){let a=n(s);if(a===void 0)return;o=i[a]}else{if(i===null)return;typeof i=="object"&&(i=i,o=i[s])}if(o===void 0)return;i=o}return i}var yv=class{#e;map;indexes;constructor(e,t,n){this.#e=e,this.map=t,this.indexes=n}has(e){return this.map.has(e)}get(e){return this.map.get(e)}isEmpty(){return this.map.isEmpty()}getMapForIndex(e){let t=this.indexes.get(e);if(t===void 0)throw new Error(`Unknown index name: ${e}`);return t.map}get closed(){return this.#e.closed}close(){this.#e.release()}};function aI(e,t){return lI(re,e,t)}async function lI(e,t,n){let r=await fc(e,t);return uI(r,t,n)}function uI(e,t,n){let r=Qs(e,t,n),i=new ut(t,n,e.valueHash);return new yv(t,i,r)}function Qs(e,t,n){let r=new Map;for(let i of e.indexes)r.set(i.definition.name,new vv(i,new ut(t,n,i.valueHash)));return r}var hc=class extends Map{set(e,t){return t.length===0?this:super.set(e,t)}};async function cI(e,t,n,r,i){let s=new hc;if(!r.shouldComputeDiffs())return s;let o=new ut(n,i,e.valueHash),a=new ut(n,i,t.valueHash),l=await si(o,a);return s.set("",l),await wv(e,t,n,s,r,i),s}async function wv(e,t,n,r,i,s){let o=Qs(e,n,s),a=Qs(t,n,s);for(let[l,u]of o){if(!i.shouldComputeDiffsForIndex(l))continue;let c=a.get(l);if(c!==void 0){R(c!==u);let d=await si(u.map,c.map);a.delete(l),r.set(l,d)}else{let d=await Ks(u.map,"del");r.set(l,d)}}for(let[l,u]of a){if(!i.shouldComputeDiffsForIndex(l))continue;let c=await Ks(u.map,"add");r.set(l,c)}}var dc=class extends yv{#e;#t;#n;#r;#i;constructor(e,t,n,r,i,s,o){super(e,t,i),this.#e=e,this.#t=n,this.#n=r,this.#r=s,this.#i=o,R(n===void 0?r.basisHash===ve:r.basisHash===n.chunk.hash)}async put(e,t,n){if(this.#n.type===1)throw new Error("Not allowed");let r=nh(()=>this.map.get(t));await Tl(e,this.indexes,t,r,n),await this.map.put(t,n)}getMutationID(){return uc(this.#r,this.#e,this.#n)}async del(e,t){if(this.#n.type===1)throw new Error("Not allowed");let n=nh(()=>this.map.get(t));return n!==void 0&&await Tl(e,this.indexes,t,n,void 0),this.map.del(t)}async clear(){if(this.#n.type===1)throw new Error("Not allowed");await this.map.clear();let e=[];for(let t of this.indexes.values())e.push(t.clear());await Promise.all(e)}async putCommit(){let e=await this.map.flush(),t=[];for(let i of this.indexes.values()){let s=await i.flush(),o={definition:i.meta.definition,valueHash:s};t.push(o)}let n,r=this.#n;switch(r.type){case 2:{let{basisHash:i,mutationID:s,mutatorName:o,mutatorArgsJSON:a,originalHash:l,timestamp:u}=r;n=JS(this.#e.createChunk,i,s,o,a,l,e,t,u);break}case 4:{R(this.#i>=5);let{basisHash:i,mutationID:s,mutatorName:o,mutatorArgsJSON:a,originalHash:l,timestamp:u}=r;n=qS(this.#e.createChunk,i,await av(i,this.#e),s,o,a,l,e,t,u,this.#r);break}case 3:{R(this.#i<=4);let{basisHash:i,lastMutationID:s,cookieJSON:o}=r;n=YS(this.#e.createChunk,i,s,o,e,t);break}case 5:{R(this.#i>5);let{basisHash:i,lastMutationIDs:s,cookieJSON:o}=r;n=XS(this.#e.createChunk,i,s,o,e,t);break}case 1:{let{basisHash:i,lastMutationID:s}=r;if(this.#t!==void 0){if(await this.#t.getMutationID(this.#r,this.#e)!==s)throw new Error("Index change must not change mutationID");if(this.#t.valueHash!==e)throw new Error("Index change must not change valueHash")}n=eI(this.#e.createChunk,i,s,e,t);break}}return await this.#e.putChunk(n.chunk),n}async commit(e){let t=(await this.putCommit()).chunk.hash;return await this.#e.setHead(e,t),await this.#e.commit(),t}async commitWithDiffs(e,t){let n=this.putCommit(),r=await this.#s(t),i=(await n).chunk.hash;return await this.#e.setHead(e,i),await this.#e.commit(),[i,r]}async#s(e){let t=new hc;if(!e.shouldComputeDiffs())return t;let n=[];if(this.#t){let i=new ut(this.#e,this.#i,this.#t.valueHash);n=await si(i,this.map)}t.set("",n);let r;this.#t?r=Qs(this.#t,this.#e,this.#i):r=new Map;for(let[i,s]of this.indexes){if(!e.shouldComputeDiffsForIndex(i))continue;let o=r.get(i);R(s!==o);let a=await(o?si(o.map,s.map):Ks(s.map,"add"));t.set(i,a)}for(let[i,s]of r)if(!this.indexes.has(i)&&e.shouldComputeDiffsForIndex(i)){let o=await Ks(s.map,"del");t.set(i,o)}return t}close(){this.#e.release()}};async function kv(e,t,n,r,i,s,o,a){let l=await ue(e,i),u=new Si(i,a,l.valueHash),c=await l.getNextMutationID(o,i),d=pc(l,i,a);return new dc(i,u,l,a>=5?{type:4,basisHash:e,baseSnapshotHash:await av(e,i),mutatorName:t,mutatorArgsJSON:n,mutationID:c,originalHash:r,timestamp:s,clientID:o}:{type:2,basisHash:e,mutatorName:t,mutatorArgsJSON:n,mutationID:c,originalHash:r,timestamp:s},d,o,a)}async function fI(e,t,n,r,i,s,o){R(o<=4);let a=await ue(e,r),l=new Si(r,o,a.valueHash);return new dc(r,l,a,{basisHash:e,type:3,lastMutationID:t,cookieJSON:n},i,s,o)}async function hI(e,t,n,r,i,s){let o=await ue(e,r),a=new Si(r,s,o.valueHash);return new dc(r,a,o,{basisHash:e,type:5,lastMutationIDs:t,cookieJSON:n},pc(o,r,s),i,s)}async function Tl(e,t,n,r,i){let s=[];for(let o of t.values()){let{keyPrefix:a}=o.meta.definition;if(!a||n.startsWith(a)){let l=await r();l!==void 0&&s.push($l(e,o.map,1,n,l,o.meta.definition.jsonPointer,o.meta.definition.allowEmpty??!1)),i!==void 0&&s.push($l(e,o.map,0,n,i,o.meta.definition.jsonPointer,o.meta.definition.allowEmpty??!1))}}await Promise.all(s)}function pc(e,t,n){let r=new Map;for(let i of e.indexes)r.set(i.definition.name,new iI(i,new Si(t,n,i.valueHash)));return r}async function dI(e,t,n,r,i,s,o){let a=new Si(t,o);for await(let l of n.scan(r)){let u=l[0];if(!u.startsWith(r))break;await $l(e,a,0,u,l[1],i,s)}return a}var mc=H.string(),Sv=H.string(),Iv=qt({heartbeatTimestampMs:H.number(),headHash:mn,mutationID:H.number(),lastServerAckdMutationID:H.number()}),pI=qt({heartbeatTimestampMs:H.number(),headHash:mn,tempRefreshHash:mn.nullable(),clientGroupID:mc}),Ev=qt({heartbeatTimestampMs:H.number(),refreshHashes:tc(mn),persistHash:mn.nullable(),clientGroupID:mc});function Cv(e){return e.refreshHashes!==void 0}function vc(e){return e.clientGroupID!==void 0}var xv="clients",mI=H.union(Iv,pI,Ev);function vI(e){ar(e,mI)}function ih(e){ar(e,Iv)}function gc(e){ar(e,Ev)}function gI(e){ie(e);let t=new Map;for(let n in e)if(Wt(e,n)){let r=e[n];r!==void 0&&(vI(r),t.set(n,r))}return t}function yI(e,t){for(let n of e.values())Cv(n)?(n.refreshHashes.forEach(t.assertValidHash),n.persistHash&&t.assertValidHash(n.persistHash)):(t.assertValidHash(n.headHash),vc(n)&&n.tempRefreshHash&&t.assertValidHash(n.tempRefreshHash));return Oe(Object.fromEntries(e))}async function xt(e){let t=await e.getHead(xv);return wI(t,e)}async function wI(e,t){if(!e)return new Map;let n=await t.getChunk(e);return gI(n?.data)}var Ft=class extends Error{name="ClientStateNotFoundError";id;constructor(e){super(`Client state not found, id: ${e}`),this.id=e}};async function kI(e,t){if(!await _v(e,t))throw new Ft(e)}async function _v(e,t){return!!await yc(e,t)}async function yc(e,t){return(await xt(t)).get(e)}async function Ll(e,t){let n=await yc(e,t);if(!n)throw new Ft(e);return n}function SI(e,t,n,r,i,s){return nr(n,async o=>{async function a(g,I,h,p){let m=hv(g,{},I,h,p),w=o.createChunk(m,dv(m)),k=vo(),S={heartbeatTimestampMs:Date.now(),refreshHashes:[w.hash],persistHash:null,clientGroupID:k},E=new Map(l).set(e,S),_={headHash:w.hash,mutatorNames:r,indexes:i,mutationIDs:{},lastServerAckdMutationIDs:{},disabled:!1};return await Promise.all([o.putChunk(w),rr(E,o),oc(k,_,o)]),await o.commit(),[S,w.hash,E,!0]}let l=await xt(o),u=await EI(o,r,i);if(u.type===Pv){let{clientGroupID:g,headHash:I}=u,h={clientGroupID:g,refreshHashes:[I],heartbeatTimestampMs:Date.now(),persistHash:null},p=new Map(l).set(e,h);return await rr(p,o),await o.commit(),[h,I,p,!1]}if(u.type===Dv){let g=o.createChunk(ev,[]);await o.putChunk(g);let I=[];for(let[h,p]of Object.entries(i)){let m=GS(h,p);I.push({definition:m,valueHash:g.hash})}return a(null,null,g.hash,I)}R(u.type===Mv);let{snapshot:c}=u,d=[],{valueHash:f,indexes:v}=c,y=new ut(o,s,f);for(let[g,I]of Object.entries(i)){let{prefix:h="",jsonPointer:p,allowEmpty:m=!1}=I,w={name:g,keyPrefix:h,jsonPointer:p,allowEmpty:m},k=II(v,w);if(k)d.push({definition:w,valueHash:k.valueHash});else{let S=await dI(t,o,y,h,p,m,s);d.push({definition:w,valueHash:await S.flush()})}}return a(c.meta.basisHash,c.meta.cookieJSON,c.valueHash,d)})}function II(e,t){return e.find(n=>BS(n.definition,t))}var Dv=0,Mv=1,Pv=2;async function EI(e,t,n){let r,i,s=new Set(t),o=await Yt(e);for(let[a,l]of o){if(!l.disabled&&Um(s,l.mutatorNames)&&zm(n,l.indexes))return{type:Pv,clientGroupID:a,headHash:l.headHash};let u=await ct(l.headHash,e);un(u);let{cookieJSON:c}=u.meta;(r===void 0||Yu(c,r)>0)&&(r=c,i=u)}return i?{type:Mv,snapshot:i}:{type:Dv}}function CI(e){let t=[];for(let n of e.values())Cv(n)?(t.push(...n.refreshHashes),n.persistHash&&t.push(n.persistHash)):(t.push(n.headHash),vc(n)&&n.tempRefreshHash&&t.push(n.tempRefreshHash));return t}async function xI(e,t){let n=await $v(e,t);if(n)return go(n,t)}async function $v(e,t){let n=await yc(e,t);if(!(!n||!vc(n)))return n.clientGroupID}async function Ol(e,t,n){let r=await xt(n),i=new Map(r).set(e,t);return rr(i,n)}async function rr(e,t){let n=yI(e,t),r=t.createChunk(n,CI(e));return await t.putChunk(r),await t.setHead(xv,r.hash),r.hash}var _I=0,DI="replicache-dbs-v"+_I,MI="";function PI(){return MI+DI}var hs="dbs",sh="profileId";function $I(e){ie(e);for(let[t,n]of Object.entries(e))G(t),NI(n),R(t===n.name)}function NI(e){ie(e),G(e.name),G(e.replicacheName),Se(e.replicacheFormatVersion),G(e.schemaVersion),e.lastOpenedTimestampMS!==void 0&&Se(e.lastOpenedTimestampMS)}var Nv=class{#e;constructor(e){this.#e=e(PI())}putDatabase(e){return this.#t({...e,lastOpenedTimestampMS:Date.now()})}putDatabaseForTesting(e){return this.#t(e)}#t(e){return ne(this.#e,async t=>{let n={...await ua(t),[e.name]:e};return await t.put(hs,n),n})}clearDatabases(){return ne(this.#e,e=>e.del(hs))}deleteDatabases(e){return ne(this.#e,async t=>{let n={...await ua(t)};for(let r of e)delete n[r];await t.put(hs,n)})}getDatabases(){return ge(this.#e,ua)}close(){return this.#e.close()}getProfileID(){return ne(this.#e,async e=>{let t=await e.get(sh);return t===void 0&&(t=`p${vo().replace(/-/g,"")}`,await e.put(sh,t)),G(t),t})}};async function ua(e){let t=await e.get(hs);return t||(t=Oe({})),$I(t),t}var RI=12*60*60*1e3,TI=30*24*60*60*1e3,LI=14*24*60*60*1e3,OI=5*60*1e3;function HI(e,t,n){let r=!0;vi("CollectIDBDatabases",async()=>{await zI(e,Date.now(),TI,LI)},()=>r?(r=!1,OI):RI,t,n)}async function zI(e,t,n,r,i=bI){let s=await e.getDatabases(),o=Object.values(s),a=(await Promise.all(o.map(async u=>[u.name,await jI(u,t,n,r,i)]))).filter(u=>u[1]).map(u=>u[0]),{errors:l}=await AI(e,a);if(l.length)throw l[0]}async function Rv(e,t){await hS(e),await t.deleteDatabases([e])}async function AI(e,t){let n=await Promise.allSettled(t.map(async s=>(await Rv(s,e),s))),r=[],i=[];for(let s of n)s.status==="fulfilled"?r.push(s.value):i.push(s.reason);return{dropped:r,errors:i}}function bI(e){let t=new Us(e);return new ic(t,qe,Et)}async function jI(e,t,n,r,i){if(e.replicacheFormatVersion>7)return!1;if(e.lastOpenedTimestampMS!==void 0){let a=e.replicacheFormatVersion>=5;return t-e.lastOpenedTimestampMS<(a?r:n)?!1:a?(R(e.replicacheFormatVersion===5||e.replicacheFormatVersion===6||e.replicacheFormatVersion===7),!await VI(i(e.name))):!0}let s=i(e.name),o=await ge(s,xt);return await s.close(),FI(o,t,n)}function FI(e,t,n){for(let r of e.values())if(t-r.heartbeatTimestampMs<n)return!1;return!0}async function UI(e,t=n=>Hm(new mi,n)){await Rv(e,new Nv(t))}async function VI(e){let t=await ge(e,Yt);for(let n of t.values())if(Vm(n))return!0;return!1}function BI(e,t,n){return e?new WI(e,t,n):new QI}var WI=class{#e;#t;#n=0;visibilityState;#r=new Set;constructor(e,t,n){this.#e=e,this.#t=t,this.visibilityState=e.visibilityState,this.#e.addEventListener("visibilitychange",this.#i,{signal:n})}#i=()=>{this.#e.visibilityState==="visible"?(clearTimeout(this.#n),this.#s("visible")):this.#n=setTimeout(()=>{this.#s("hidden")},this.#t)};#s(e){if(e!==this.visibilityState){this.visibilityState=e;for(let t of this.#r){let{resolve:n,state:r}=t;r===e&&(n(),this.#r.delete(t))}}}waitForVisible(){return this.#o("visible")}waitForHidden(){return this.#o("hidden")}#o(e){if(this.visibilityState===e)return Promise.resolve();let{promise:t,resolve:n}=z();return this.#r.add({resolve:n,state:e}),t}},GI=Promise.resolve(),KI=new Promise(()=>{}),QI=class{visibilityState="visible";waitForVisible(){return GI}waitForHidden(){return KI}};function Vi(){return typeof document<"u"?document:void 0}var Tv=class{rep;invokeSend;maxConnections=1;constructor(e,t){this.rep=e,this.invokeSend=t}get maxDelayMs(){return this.rep.requestOptions.maxDelayMs}get minDelayMs(){return this.rep.requestOptions.minDelayMs}},JI=class extends Tv{debounceDelay=0;get watchdogTimer(){return this.rep.pullInterval}},qI=class extends Tv{get debounceDelay(){return this.rep.pushDelay}watchdogTimer=null},YI=30,XI=6e4,oh=class{#e=z();#t=z();#n=z();#r;#i=!1;#s=0;#o;#a;constructor(e,t,n){this.#o=e,this.#r=t,this.#a=n,this.run()}close(){this.#i=!0,this.#s>0&&this.#n.resolve({error:ah()})}async send(e){if(this.#i)return{error:ah()};this.#s++,this.#o.debug?.("send",e),e?this.#t.resolve():await this.#a?.waitForVisible(),this.#e.resolve();let t=await this.#n.promise;return this.#s--,t}async run(){let e=[],t=z(),n,r=0,i=this.#r,{debug:s}=this.#o,o=0;s?.("Starting connection loop");let a=l=>Promise.race([this.#t.promise,ii(l)]);for(;!this.#i;){s?.(ca(e)?"Last request failed. Trying again":"Waiting for a send");let l=[this.#e.promise],u=i.watchdogTimer;if(u!==null&&l.push(ii(u)),await Promise.race(l),this.#i||(s?.("Waiting for debounce"),await a(i.debounceDelay),this.#i))break;if(s?.("debounced"),this.#e=z(),r>=i.maxConnections){if(s?.("Too many request in flight. Waiting until one finishes..."),await this.#c(),this.#i)break;s?.("...finished")}r>0||ca(e)?(o=eE(o,i,e),s?.(ca(e)?"Last connection errored. Sleeping for":"More than one outstanding connection ("+r+"). Sleeping for",o,"ms")):o=0;let c=Math.min(i.maxDelayMs,Math.max(i.minDelayMs,o));if(n!==void 0){let d=Date.now()-n;if(c>d&&(await Promise.race([a(c-d),t.promise]),this.#i))break}r++,(async()=>{let d=Date.now(),f,v;try{n=d,s?.("Sending request"),this.#t=z(),f=await i.invokeSend(),s?.("Send returned",f)}catch(g){s?.("Send failed",g),v=g,f=!1}if(this.#i){s?.("Closed after invokeSend");return}s?.("Request done",{duration:Date.now()-d,ok:f}),e.push({duration:Date.now()-d,ok:f}),nE(e)&&(t.resolve(),t=z()),r--,this.#f();let y=this.#n;this.#n=z(),v?y.resolve({error:v}):y.resolve(void 0),f||this.#e.resolve()})()}}#u=void 0;#f(){if(this.#u){let e=this.#u;this.#u=void 0,e()}}#c(){let{promise:e,resolve:t}=z();return this.#u=t,e}},ZI=9;function ah(){return new Error("Closed")}function eE(e,t,n){let{length:r}=n;if(r===0)return e;let{ok:i}=n[n.length-1],{maxConnections:s,minDelayMs:o}=t;if(!i)return e===0?o:e*2;if(r>1){let a=n[n.length-2];for(;n.length>ZI;)n.shift();if(i&&!a.ok)return o}return tE(n.filter(({ok:a})=>a).map(({duration:a})=>a))/s|0}function tE(e){e.sort();let{length:t}=e,n=t>>1;return t%2===1?e[n]:(e[n-1]+e[n])/2}function ca(e){return e.length>0&&!e[e.length-1].ok}function nE(e){return e.length>1&&!e[e.length-2].ok&&e[e.length-1].ok}var wc=class{#e=new nm;#t=new Map;#n;#r;#i;t=new Map;n;h=new Map;m=new Map;constructor(e,t,n,r,i=ln){this.n=new iE(t,i,this.h,this.m),this.#n=e,this.#r=n,this.#i=r}async read(){let e=await this.#e.read();return new Lv(this.#t,this.t,this.n,this.#n,e,this.#i)}async write(){let e=await this.#e.write();return new rE(this.#t,this.t,this.n,this.#n,this.h,this.m,e,this.#r,this.#i)}close(){return It}isCached(e){return this.n.getWithoutUpdatingLRU(e)!==void 0}withSuspendedSourceCacheEvictsAndDeletes(e){return this.n.withSuspendedEvictsAndDeletes(e)}},Lv=class{u;t;n;f;#e=void 0;#t;#n=!1;assertValidHash;constructor(e,t,n,r,i,s){this.u=e,this.t=t,this.n=n,this.f=r,this.#t=i,this.assertValidHash=s}isMemOnlyChunkHash(e){return this.t.has(e)}async hasChunk(e){return await this.getChunk(e)!==void 0}async getChunk(e){let t=this.t.get(e);if(t!==void 0)return t;let n=this.n.get(e);return n===void 0&&(n=await(await this.y()).getChunk(e),n!==void 0&&this.n.put(n)),n}mustGetChunk(e){return Rm(this,e)}getHead(e){return Promise.resolve(this.u.get(e))}release(){this.#n||(this.#t(),this.#e?.then(e=>e.release()).catch(e=>{}),this.#n=!0)}get closed(){return this.#n}y(){return this.#e||(this.#e=this.f.read()),this.#e}},rE=class extends Lv{#e;#t;#n;i=new Map;r=new Map;s=new Map;#r=new Set;constructor(e,t,n,r,i,s,o,a,l){super(e,t,n,r,o,l),this.#e=i,this.#t=s,this.#n=a}createChunk=(e,t)=>{let n=Dm(e,t,this.#n);return this.#r.add(n.hash),n};putChunk(e,t){let{hash:n,meta:r}=e;if(this.assertValidHash(n),r.length>0)for(let i of r)this.assertValidHash(i);return this.#r.has(n)||this.isMemOnlyChunkHash(n)?this.r.set(n,e):this.s.set(n,{chunk:e,size:t??-1}),It}async setHead(e,t){await this.#i(e,t)}async removeHead(e){await this.#i(e,void 0)}async#i(e,t){let n=await this.getHead(e),r=this.i.get(e);r===void 0?this.i.set(e,{new:t,old:n}):r.new=t}isMemOnlyChunkHash(e){return this.r.has(e)||super.isMemOnlyChunkHash(e)}async getChunk(e){let t=this.r.get(e);if(t!==void 0)return t;let n=this.t.get(e);if(n!==void 0)return n;let r=this.s.get(e);if(r!==void 0)return r.chunk;let i=this.n.get(e);return i===void 0&&(i=await(await this.y()).getChunk(e),i!==void 0&&this.s.set(i.hash,{chunk:i,size:-1})),i}getHead(e){let t=this.i.get(e);return t?Promise.resolve(t.new):super.getHead(e)}async commit(){let e=new Set(Cl(this.r.keys(),this.s.keys())),t=await Pm(this.i.values(),e,this);for(let[n,r]of t)if(this.isMemOnlyChunkHash(n)){if(r===0)this.#e.delete(n),this.t.delete(n),this.#t.delete(n);else{this.#e.set(n,r);let i=this.r.get(n);i&&(this.#t.set(n,i.meta),this.t.set(n,i))}t.delete(n)}this.n.updateForCommit(this.s,t);for(let[n,r]of this.i)r.new?this.u.set(n,r.new):this.u.delete(n);this.r.clear(),this.s.clear(),this.i.clear(),this.release()}getRefCount(e){return this.#e.get(e)}getRefs(e){let t=this.r.get(e);if(t)return t.meta;let n=this.t.get(e);if(n)return n.meta;let r=this.s.get(e);return r!==void 0?r.chunk.meta:this.#t.get(e)}areRefsCounted(e){return this.#t.has(e)}chunksPersisted(e){let t=[];for(let n of e){let r=this.t.get(n);r&&(this.t.delete(n),t.push(r))}this.n.persisted(t)}},iE=class{#e;#t;#n;#r;#i=0;#s=!1;#o=[];cacheEntries=new Map;constructor(e,t,n,r){this.#e=e,this.#t=t,this.#n=n,this.#r=r}get(e){let t=this.cacheEntries.get(e);return t&&(this.cacheEntries.delete(e),this.cacheEntries.set(e,t)),t?.chunk}getWithoutUpdatingLRU(e){return this.cacheEntries.get(e)?.chunk}put(e){let{hash:t}=e,n=this.cacheEntries.get(t);if(n){this.cacheEntries.delete(t),this.cacheEntries.set(t,n);return}let r=this.#n.get(t);if(!(r===void 0||r<1)&&this.#u(e)){if(!this.#r.has(t)){for(let i of e.meta)this.#n.set(i,(this.#n.get(i)||0)+1);this.#r.set(t,e.meta)}this.#a()}}#a(){if(!this.#s)for(let e of this.cacheEntries.values()){if(this.#i<=this.#e)break;this.#f(e)}}#u(e,t){let n=t??this.#t(e);return n>this.#e?!1:(this.#i+=n,this.cacheEntries.set(e.hash,{chunk:e,size:n}),!0)}#f(e){let{hash:t}=e.chunk;this.#i-=e.size,this.cacheEntries.delete(t)}#c(e){this.#n.delete(e),this.#r.delete(e);let t=this.cacheEntries.get(e);t&&(this.#i-=t.size,this.cacheEntries.delete(e))}updateForCommit(e,t){for(let[n,r]of t)if(r===0)this.#s?(this.#n.set(n,0),this.#o.push(n)):this.#c(n);else{this.#n.set(n,r);let i=e.get(n);if(i){let{chunk:s,size:o}=i,a=this.cacheEntries.get(n);a?(this.cacheEntries.delete(n),this.cacheEntries.set(n,a)):(this.#u(s,o!==-1?o:void 0),this.#r.set(n,s.meta))}}this.#a()}persisted(e){for(let t of e)this.#u(t);this.#a()}async withSuspendedEvictsAndDeletes(e){this.#s=!0;try{return await e()}finally{this.#s=!1;for(let t of this.#o)this.#n.get(t)===0&&this.#c(t);this.#a()}}};function Ov(e){return e.indexName!==void 0}function Hl(e){return typeof e=="string"?[e]:e}function sE(e){if(!e)return{};let t,n,r,i;return e.start&&({key:t,exclusive:n}=e.start,e.indexName?typeof t=="string"?i=t:(i=t[0],r=t[1]):r=t),{prefix:e.prefix,startSecondaryKey:i,startKey:r,startExclusive:n,limit:e.limit,indexName:e.indexName}}var Hv=class extends Error{constructor(){super("Transaction is closed")}};function oi(e){if(e.closed)throw new Hv}function zv(e){return e.closed?Promise.reject(new Hv):void 0}var oE=class{#e;#t;#n;#r;constructor(e,t,n,r){this.#e=e,this.#t=t,this.#n=n,this.#r=r}[Symbol.asyncIterator](){return this.values()}values(){return new fa(this.#i(e=>e[1]))}keys(){return new fa(this.#i(e=>e[0]))}entries(){return new fa(this.#i(e=>[e[0],e[1]]))}toArray(){return this.values().toArray()}#i(e){return aE(e,this.#e,this.#t,this.#n,this.#r)}},fa=class{#e;constructor(e){this.#e=e}next(){return this.#e.next()}[Symbol.asyncIterator](){return this.#e[Symbol.asyncIterator]()}toArray(){return pv(this.#e)}};async function*aE(e,t,n,r,i){oi(r);let{limit:s=1/0}=n,{prefix:o=""}=n,a=n.start?.exclusive,l=Ov(n);for await(let u of t){let c=u[0];if(!(l?c[0]:c).startsWith(o))return;if(a){if(a=!0,l){if(lE(c,n.start.key))continue}else if(uE(c,n.start.key))continue}if(yield e(u),--s===0&&!l){i(c);return}}}function lE(e,t){let[n,r]=Hl(t),[i,s]=Hl(e);return i!==n?!1:r===void 0?!0:s===r}function uE(e,t){return e===t}function cE(e){let{prefix:t,start:n}=e,r="";if(t!==void 0&&(r=rh(t,void 0)),!n)return r;let{key:i}=n,[s,o]=Hl(i),a=rh(s,o);return ac(a,r)?a:r}var fE=0,Av=class{clientID;dbtx;d;location;environment;constructor(e,t,n,r="openReadTransaction"){this.clientID=e,this.dbtx=t,this.d=n.withContext(r).withContext("txid",fE++),this.environment="client",this.location="client"}get(e){return zv(this.dbtx)||this.dbtx.get(e)}async has(e){return oi(this.dbtx),this.dbtx.has(e)}async isEmpty(){return oi(this.dbtx),this.dbtx.isEmpty()}scan(e){return bv(e,this.dbtx,hE)}};function hE(e){}function bv(e,t,n){let r=pE(t,e);return vE(r,e??{},t,n)}var dE=class{#e=new Set;#t=[];#n;constructor(e){this.#n=e}get environment(){return this.#n.location}get location(){return this.#n.location}get clientID(){return this.#n.clientID}isEmpty(){return this.#t.push({options:{}}),this.#n.isEmpty()}get(e){return this.#e.add(e),this.#n.get(e)}has(e){return this.#e.add(e),this.#n.has(e)}scan(e){let t={options:sE(e),inclusiveLimitKey:void 0};return this.#t.push(t),bv(e,this.#n.dbtx,n=>{t.inclusiveLimitKey=n})}get keys(){return this.#e}get scans(){return this.#t}},jv=class extends Av{reason;mutationID;constructor(e,t,n,r,i,s="openWriteTransaction"){super(e,r,i,s),this.mutationID=t,this.reason=n}put(e,t){return this.set(e,t)}async set(e,t){oi(this.dbtx),await this.dbtx.put(this.d,e,Oe(t))}del(e){return zv(this.dbtx)??this.dbtx.del(this.d,e)}};function pE(e,t){return t&&Ov(t)?gE(e,t):e.map.scan(mE(t))}function mE(e){if(!e)return"";let{prefix:t="",start:n}=e;return n&&ac(n.key,t)?n.key:t}function vE(e,t,n,r){return new oE(e,t,n,r)}async function*gE(e,t){let n=e.getMapForIndex(t.indexName);for await(let r of n.scan(cE(t)))yield[So(r[0]),r[1]]}async function Fv(e,t,n,r,i,s,o){let a=e.meta,l=a.mutatorName;wo(a)&&R(a.clientID===s,"mutationClientID must match clientID of LocalMeta");let u=r[l];u||i.error?.(`Cannot rebase unknown mutator ${l}`);let c=u||(async()=>{}),d=a.mutatorArgsJSON,f=await(await ue(n,t)).getNextMutationID(s,t);if(f!==a.mutationID)throw new Error(`Inconsistent mutation ID: original: ${a.mutationID}, next: ${f} - mutationClientID: ${s} mutatorName: ${l}`);o>=5&&uv(a);let v=await kv(n,l,d,e.chunk.hash,t,a.timestamp,s,o),y=new jv(s,await v.getMutationID(),"rebase",v,i);return await c(y,d),v}async function Uv(e,t,n,r,i,s,o){return(await Fv(e,t,n,r,i,s,o)).putCommit()}async function yE(e,t,n,r,i,s,o,a){return(await Fv(e,t,n,i,s,o,a)).commit(r)}function wE(e,t){return ge(e,async n=>{let r=await n.getHead(t);if(r===void 0)throw new Error(`No head found for ${t}`);return r})}function kE(e){async function t(n,r){let[i,s]=await pm(e.pushURL,e.auth,r,n);if(!i)return{httpRequestInfo:s};let o={httpRequestInfo:s},a;try{a=await i.json()}catch{return o}return(Ze(a)||et(a))&&(o.response=a),o}return Vv.add(t),t}var Vv=new WeakSet;function SE(e){return Vv.has(e)}function Bv(e){return e instanceof Error?e:new Error(String(e))}async function Wv(e,t,n){for(let r of n)switch(r.op){case"put":{await t.put(e,r.key,Oe(r.value));break}case"del":await t.del(e,r.key);break;case"clear":await t.clear();break}}var Gv=class extends Error{name="PullError";causedBy;constructor(e){super("Failed to pull"),this.causedBy=e}},ai="sync",IE=0,Kv=1;function EE(e){return e.pullVersion===Kv}async function CE(e,t,n,r,i,s,o,a,l=!0){let[u,c]=await ge(s,async g=>{let I=await g.getHead(re);if(!I)throw new Error("Internal no main head found");let h=await ct(I,g),p=h.meta.cookieJSON;return[await h.getMutationID(t,g),p]}),d={profileID:e,clientID:t,cookie:c,lastMutationID:u,pullVersion:IE,schemaVersion:n},{response:f,httpRequestInfo:v}=await Jv(a,r,d,i);if(!f)return{httpRequestInfo:v,syncHead:ve};if(!l||vm(f))return{httpRequestInfo:v,pullResponse:f,syncHead:ve};let y=await xE(a,s,c,f,t,o);if(y.type===2)throw new Error("Overlapping sync");return{httpRequestInfo:v,pullResponse:f,syncHead:y.type===0?y.syncHead:ve}}async function Qv(e,t,n,r,i,s,o,a,l,u=!0){let c=await ge(o,async g=>{let I=await g.getHead(re);if(!I)throw new Error("Internal no main head found");let h=(await ct(I,g)).meta;return ko(h),h.cookieJSON}),d={profileID:e,clientGroupID:n,cookie:c,pullVersion:Kv,schemaVersion:r},{response:f,httpRequestInfo:v}=await Jv(l,i,d,s);if(!f)return{httpRequestInfo:v,syncHead:ve};if(!u||vm(f))return{httpRequestInfo:v,pullResponse:f,syncHead:ve};let y=await qv(l,o,c,f,t,a);return{httpRequestInfo:v,pullResponse:f,syncHead:y.type===0?y.syncHead:ve}}async function Jv(e,t,n,r){e.debug?.("Starting pull...");let i=Date.now();try{let s=await t(n,r);return e.debug?.(`...Pull ${s.response?"complete":"failed"} in `,Date.now()-i,"ms"),EE(n)?Ok(s):Hk(s),s}catch(s){throw new Gv(Bv(s))}}function xE(e,t,n,r,i,s){return nr(t,async o=>{R(s<=4);let a=o,l=await a.getHead(re);if(l===void 0)throw new Error("Main head disappeared");let u=await ct(l,a),[c,d]=Ml(u,i);if(!St(n,d))return{type:2};if(r.lastMutationID<c)throw new Error(zl("lastMutationID",r.lastMutationID,c));let f=Oe(r.cookie??null);if(r.patch.length===0&&r.lastMutationID===c&&St(f,d))return{type:1};let v=await cc(l,a),y;for(let h of v)if(await h.getMutationID(i,a)<=r.lastMutationID){y=h;break}if(!y)throw new Error("Internal invalid chain");let g=await fI(u.chunk.hash,r.lastMutationID,f,o,pc(y,o,s),i,s);await Wv(e,g,r.patch);let I=new ut(a,s,y.valueHash);for await(let h of g.map.diff(I))await Tl(e,g.indexes,h.key,()=>Promise.resolve(h.oldValue),h.newValue);return{type:0,syncHead:await g.commit(ai)}})}function zl(e,t,n){return`Received ${e} ${t} is < than last snapshot ${e} ${n}; ignoring client view`}function qv(e,t,n,r,i,s){return nr(t,async o=>{let a=o,l=await a.getHead(re);if(l===void 0)throw new Error("Main head disappeared");let u=await ct(l,a),c=u.meta;ko(c);let d=c.cookieJSON;if(!St(n,d))return e.debug?.("handlePullResponse: cookie mismatch, pull response is not applicable"),{type:2};for(let[y,g]of Object.entries(r.lastMutationIDChanges)){let I=c.lastMutationIDs[y];if(I!==void 0&&g<I)throw new Error(zl(`${y} lastMutationID`,g,I))}let f=Oe(r.cookie);if(Yu(f,d)<0)throw new Error(zl("cookie",f,d));if(r.patch.length===0&&St(f,d)&&!DE(r.lastMutationIDChanges,c.lastMutationIDs))return{type:1};let v=await hI(u.chunk.hash,{...c.lastMutationIDs,...r.lastMutationIDChanges},f,o,i,s);return await Wv(e,v,r.patch),{type:0,syncHead:await v.commit(ai)}})}function _E(e,t,n,r,i,s){return nr(e,async o=>{let a=o,l=await a.getHead(ai);if(l===void 0)throw new Error("Missing sync head");if(l!==n)throw t.error?.("maybeEndPull, Wrong sync head. Expecting:",n,"got:",l),new Error("Wrong sync head");let u=await ct(l,a),c=await a.getHead(re);if(c===void 0)throw new Error("Missing main head");let d=await ct(c,a),{meta:f}=u,v=f.basisHash;if(u===null)throw new Error("Sync snapshot with no basis");if(v!==d.chunk.hash)throw new Error("Overlapping syncs");let y=await ue(l,a),g=[],I=await iv(c,a);for(let m of I){let w=r;yi(m)&&(w=m.meta.clientID),await m.getMutationID(w,a)>await y.getMutationID(w,a)&&g.push(m)}g.reverse();let h=new hc;if(g.length>0)return{syncHead:l,replayMutations:g,diffs:h};let p=await ue(c,a);if(i.shouldComputeDiffs()){let m=new ut(a,s,p.valueHash),w=new ut(a,s,y.valueHash),k=await si(m,w);h.set("",k),await wv(p,y,a,h,i,s)}if(await Promise.all([o.setHead(re,l),o.removeHead(ai)]),await o.commit(),t.debug){let[m,w]=Ml(d,r),[k,S]=Ml(u,r);t.debug("Successfully pulled new snapshot with lastMutationID:",k,"(prev:",m,"), cookie: ",S,"(prev:",w,"), sync head hash:",l,", main head hash:",c,", valueHash:",y.valueHash,"(prev:",d.valueHash)}return{syncHead:l,replayMutations:[],diffs:h}})}function DE(e,t){for(let[n,r]of Object.entries(e))if(r!==t[n])return!0;return!1}var ha=[],Yv=H.unknown().chain(e=>{let t=qu(e,ha)?pi(e):Fu({message:"Not a JSON value",path:ha.slice()});return ha.length=0,t});function ME(e){ie(e),Xu(e.httpRequestInfo),e.response!==void 0&&PE(e.response)}function PE(e){Ze(e)||Mk(e)}var Xv=class extends Error{name="PushError";causedBy;constructor(e){super("Failed to push"),this.causedBy=e}},Al=0,Js=1,$E=qt({id:H.number(),name:H.string(),args:Yv,timestamp:H.number()}),NE=qt({id:H.number(),name:H.string(),args:Yv,timestamp:H.number(),clientID:Sv});H.object({pushVersion:H.literal(0),schemaVersion:H.string(),profileID:H.string(),clientID:Sv,mutations:H.array($E)});H.object({pushVersion:H.literal(1),schemaVersion:H.string(),profileID:H.string(),clientGroupID:mc,mutations:H.array(NE)});function RE(e){return{id:e.mutationID,name:e.mutatorName,args:e.mutatorArgsJSON,timestamp:e.timestamp}}function TE(e){return{id:e.mutationID,name:e.mutatorName,args:e.mutatorArgsJSON,timestamp:e.timestamp,clientID:e.clientID}}async function kc(e,t,n,r,i,s,o,a,l){let u=await ge(t,async v=>{let y=await v.getHead(re);if(!y)throw new Error("Internal no main head");return iv(y,v)});if(u.length===0)return;u.reverse();let c;if(l===Js){let v=[];for(let y of u)if(yi(y))v.push(TE(y.meta));else throw new Error("Internal non local pending commit");R(i),c={profileID:r,clientGroupID:i,mutations:v,pushVersion:Js,schemaVersion:a}}else{R(l===Al);let v=[];for(let y of u)if(nv(y))v.push(RE(y.meta));else throw new Error("Internal non local pending commit");c={profileID:r,clientID:s,mutations:v,pushVersion:Al,schemaVersion:a}}n.debug?.("Starting push...");let d=Date.now(),f=await LE(o,c,e);return n.debug?.("...Push complete in ",Date.now()-d,"ms"),f}async function LE(e,t,n){try{let r=await e(t,n);return ME(r),r}catch(r){throw new Xv(Bv(r))}}var Zv=10*2**20,OE=class{#e=!1;#t;constructor(e){this.#t=e}async recoverMutations(e,t,n,r,i,s){let{lc:o,enableMutationRecovery:a,isPushDisabled:l,delegate:u}=this.#t;if(!a||this.#e||!u.online||u.closed||l())return!1;let c="Recovering mutations.";o.debug?.("Start:",c);try{this.#e=!0,await t,await eg(r,this.#t,n,e);for(let d of Object.values(await i.getDatabases())){if(u.closed)return o.debug?.("Exiting early due to close:",c),!0;if(d.replicacheName===u.name&&d.name!==u.idbName)switch(d.replicacheFormatVersion){case 4:case 5:case 6:case 7:await zE(d,this.#t,void 0,s)}}}catch(d){Ii(d,o,c,u)}finally{o.debug?.("End:",c),this.#e=!1}return!0}};function Ii(e,t,n,r){r.closed?t.debug?.(`Mutation recovery error likely due to close during:
${n}
Error:
`,e):t.error?.(`Mutation recovery error during:
${n}
Error:
`,e)}async function HE(e,t,n,r,i,s){R(r.replicacheFormatVersion===4),ih(e);let{delegate:o,lc:a,wrapInOnlineCheck:l,wrapInReauthRetries:u,isPushDisabled:c,isPullDisabled:d}=i,f=o.clientID;if(f===t||e.lastServerAckdMutationID>=e.mutationID)return;let v=`Recovering mutations for ${t}.`;a.debug?.("Start:",v);let y=new wc(n,Zv,Mm,Et);try{if(await ne(y,w=>w.setHead(re,e.headHash)),c()){a.debug?.(`Cannot recover mutations for client ${t} because push is disabled.`);return}let{pusher:g}=o,I="recoveringMutationsPush";if(!await l(async()=>{let{result:w}=await u(async(k,S)=>{Ju(y);let E=await kc(k,y,S,await o.profileID,void 0,t,g,r.schemaVersion,Al);return{result:E,httpRequestInfo:E?.httpRequestInfo}},I,a);return!!w&&w.httpRequestInfo.httpStatusCode===200},I)){a.debug?.(`Failed to recover mutations for client ${t} due to a push error.`);return}if(d()){a.debug?.(`Cannot confirm mutations were recovered for client ${t} because pull is disabled.`);return}let{puller:h}=o,p="recoveringMutationsPull",m;if(!await l(async()=>{let{result:w}=await u(async(k,S)=>{let E=await CE(await o.profileID,t,r.schemaVersion,h,k,y,s,S,!1);return{result:E,httpRequestInfo:E.httpRequestInfo}},p,a);return{pullResponse:m}=w,!!m&&w.httpRequestInfo.httpStatusCode===200},p)){a.debug?.(`Failed to recover mutations for client ${t} due to a pull error.`);return}return a.debug&&m&&(Ze(m)?a.debug?.(`Client ${f} cannot recover mutations for client ${t}. The client no longer exists on the server.`):et(m)?a.debug?.(`Version is not supported on the server. versionType: ${m.versionType}. Cannot recover mutations for client ${t}.`):a.debug?.(`Client ${f} recovered mutations for client ${t}.  Details`,{mutationID:e.mutationID,lastServerAckdMutationID:e.lastServerAckdMutationID,lastMutationID:m.lastMutationID})),await ne(n,async w=>{let k=await xt(w),S=k.get(t);if(!S)return k;ih(S);let E=async M=>(await rr(M,w),M);if(Ze(m)||et(m)){let M=new Map(k);return M.delete(t),E(M)}if(R(m),S.lastServerAckdMutationID>=m.lastMutationID)return k;let _=new Map(k).set(t,{...S,lastServerAckdMutationID:m.lastMutationID});return E(_)})}catch(g){Ii(g,a,v,o)}finally{await y.close(),a.debug?.("End:",v)}}async function zE(e,t,n,r){let i=r(e.name),s=new ic(i,qe,Et);try{await eg(e,t,s,n)}finally{await s.close()}}function eg(e,t,n,r){return e.replicacheFormatVersion>=5?bE(e,t,n):AE(e,t,n,r)}async function AE(e,t,n,r){let{delegate:i,lc:s}=t,o=`Recovering mutations from db ${e.name}.`;s.debug?.("Start:",o);try{let a=Lm(e.replicacheFormatVersion),l=r||await ge(n,c=>xt(c)),u=new Set;for(;l;){let c;for(let[d,f]of l){if(i.closed){s.debug?.("Exiting early due to close:",o);return}if(!u.has(d)&&(u.add(d),c=await HE(f,d,n,e,t,a),c))break}l=c}}catch(a){Ii(a,s,o,i)}s.debug?.("End:",o)}async function bE(e,t,n){let{delegate:r,lc:i}=t,s=`Recovering mutations from db ${e.name}.`;i.debug?.("Start:",s);try{let o=Lm(e.replicacheFormatVersion),a=await ge(n,u=>Yt(u)),l=new Set;for(;a;){let u;for(let[c,d]of a){if(r.closed){i.debug?.("Exiting early due to close:",s);return}if(!l.has(c)&&(l.add(c),u=await jE(d,c,n,e,t,o),u))break}a=u}}catch(o){Ii(o,i,s,r)}i.debug?.("End:",s)}function lh(e){return Ze(e)||et(e)}async function uh(e,t,n,r,i){Ze(r)?e.debug?.(`Client group ${t} cannot recover mutations for client group ${n}. The client group is unknown on the server. Marking it as disabled.`):et(r)&&e.debug?.(`Client group ${t} cannot recover mutations for client group ${n}. The client group's version is not supported on the server. versionType: ${r.versionType}. Marking it as disabled.`),await ne(i,s=>Bm(n,s))}async function jE(e,t,n,r,i,s){R(r.replicacheFormatVersion>=5);let{delegate:o,lc:a,wrapInOnlineCheck:l,wrapInReauthRetries:u,isPushDisabled:c,isPullDisabled:d}=i,f=await i.clientGroupIDPromise;if(Ju(f),f===t)return;let v,y=!0;for(let[h,p]of Object.entries(e.mutationIDs))if(!e.lastServerAckdMutationIDs[h]||e.lastServerAckdMutationIDs[h]<p){v=h,y=!1;break}if(y)return;if(e.disabled){a.debug?.(`Not recovering mutations for client group ${t} because group is disabled.`);return}let g=`Recovering mutations for client group ${t}.`;a.debug?.("Start:",g);let I=new wc(n,Zv,Mm,Et);try{if(await ne(I,S=>S.setHead(re,e.headHash)),c()){a.debug?.(`Cannot recover mutations for client group ${t} because push is disabled.`);return}let{pusher:h}=o,p="recoveringMutationsPush";if(!await l(async()=>{let{result:S}=await u(async(_,M)=>{R(v),R(I);let D=await kc(_,I,M,await o.profileID,t,v,h,r.schemaVersion,Js);return{result:D,httpRequestInfo:D?.httpRequestInfo}},p,a);if(!S)return!1;let E=S.response;return lh(E)?(await uh(a,f,t,E,n),!1):S.httpRequestInfo.httpStatusCode===200},p)){a.debug?.(`Failed to recover mutations for client ${t} due to a push error.`);return}if(d()){a.debug?.(`Cannot confirm mutations were recovered for client ${t} because pull is disabled.`);return}let{puller:m}=o,w="recoveringMutationsPull",k;if(!await l(async()=>{let{result:S}=await u(async(_,M)=>{R(v);let D=await Qv(await o.profileID,v,t,r.schemaVersion,m,_,I,s,M,!1);return{result:D,httpRequestInfo:D.httpRequestInfo}},w,a),{pullResponse:E}=S;return lh(E)?(await uh(a,f,t,E,n),!1):!E||S.httpRequestInfo.httpStatusCode!==200?!1:(k=E,!0)},w)){a.debug?.(`Failed to recover mutations for client ${t} due to a pull error.`);return}return R(k),a.debug?.(`Client group ${f} recovered mutations for client group ${t}.  Details`,{mutationIDs:e.mutationIDs,lastServerAckdMutationIDs:e.lastServerAckdMutationIDs,lastMutationIDChanges:k.lastMutationIDChanges}),await ne(n,async S=>{let E=await Yt(S),_=E.get(t);if(!_)return E;R(k);let M={},D=!1;for(let[Be,We]of Object.entries(k.lastMutationIDChanges))(_.lastServerAckdMutationIDs[Be]??0)<We&&(M[Be]=We,D=!0);if(!D)return E;let Q=new Map(E).set(t,{..._,lastServerAckdMutationIDs:{..._.lastServerAckdMutationIDs,...M}});return await bm(Q,S),Q})}catch(h){Ii(h,a,g,o)}finally{await I.close(),a.debug?.("End:",g)}}var FE=class{name;onmessage=null;onmessageerror=null;constructor(e){this.name=e}addEventListener(){}removeEventListener(){}dispatchEvent(){return!1}close(){}postMessage(){}},bl=typeof BroadcastChannel>"u"?FE:BroadcastChannel;function UE(e){return`replicache-new-client-group:${e}`}function VE(e){return`replicache-new-client-group-v1:${e}`}function BE(e){return typeof e=="object"&&typeof e.clientGroupID=="string"&&typeof e.idbName=="string"}function WE(e,t,n,r,i,s,o){if(n.aborted)return;let a=new bl(VE(e));if(i){a.postMessage({clientGroupID:r,idbName:t});let l=new bl(UE(e));l.postMessage([r]),l.close()}a.onmessage=async l=>{let{data:u}=l;if(BE(u)){let{clientGroupID:c,idbName:d}=u;if(c!==r)if(d===t)await ge(o,async f=>await go(c,f)!==void 0)&&s();else{s();return}}},n.addEventListener("abort",()=>a.close())}function GE(e){return`replicache-on-persist:${e}`}function KE(e){ie(e),G(e.clientGroupID),G(e.clientID)}function QE(e,t,n){if(t.aborted)return()=>{};let r=new bl(GE(e));return r.onmessage=i=>{let{data:s}=i;KE(s),n({clientGroupID:s.clientGroupID,clientID:s.clientID})},t.addEventListener("abort",()=>{r.close()}),i=>{t.aborted||(r.postMessage(i),n(i))}}async function JE(e){let t=await rc(re,e);return(await sv(t,e)).map(n=>({id:n.meta.mutationID,name:n.meta.mutatorName,args:n.meta.mutatorArgsJSON,clientID:n.meta.clientID})).reverse()}var qE=7*24*60*60*1e3,YE=5*60*1e3,ch;function XE(e,t,n,r){vi("ClientGC",()=>(ch=ZE(e,t),ch),()=>YE,n,r)}function ZE(e,t){return ne(t,async n=>{let r=Date.now(),i=await xt(n),s=Array.from(i).filter(([a,l])=>a===e||r-l.heartbeatTimestampMs<=qE);if(s.length===i.size)return i;let o=new Map(s);return await rr(o,n),o})}var eC=5*60*1e3,fh;function tC(e,t,n){vi("ClientGroupGC",()=>(fh=nC(e),fh),()=>eC,t,n)}function nC(e){return ne(e,async t=>{let n=await xt(t),r=new Set;for(let s of n.values())gc(s),r.add(s.clientGroupID);let i=new Map;for(let[s,o]of await Yt(t))(r.has(s)||Vm(o))&&i.set(s,o);return await bm(i,t),i})}var rC=60*1e3,hh;function iC(e,t,n,r,i){vi("Heartbeat",async()=>{hh=sC(e,t);try{return await hh}catch(s){if(s instanceof Ft){n();return}throw s}},()=>rC,r,i)}function sC(e,t){return ne(t,async n=>{let r=await xt(n),i=r.get(e);if(!i)throw new Ft(e);let s={...i,heartbeatTimestampMs:Date.now()},o=new Map(r).set(e,s);return await rr(o,n),o})}var tg=class{#e=new Set;#t;constructor(e){this.#t=e}async visit(e){if(this.#e.has(e))return;this.#e.add(e);let t=await this.#t.mustGetChunk(e);await this.visitChunk(t)}async visitChunk(e){await Promise.all(e.meta.map(t=>this.visit(t)))}},oC=class extends tg{#e=new Map;#t;constructor(e){super(e),this.#t=e}get gatheredChunks(){return this.#e}visit(e){return this.#t.isMemOnlyChunkHash(e)?super.visit(e):It}visitChunk(e){return this.#e.set(e.hash,e),super.visitChunk(e)}};async function aC(e,t,n,r,i,s,o,a=()=>Promise.resolve()){if(s())return;let[l,u,c]=await ge(r,async g=>{await kI(t,g);let I=await $v(t,g);R(I,`No main client group for clientID: ${t}`);let[,h]=await dh(g,I),p=await h.getMutationID(t,g),m=await Or(h,g);return un(m),[p,m,I]});if(s())return;let[d,f,v]=await ge(n,async g=>{let I=await fc(re,g),h=await ov(I,{[t]:l||0},g),p=await Or(I,g);un(p);let m;if(Pl(p,u)>0){await a();let w=p.chunk.hash,k=new oC(g);await k.visit(w),m=k.gatheredChunks}return[h,p,m]});if(s())return;let y=!1;await ne(r,async g=>{let[I,h]=await dh(g,c),p=h.chunk.hash,m={...I.mutationIDs},{lastServerAckdMutationIDs:w}=I;if(v){let S=await Ll(t,g);gc(S);let E=await Or(h,g);if(un(E),Pl(f,E)>0){y=!0,await Promise.all(Array.from(v.values(),M=>g.putChunk(M))),await Ol(t,{...S,persistHash:f.chunk.hash},g),p=f.chunk.hash;let _=await sv(I.headHash,g);w=f.meta.lastMutationIDs,m={...w},p=await ph(_,p,g,i,m,e,o)}}p=await ph(d,p,g,i,m,e,o);let k={...I,headHash:p,mutationIDs:m,lastServerAckdMutationIDs:w};await oc(c,k,g)}),v&&y&&await ne(n,g=>g.chunksPersisted([...v.keys()]))}async function dh(e,t){let n=await go(t,e);return R(n,`No client group for clientGroupID: ${t}`),[n,await ue(n.headHash,e)]}async function ph(e,t,n,r,i,s,o){for(let a=e.length-1;a>=0;a--){let l=e[a],{meta:u}=l,c=await ue(t,n);await l.getMutationID(u.clientID,n)>await c.getMutationID(u.clientID,n)&&(i[u.clientID]=u.mutationID,t=(await Uv(l,n,t,r,s,u.clientID,o)).chunk.hash)}return t}var lC=class extends tg{#e=new Map;#t=0;#n;#r;#i;constructor(e,t,n,r=ln){super(e),this.#n=t,this.#r=n,this.#i=r}get gatheredChunks(){return this.#e}visit(e){return this.#t>=this.#r||this.#n.isCached(e)?It:super.visit(e)}visitChunk(e){if(this.#t<this.#r){let t=this.#i(e);this.#e.set(e.hash,{chunk:e,size:t}),this.#t+=t}return super.visitChunk(e)}},uC=5*2**20,cC=300;async function fC(e,t,n,r,i,s,o,a){if(o())return;let l=await ge(t,d=>zS(re,d));un(l);let u=await t.withSuspendedSourceCacheEvictsAndDeletes(async()=>{let d=await ne(n,async h=>{let p=await xI(r,h);if(!p)throw new Ft(r);let m=p.headHash,w=await(await ue(m,h)).getMutationID(r,h),k=await Ll(r,h);gc(k);let S=await ct(m,h);if(un(S),mh(l,S,m))return;let E=new lC(h,t,uC);await E.visit(m);let{gatheredChunks:_}=E,M=new Set(k.refreshHashes);M.add(m);let D={...k,refreshHashes:[...M]};return await Ol(r,D,h),[m,S,w,_,k.refreshHashes]});if(o()||!d)return{type:"aborted"};if(await ii(cC),o())return{type:"aborted"};let[f,v,y,g,I]=d;return ne(t,async h=>{let p=await fc(re,h),m=await Or(p,h);if(un(m),mh(m,v,f))return{type:"aborted",refreshHashesForRevert:I};let w=await ov(p,{[r]:y},h),k=[];for(let{chunk:M,size:D}of g.values())k.push(h.putChunk(M,D));await Promise.all(k);let S=f;for(let M=w.length-1;M>=0;M--)S=(await Uv(w[M],h,S,i,e,w[M].meta.clientID,a)).chunk.hash;let E=await ue(S,h),_=await cI(p,E,h,s,a);return await h.setHead(re,S),{type:"complete",newMemdagHeadHash:S,diffs:_,newPerdagClientHeadHash:f}})});if(o())return;let c=d=>ne(n,async f=>{let v={...await Ll(r,f),refreshHashes:d};await Ol(r,v,f)});if(u.type==="aborted"){u.refreshHashesForRevert&&await c(u.refreshHashesForRevert);return}return await c([u.newPerdagClientHeadHash]),[u.newMemdagHeadHash,u.diffs]}function mh(e,t,n){let r=Pl(e,t);return r>0||r===0&&n===t.chunk.hash}function hC(e){return new Promise(t=>{typeof requestIdleCallback=="function"?requestIdleCallback(()=>t(),{timeout:e}):setTimeout(()=>t(),e)})}var vh=class{#e;#t;#n;#r;#i;#s=void 0;#o=void 0;#a=Promise.resolve();#u=Promise.resolve();constructor(e,t,n,r,i=hC){this.#e=e,this.#t=t,this.#n=n,this.#r=r,this.#i=i,this.#r.addEventListener("abort",()=>{let s=new tr("Aborted");this.#o?.reject(s),this.#s?.reject(s),this.#o=void 0,this.#s=void 0})}schedule(){return this.#r.aborted?Promise.reject(new tr("Aborted")):this.#s?this.#s.promise:(this.#s=z(),this.#f(),this.#s.promise)}async#f(){try{await this.#a}catch{}if(await this.#u,!!this.#s&&(await this.#i(this.#t),!!this.#s)){this.#u=dC(this.#n,this.#r),this.#o=this.#s,this.#s=void 0;try{this.#a=this.#e(),await this.#a,this.#o?.resolve()}catch(e){this.#o?.reject(e)}this.#o=void 0}}};async function dC(e,t){try{await ii(e,t)}catch(n){R(n instanceof tr)}}function pC(e,t,n){let r=setInterval(e,t);n.addEventListener("abort",()=>{clearInterval(r)})}async function gh(e,t,n,r){let i=await fetch(t,{method:e,body:n,headers:r});if(!i.ok)throw new Error(`Got ${i.status} fetching ${t}: ${await i.text()}`);return i}var mC=new Set,yh=Symbol(),vC=class{#e;#t;#n=yh;#r=mC;#i=[];onError;onDone;#s;constructor(e,t,n,r,i=St){this.#e=e,this.#t=t,this.onError=n,this.onDone=r,this.#s=i}hasIndexSubscription(e){for(let t of this.#i)if(t.options.indexName===e)return!0;return!1}invoke(e,t,n){return this.#e(e)}matches(e){for(let[t,n]of e)if(wC(this.#r,this.#i,t,n))return!0;return!1}updateDeps(e,t){this.#r=e,this.#i=t}onData(e){(this.#n===yh||!this.#s(this.#n,e))&&(this.#n=e,this.#t(e))}},gC=class{#e;#t;#n;#r;onError=void 0;onDone=void 0;constructor(e,t){this.#e=e,this.#t=t.prefix??"",this.#n=t.indexName,this.#r=t.initialValuesInFirstDiff??!1}hasIndexSubscription(e){return this.#n===e}onData(e){e!==void 0&&this.#e(e)}invoke(e,t,n){let r=async(i,s,o,a)=>{let l;if(t===0){if(!this.#r)return;R(n===void 0);let d=[];for await(let f of e.scan({prefix:s,indexName:i}).entries())d.push({op:"add",key:f[0],newValue:f[1]});l=d}else{R(n);let d=n.get(i??"")??[];l=a(d)}let u=[],{length:c}=l;for(let d=ng(l,s,o);d<c&&o(l[d]).startsWith(s);d++)u.push(l[d]);return t===0||u.length>0?u:void 0};return this.#n?r(this.#n,this.#t,i=>i.key[0],i=>wh(i,So)):r(void 0,this.#t,i=>i.key,i=>wh(i,s=>s))}matches(e){let t=e.get(this.#n??"");return t===void 0?!1:EC(t,this.#t,this.#n)}updateDeps(e,t){}};function wh(e,t){return e.map(n=>{let r=t(n.key);switch(n.op){case"add":return{op:"add",key:r,newValue:n.newValue};case"change":return{op:"change",key:r,oldValue:n.oldValue,newValue:n.newValue};case"del":return{op:"del",key:r,oldValue:n.oldValue}}})}var yC=class{#e=new Set;#t=new Set;#n;#r;hasPendingSubscriptionRuns=!1;constructor(e,t){this.#n=e,this.#r=t}#i(e){return this.#e.add(e),this.#o(e),()=>this.#e.delete(e)}addSubscription(e,{onData:t,onError:n,onDone:r,isEqual:i}){let s=new vC(e,t,n,r,i);return this.#i(s)}addWatch(e,t){let n=new gC(e,t??{});return this.#i(n)}clear(){for(let e of this.#e)e.onDone?.();this.#e.clear()}async fire(e){let t=IC(this.#e,e);await this.#s(t,1,e)}async#s(e,t,n){let r=[...e];if(r.length===0)return;let i=await this.#n(s=>Promise.allSettled(r.map(async o=>{let a=new dE(s);try{return await o.invoke(a,t,n)}finally{o.updateDeps(a.keys,a.scans)}})));for(let s=0;s<r.length;s++){let o=r[s],a=i[s];a.status==="fulfilled"?o.onData(a.value):o.onError?o.onError(a.reason):this.#r.error?.("Error in subscription body:",a.reason)}}async#o(e){if(this.#t.add(e),!this.hasPendingSubscriptionRuns){this.hasPendingSubscriptionRuns=!0,await Promise.resolve(),this.hasPendingSubscriptionRuns=!1;let t=[...this.#t];this.#t.clear(),await this.#s(t,0,void 0)}}shouldComputeDiffs(){return this.#e.size>0}shouldComputeDiffsForIndex(e){for(let t of this.#e)if(t.hasIndexSubscription(e))return!0;return!1}};function wC(e,t,n,r){if(n===""){for(let i of r)if(e.has(i.key))return!0}for(let i of t)if(kC(i,n,r))return!0;return!1}function kC(e,t,n){for(let r of n)if(SC(e,t,r.key))return!0;return!1}function SC(e,t,n){let{indexName:r="",limit:i,prefix:s,startKey:o,startExclusive:a,startSecondaryKey:l}=e.options;if(t!==r)return!1;if(!r)return i!==void 0&&i<=0?!1:!s&&!o?!0:!(s&&(!n.startsWith(s)||kh(e,n))||o&&(a&&la(n,o)||aa(n,o)||kh(e,n)));if(!s&&!o&&!l)return!0;let[u,c]=So(n);return!(s&&!u.startsWith(s)||l&&(a&&la(u,l)||aa(u,l))||o&&(a&&la(c,o)||aa(c,o)))}function kh(e,t){let{inclusiveLimitKey:n}=e;return e.options.limit!==void 0&&n!==void 0&&ac(t,n)}function*IC(e,t){for(let n of e)n.matches(t)&&(yield n)}function EC(e,t,n){if(t==="")return!0;let r=n?s=>So(s.key)[0]:s=>s.key,i=ng(e,t,r);return i<e.length&&r(e[i]).startsWith(t)}function ng(e,t,n){return Gm(e.length,r=>gi(t,n(e[r])))}var da="";function CC(){if(da===""){let e=new Uint8Array(4);crypto.getRandomValues(e),da=Array.from(e,t=>t.toString(16)).join("")}return da}var pa=new Map;function Sh(e){let t=pa.get(e);return t?(t++,pa.set(e,t)):(pa.set(e,0),t=0),`${e}-${CC()}-${t}`}var xC="14.2.2",_C=401,DC=100*2**20,MC=5*60*1e3,PC=24*60*60*1e3,$C=5*60*1e3;function NC(e,t){return RC(e,t,7)}function RC(e,t,n){let r=`rep:${e}:${n}`;return t?`${r}:${t}`:r}var TC=8,LC=1e3,OC=1e3,HC=500,zC=500,Bi=()=>{},AC={type:"NewClientGroup"},bC=class{pullURL;pushURL;auth;name;#e;#t;#n=!1;#r;#i=0;get idbName(){return NC(this.name,this.schemaVersion)}schemaVersion;get#s(){return{name:this.idbName,replicacheName:this.name,replicacheFormatVersion:7,schemaVersion:this.schemaVersion}}#o=!1;#a=!0;#u=vo();#f;#c;#p;#m;#D;#_;#S=null;#v={};mutate;#C=0;#R=0;#M;#g;pullInterval;pushDelay;#T;puller;pusher;#I;#d;#h;#P;#l;#w=new AbortController;#$=!1;#L;#y;#H;#E=new vh(()=>this.#Z(),LC,HC,this.#w.signal);#x;#U=new vh(()=>this.#b(),OC,zC,this.#w.signal);#k;get requestOptions(){return this.#T}onSync=null;onClientStateNotFound=Ih;onUpdateNeeded=Ih;getAuth=null;constructor(e){let{name:t,logLevel:n="info",logSinks:r=[ri],pullURL:i="",auth:s,pushDelay:o=10,pushURL:a="",schemaVersion:l="",pullInterval:u=6e4,mutators:c={},requestOptions:d={},puller:f,pusher:v,licenseKey:y,experimentalCreateKVStore:g,indexes:I={}}=e;if(this.auth=s??"",this.pullURL=i,this.pushURL=a,typeof t!="string"||!t)throw new TypeError("name is required and must be non-empty");this.name=t,this.schemaVersion=l,this.pullInterval=u,this.pushDelay=o,this.puller=f??$k(this),this.pusher=v??kE(this);let h=e,p=h.enableMutationRecovery??!0;this.#k=h.enableLicensing??!0,this.#L=h.enableScheduledPersist??!0,this.#y=h.enableScheduledRefresh??!0,this.#H=h.enablePullAndPushInOpen??!0,h.exposeInternalAPI&&h.exposeInternalAPI({persist:()=>this.#Z(),refresh:()=>this.#b(),lastMutationID:()=>this.#i});let m=r.length===1?r[0]:new om(r);this.#l=new mi(n,{name:t},m),this.#l.debug?.("Constructing Replicache",{name:t,"replicache version":xC}),this.#e=new yC(this.#ue,this.#l);let w=In=>Hm(this.#l,In),k;g?(w=g,k=w(this.idbName)):k=w(this.idbName),this.#r=w,this.#P=new Nv(w),this.#h=new ic(k,qe,Et),this.#d=new wc(this.#h,DC,qe,Et);let S=z();this.#c=S.promise,this.#I=y;let E=z();this.#D=E.promise;let _=z();this.#_=_.promise;let{minDelayMs:M=YI,maxDelayMs:D=XI}=d;this.#T={maxDelayMs:D,minDelayMs:M};let Q=BI(Vi(),0,this.#w.signal);this.#M=new oh(this.#l.withContext("PULL"),new JI(this,()=>this.#N()),Q),this.#g=new oh(this.#l.withContext("PUSH"),new qI(this,()=>this.#X())),this.mutate=this.#de(c);let Be=z();this.#p=Be.promise;let We=z();this.#m=We.promise,this.#t=new OE({delegate:this,lc:this.#l,enableMutationRecovery:p,wrapInOnlineCheck:this.#W.bind(this),wrapInReauthRetries:this.#G.bind(this),isPullDisabled:this.#q.bind(this),isPushDisabled:this.#Y.bind(this),clientGroupIDPromise:this.#m}),this.#x=QE(this.name,this.#w.signal,In=>{this.#ce(In)}),this.#re(I,Be.resolve,We.resolve,S.resolve,E.resolve,_.resolve)}async#re(e,t,n,r,i,s){let{clientID:o}=this;await ma.get(this.name),await this.#P.getProfileID().then(t),await this.#P.putDatabase(this.#s);let[a,l,u,c]=await SI(o,this.#l,this.#h,Object.keys(this.#v),e,7);n(a.clientGroupID),await ne(this.#d,f=>f.setHead(re,l)),this.#f=await wE(this.#d,re),r(),await this.#Q(i),this.#H&&(this.pull().catch(Bi),this.push().catch(Bi));let{signal:d}=this.#w;iC(o,this.#h,()=>{this.#j(o)},this.#l,d),XE(o,this.#h,this.#l,d),HI(this.#P,this.#l,d),tC(this.#h,this.#l,d),WE(this.name,this.idbName,d,a.clientGroupID,c,()=>{this.#te(AC)},this.#h),pC(()=>this.#ae(),MC,d),this.#ae(u),Vi()?.addEventListener("visibilitychange",this.#K),await this.#ie(s,this.#l,d)}#K=async()=>{this.#o||Vi()?.visibilityState==="visible"&&await this.#V()};async#V(){let{clientID:e}=this,t=await ge(this.#h,n=>_v(e,n));return t||this.#j(e),!t}async#Q(e){if(!this.#k){e(!0);return}if(!this.#I){await this.#z(this.#l,"license key ReplicacheOptions.licenseKey is not set",!0,e);return}if(this.#l.debug?.(`Replicache license key: ${this.#I}`),this.#I===Bf){this.#l.info?.("Skipping license check for TEST_LICENSE_KEY. You may ONLY use this key for automated (e.g., unit/CI) testing. See https://replicache.dev for more information."),e(!0),this.#S=setTimeout(async()=>{await this.#z(this.#l,"Test key expired",!0,e)},$C);return}try{let t=await mk(gh,Wf,this.#I,this.#l);if(t.pleaseUpdate&&this.#l.error?.("You are using an old version of Replicache that uses deprecated licensing features. Please update Replicache else it may stop working."),t.status==="VALID")this.#l.debug?.("License is valid.");else{await this.#z(this.#l,`status: ${t.status}`,t.disable,e);return}}catch(t){this.#l.error?.(`Error checking license: ${t}`)}e(!0)}async#z(e,t,n,r){e.error?.(`** REPLICACHE LICENSE NOT VALID ** Replicache license key '${this.#I}' is not valid (${t}). Please run 'npx replicache get-license' to get a license key or contact hello@replicache.dev for help.`),n&&(await this.close(),e.error?.("** REPLICACHE DISABLED **")),r(!1)}async#ie(e,t,n){if(!this.#k||!this.#I||this.#I===Bf){e(!1);return}let r=async()=>{try{await pk(gh,Wf,this.#I,await this.profileID,t)}catch(i){this.#l.info?.(`Error sending license active ping: ${i}`)}};await r(),e(!0),vi("LicenseActive",r,()=>PC,t,n)}get profileID(){return this.#p}get clientID(){return this.#u}get clientGroupID(){return this.#m}onOnlineChange=null;get online(){return this.#a}get closed(){return this.#o}async close(){this.#o=!0;let{promise:e,resolve:t}=z();ma.set(this.name,e),this.#w.abort(),Vi()?.removeEventListener("visibilitychange",this.#K),await this.#c;let n=[this.#d.close(),this.#h.close(),this.#P.close()];this.#M.close(),this.#g.close(),this.#e.clear(),this.#S&&clearTimeout(this.#S),await Promise.all(n),ma.delete(this.name),t()}async#B(e,t){let n=this.#f;Ju(n),e!==n&&(this.#f=e,await this.#e.fire(t))}async#J(e,t){for(;;){if(this.#o)return;await this.#c;let{clientID:n}=this,r=this.#l.withContext("maybeEndPull").withContext("requestID",t),{replayMutations:i,diffs:s}=await _E(this.#d,r,e,n,this.#e,7);if(!i||i.length===0){await this.#B(e,s),this.#ne();return}for(let o of i){this.#e.hasPendingSubscriptionRuns&&await Promise.resolve();let{meta:a}=o;e=await nr(this.#d,l=>yE(o,l,e,ai,this.#v,r,wo(a)?a.clientID:n,7))}}}#N(){return this.#q()?Promise.resolve(!0):this.#W(async()=>{try{this.#F(0,1);let{syncHead:e,requestID:t,ok:n}=await this.#se();if(!n)return!1;e!==ve&&await this.#J(e,t)}catch(e){throw await this.#oe(e)}finally{this.#F(0,-1)}return!0},"Pull")}#q(){return this.#n||this.pullURL===""&&Nk(this.puller)}async#W(e,t){let n=!0;try{return await e()}catch(r){return r instanceof Xv||r instanceof Gv?(n=!1,this.#l.debug?.(`${t} threw:
`,r,`
with cause:
`,r.causedBy)):r instanceof jC?this.#l.error?.(r):this.#l.info?.(`${t} threw:
`,r),!1}finally{this.#a!==n&&(this.#a=n,this.onOnlineChange?.(n),n&&this.#ae())}}async#G(e,t,n,r=Bi,i=Bi){let{clientID:s}=this,o=0,a;n=n.withContext(t);do{let l=Sh(s),u=n.withContext("requestID",l),{httpRequestInfo:c,result:d}=await e(l,u);if(a=d,!c)return{result:d,authFailure:!1};let{errorMessage:f,httpStatusCode:v}=c;if((f||v>=400)&&u.error?.(`Got error response doing ${t}: ${v}`+(f?`: ${f}`:"")),v!==_C)return{result:d,authFailure:!1};if(!this.getAuth)return{result:d,authFailure:!0};let y;try{await r(),y=await this.getAuth()}finally{await i()}if(y==null)return{result:d,authFailure:!0};this.auth=y,o++}while(o<TC);return n.info?.("Tried to reauthenticate too many times"),{result:a,authFailure:!0}}#Y(){return this.#n||this.pushURL===""&&SE(this.pusher)}async#X(){if(this.#Y())return!0;await this.#c;let e=await this.#p,{clientID:t}=this,n=await this.#m;return this.#W(async()=>{let{result:r}=await this.#G(async(o,a)=>{try{this.#F(1,0);let l=await kc(o,this.#d,a,e,n,t,this.pusher,this.schemaVersion,Js);return{result:l,httpRequestInfo:l?.httpRequestInfo}}finally{this.#F(-1,0)}},"push",this.#l);if(r===void 0)return!0;let{response:i,httpRequestInfo:s}=r;return et(i)?this.#A(i):Ze(i)&&await this.#O(),s.httpStatusCode===200},"Push")}#A(e){let t={type:e.error};e.versionType&&(t.versionType=e.versionType),this.#te(t)}push({now:e=!1}={}){return Eh(this.#g.send(e))}pull({now:e=!1}={}){return Eh(this.#M.send(e))}async poke(e){await this.#c;let{clientID:t}=this,n=Sh(t),r=this.#l.withContext("handlePullResponse").withContext("requestID",n),{pullResponse:i}=e;if(et(i)){this.#A(i);return}if(Ze(i)){await this.#O();return}let s=await qv(r,this.#d,Oe(e.baseCookie),i,t,7);switch(s.type){case 0:await this.#J(s.syncHead,n);break;case 2:throw new Error("unexpected base cookie for poke: "+JSON.stringify(e))}}async#se(){await this.#c;let e=await this.profileID,{clientID:t}=this,n=await this.#m,{result:{beginPullResponse:r,requestID:i}}=await this.#G(async(l,u)=>{let c=await Qv(e,t,n,this.schemaVersion,this.puller,l,this.#d,7,u);return{result:{beginPullResponse:c,requestID:l},httpRequestInfo:c.httpRequestInfo}},"pull",this.#l,()=>this.#F(0,-1),()=>this.#F(0,1)),{pullResponse:s}=r;et(s)?this.#A(s):Ze(r.pullResponse)&&await this.#O();let{syncHead:o,httpRequestInfo:a}=r;return{requestID:i,syncHead:o,ok:a.httpStatusCode===200}}async#Z(){R(!this.#$),this.#$=!0;try{let{clientID:n}=this;if(await this.#c,this.#o)return;try{await aC(this.#l,n,this.#d,this.#h,this.#v,()=>this.closed,7)}catch(r){if(r instanceof Ft)this.#j(n);else if(this.#o)this.#l.debug?.("Exception persisting during close",r);else throw r}}finally{this.#$=!1}let{clientID:e}=this,t=await this.#m;R(t),this.#x({clientID:e,clientGroupID:t})}async#b(){await this.#c;let{clientID:e}=this;if(this.#o)return;let t;try{t=await fC(this.#l,this.#d,this.#h,e,this.#v,this.#e,()=>this.closed,7)}catch(n){if(n instanceof Ft)this.#j(e);else if(this.#o)this.#l.debug?.("Exception refreshing during close",n);else throw n}t!==void 0&&await this.#B(t[0],t[1])}#ee(){this.onClientStateNotFound?.()}#j(e){this.#l.error?.(`Client state not found on client, clientID: ${e}`),this.#ee()}async#O(){let e=await this.#m;R(e),this.#n=!0,await ne(this.#h,t=>Bm(e,t)),this.#l.error?.(`Client state not found on server, clientGroupID: ${e}`),this.#ee()}#te(e){this.#l.debug?.(`Update needed, reason: ${e}`),this.onUpdateNeeded?.(e)}async#ne(){this.#L&&await this.#le("persist",this.#E)}async#ce(e){this.#l.debug?.("Handling persist",e);let t=await this.#m;e.clientGroupID===t&&this.#fe()}async#fe(){this.#y&&await this.#le("refresh from storage",this.#U)}async#le(e,t){try{await t.schedule()}catch(n){n instanceof tr?this.#l.debug?.(`Scheduled ${e} did not complete before close.`):this.#l.error?.(`Error during ${e}`,n)}}#F(e,t){this.#C+=e,this.#R+=t;let n=e+t,r=this.#C+this.#R;if(n===1&&r===1||r===0){let i=r>0;Promise.resolve().then(()=>this.onSync?.(i))}}subscribe(e,t){return typeof t=="function"&&(t={onData:t}),this.#e.addSubscription(e,t)}experimentalWatch(e,t){return this.#e.addWatch(e,t)}query(e){return this.#ue(e)}#ue=async e=>{await this.#c;let{clientID:t}=this;return ge(this.#d,async n=>{try{let r=await aI(n,7),i=new Av(t,r,this.#l);return await e(i)}catch(r){throw await this.#oe(r)}})};#he(e,t){return this.#v[e]=t,async n=>(await this.#pe(e,t,n,performance.now())).result}#de(e){let t=Object.create(null);for(let n in e)t[n]=this.#he(n,e[n]);return t}async#pe(e,t,n,r){let i=Oe(n??null);this.#e.hasPendingSubscriptionRuns&&await Promise.resolve(),await this.#c;let{clientID:s}=this;return nr(this.#d,async o=>{try{let a=await rc(re,o),l=await kv(a,e,i,null,o,r,s,7),u=new jv(s,await l.getMutationID(),"initial",l,this.#l),c=await t(u,n);oi(l);let d=await l.getMutationID(),[f,v]=await l.commitWithDiffs(re,this.#e);return this.#i=d,this.#g.send(!1),await this.#B(f,v),this.#ne(),{result:c,ref:f}}catch(a){throw await this.#oe(a)}})}async#oe(e){return e instanceof Nm&&await this.#V()?new Ft(this.clientID):e}#ae(e){return this.#t.recoverMutations(e,this.#c,this.#h,this.#s,this.#P,this.#r)}experimentalPendingMutations(){return ge(this.#d,JE)}},ma=new Map;function Ih(){typeof location<"u"&&location.reload()}var jC=class extends Error{};async function Eh(e){let t=await e;if(t)throw t.error}var rg=/^[A-Za-z0-9_/-]+$/;function FC(e){return rg.test(e)}var ig="0.39.202402230127+b70f6b";function UC(e,t,n){return e?new VC(e,t,n):new GC}var VC=class{#e;#t;#n=0;visibilityState;#r=new Set;constructor(e,t,n){this.#e=e,this.#t=t,this.visibilityState=e.visibilityState,this.#e.addEventListener("visibilitychange",this.#i,{signal:n})}#i=()=>{this.#e.visibilityState==="visible"?(clearTimeout(this.#n),this.#s("visible")):this.#n=setTimeout(()=>{this.#s("hidden")},this.#t)};#s(e){if(e!==this.visibilityState){this.visibilityState=e;for(const t of this.#r){const{resolve:n,state:r}=t;r===e&&(n(),this.#r.delete(t))}}}waitForVisible(){return this.#o("visible")}waitForHidden(){return this.#o("hidden")}#o(e){if(this.visibilityState===e)return Promise.resolve();const{promise:t,resolve:n}=z();return this.#r.add({resolve:n,state:e}),t}},BC=Promise.resolve(),WC=new Promise(()=>{}),GC=class{visibilityState="visible";waitForVisible(){return BC}waitForHidden(){return WC}};function KC(){return typeof document<"u"?document:void 0}function QC(){return typeof window<"u"?window:void 0}var JC=class extends Error{name="AbortError"},sg=Promise.resolve(),qC=new Promise(()=>{});function ds(e,t){return e===0?sg:new Promise((n,r)=>{const i=setTimeout(()=>{n()},e);t&&t.addEventListener("abort",()=>{clearTimeout(i),r(new JC("Aborted"))})})}function YC(e,t){if(e===0)return[sg,qC];const{promise:n,resolve:r}=z();return[new Promise(s=>{const o=()=>{clearTimeout(a),r()},a=setTimeout(()=>{s(),t.removeEventListener("abort",o)},e);t.addEventListener("abort",o,{once:!0})}),n]}function Hr(e=21){return crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"")}function va(e,t){e.send(JSON.stringify(t))}var XC=class{#e;#t;#n;#r;#i;#s;#o=!1;constructor(e,t,n,r,i,s,o){this.#n=e,this.#e=t,this.#t=n,this.#r=r,this.#i=i,this.#s=s,this.#a(o)}#a(e){Ff("closeBeacon")&&e?.addEventListener("pagehide",t=>{t.persisted||this.send("Pagehide")},{signal:this.#s})}send(e){if(!Ff("closeBeacon"))return;const t=this.#e.withContext("close-beacon",e);if(this.#o){t.debug?.("Not sending close beacon because already sent");return}if(this.#o=!0,this.#t===null){this.#e.debug?.(`Not sending close beacon for ${e} because server is null`);return}const n=this.#i(),r=this.#r(),i=new URL(Z1,this.#t),s={roomID:this.#n.roomID,userID:this.#n.userID,clientID:this.#n.clientID};i.search=new URLSearchParams(s).toString();const o={lastMutationID:n};t.debug?.("Sending close beacon",s,o);const a={"content-type":"application/json"};r&&(a.authorization=`Bearer ${r}`),fetch(i,{method:"POST",headers:a,body:JSON.stringify(o),keepalive:!0}).catch(l=>{t.info?.("Failed to send close beacon",l)})}};function og(e){return"ws"+e.slice(4)}function ZC(e){return"http"+e.slice(2)}function ex(e){oe(/^https?:\/\//.test(e))}function tx(e){oe(/^wss?:\/\//.test(e))}async function nx(e,t,n,r,i){const s=Hr();n=n.withContext("connectCheckID",s).withContext("checkReason",e),n.info?.("Starting connectivity checks",{navigatorOnline:navigator.onLine});const o=og(t),a={cfGet:f=>ix(s,t,r),cfWebSocket:f=>xh(s,o,!1,f,r),cfWebSocketWSecWebSocketProtocolHeader:f=>xh(s,o,!0,f,r)},u=i?{...a,...{renderGet:f=>rx(s,r),renderWebSocket:f=>Ch(s,!1,f,r),renderWebSocketWSecWebSocketProtocolHeader:f=>Ch(s,!0,f,r)}}:a,c=[];for(const[f,v]of Object.entries(u))c.push((async()=>{const y=n.withContext("checkName",f);y.info?.("Starting check");let g;try{g=await v(y)}catch(I){g={success:!1,detail:`Error: ${I instanceof Error?`{name: ${I.name}, message: ${I.message}}`:I}`}}return y.info?.(f,g),g})());const d=await Promise.all(c);r.aborted||(n.info?.(`Connectivity checks summary
`,...Object.keys(u).map((f,v)=>`${f}=${d[v].success}
`),{navigatorOnline:navigator.onLine}),n.info?.(`Connectivity checks detail
`,...Object.keys(u).flatMap((f,v)=>`${f}=${d[v].detail}
`),{navigatorOnline:navigator.onLine}))}function rx(e,t){return ag(e,"https://networkcheck.reflect-server.net/canary/get",t)}function ix(e,t,n){const r=new URL(t);r.pathname="/api/canary/v0/get";const i=r.toString();return ex(i),ag(e,i,n)}function ag(e,t,n){const r=new URL(t);return r.searchParams.set("id",e),Promise.race([ug(n),(async()=>{const i=await fetch(r,{signal:n});return{success:i.status===200,detail:`Got response ${i.status} "${await i.text()}"`}})()])}function Ch(e,t,n,r){return lg(e,"wss://networkcheck.reflect-server.net/canary/websocket",t,n,r)}function xh(e,t,n,r,i){const s=new URL(t);s.pathname="/api/canary/v0/websocket";const o=s.toString();return tx(o),lg(e,o,n,r,i)}async function lg(e,t,n,r,i){const s=new URL(t);s.searchParams.set("id",e),s.searchParams.set("wSecWebSocketProtocolHeader",n?"true":"false");const o=n?new WebSocket(s,"check-"+e):new WebSocket(s),{promise:a,resolve:l}=z(),u=f=>{r.info?.("Received message",f.data),l({success:!0,detail:`Connected and received message "${f.data}"`})},c=()=>{r.info?.("Open event")},d=f=>{const{code:v,reason:y,wasClean:g}=f,I={code:v,reason:y,wasClean:g};r.info?.("Received close",I),l({success:!1,detail:`Closed before connected ${JSON.stringify(I)}.`})};try{return o.addEventListener("message",u),o.addEventListener("open",c),o.addEventListener("close",d),await Promise.race([ug(i),a])}finally{o.removeEventListener("message",u),o.removeEventListener("open",c),o.removeEventListener("close",d),o.close()}}var sx=1e4;async function ug(e){return await ds(sx,e),{success:!1,detail:"Timed out."}}var ox=/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,ax=/^\[[a-fA-F0-9:]*:[a-fA-F0-9:]*\]$/,lx=new RegExp(`(${ox.source}|${ax.source})`);function ux(e,t=!0){if(!t)return!1;const r=(e===null?null:new URL(e))?.hostname;return e!==null&&r!==void 0&&r!=="localhost"&&!lx.test(r)}var _h=class{#e;#t;constructor(e,t){this.#e=e,this.#t=t}log(e,t,...n){this.#t==="error"&&e!=="error"||this.#t==="info"&&e==="debug"||this.#e.log(e,t,...n)}async flush(){await ri.flush?.()}},cx="info",Dh=".reflect-server.net";function fx(e,t=n=>new W1(n)){const{consoleLogLevel:n,server:r,enableAnalytics:i}=e;if(!i||r===null)return{logLevel:n,logSink:ri};const o=new URL(r).hostname,a=o.endsWith(Dh)?o.substring(0,o.length-Dh.length).toLowerCase():o,l=new URL("/api/logs/v0/log",r),u=n==="debug"?"debug":"info",c=new om([new _h(ri,n),new _h(t({service:a,host:location.host,version:ig,baseURL:l}),cx)]);return{logLevel:u,logSink:c}}var cg=100*1e3,hx=5e3;function fg(e){return"server"in e?`server_${Mh(e.server)}`:`client_${Mh(e.client)}`}function Mh(e){return e.split(/\.?(?=[A-Z])/).join("_").toLowerCase()}var dx=class{#e;#t;#n;#r;#i;constructor(e){this.#e=e.reportIntervalMs,this.#t=e.host,this.#n=e.reporter,this.#r=e.lc,this.tags.push(`source:${e.source}`),this.timeToConnectMs.set(cg),this.#c("init"),this.#i=setInterval(()=>{this.flush()},this.#e)}#s=[];timeToConnectMs=this.#p(new ps("time_to_connect_ms"));lastConnectError=this.#p(new ga("last_connect_error",!0));#o=this.#p(new ga("not_connected"));#a=this.#p(new ps("time_to_connect_ms_v2"));#u=this.#p(new ga("last_connect_error_v2"));#f=this.#p(new ps("total_time_to_connect_ms"));#c(e){this.#o.set(e)}setConnected(e,t){this.#o.clear(),this.#u.clear(),this.#a.set(e),this.#f.set(t)}setDisconnectedWaitingForVisible(){this.#a.clear(),this.#f.clear(),this.#u.clear();let e;switch(this.#o.get()){case"init":e="hidden_was_init";break;case"error":e="hidden_was_error";break;default:e="hidden";break}this.#c(e)}setConnectError(e){this.#a.clear(),this.#f.clear(),this.#c("error"),this.#u.set(fg(e))}tags=[];async flush(){const e=this.#r;if(this.#i===null){e.error?.("MetricManager.flush() called but already stopped");return}const t=[];for(const n of this.#s){const r=n.flush();r!==void 0&&t.push({...r,host:this.#t,tags:this.tags})}if(t.length===0){e?.debug?.("No metrics to report");return}try{await this.#n(t)}catch(n){e?.error?.(`Error reporting metrics: ${n}`)}}stop(){if(this.#i===null){this.#r.error?.("MetricManager.stop() called but already stopped");return}clearInterval(this.#i),this.#i=null}#p(e){return this.#s.push(e),e}};function px(e,t){return[e,[t]]}var ps=class{#e;#t=void 0;constructor(e){this.#e=e}set(e){this.#t=e}get(){return this.#t}clear(){this.#t=void 0}flush(){if(this.#t===void 0)return;const e=[px(mx(),this.#t)];return{metric:this.#e,points:e}}};function mx(){return Math.round(Date.now()/1e3)}var ga=class{#e;#t;#n=void 0;constructor(e,t=!1){this.#e=e,this.#t=t}set(e){this.#n=e}get(){return this.#n}clear(){this.#n=void 0}flush(){if(this.#n===void 0)return;const e=new ps([this.#e,this.#n].join("_"));e.set(1);const t=e.flush();return this.#t&&this.clear(),t}};function vx(e){if(e.length===0)return;const t=[],n=[],r={};for(const i of e){t.push(...i.patch),n.push(...i.presence??[]);for(const[s,o]of Object.entries(i.lastMutationIDChanges))r[s]=o}return{baseCookie:e[0].baseCookie,cookie:e[e.length-1].cookie,lastMutationIDChanges:r,patch:t,presence:n,timestamp:e[0].timestamp}}var gx={initialBufferSizeMs:50,maxBufferSizeMs:1e3,minBufferSizeMs:-1e3,adjustBufferSizeIntervalMs:5e3},ya=18,yx=1e3,wx=10,kx=class{#e;#t;#n;#r;#i;#s=[];#o;#a;#u=!1;#f=0;#c=void 0;#p=new ho;#m=0;#D=0;#_=0;#S=0;#v=0;#C=[];constructor(e,t,n,r,i,s=new ek(gx),o=wx){this.#e=e,this.#t=t,this.#n=n,this.#r=r,this.#i=i.withContext("PokeHandler"),this.#o=s,this.#a=o}handlePoke(e){const t=this.#i.withContext("requestID",e.requestID);t.debug?.("Applying poke",e),e.debugServerBufferMs&&t.debug?.("server buffer ms",e.debugServerBufferMs);const n=Date.now(),r=this.#r;let i,s;for(const o of e.pokes){const{timestamp:a}=o;if(a!==void 0){const l=n-a;(this.#c===void 0||Math.abs(l-this.#c)>yx)&&(this.#o.reset(),this.#c=l,t.debug?.("new playback offset",l)),s=n-(a+this.#c)+ya;break}}for(const o of e.pokes){o.lastMutationIDChanges[r]!==void 0&&(i=o.lastMutationIDChanges[r]);let a;o.timestamp!==void 0&&(oe(this.#c!==void 0),a=o.timestamp+this.#c);const l={...o,serverBufferMs:e.debugServerBufferMs,playbackOffsetMs:this.#c,receivedTimestamp:n,normalizedTimestamp:a,bufferNeededMs:s};this.#s.push(l)}return this.#s.length>0&&!this.#u&&this.#R(t),i}#R(e){e.debug?.("starting playback loop"),this.#u=!0,requestAnimationFrame(this.#M)}#M=async()=>{const e=this.#i.withContext("rafAt",Math.floor(performance.now()));if(this.#s.length===0){e.debug?.("stopping playback loop"),this.#u=!1;return}requestAnimationFrame(this.#M);const t=performance.now();e.debug?.("raf fired, processing pokes.  Since last raf",t-this.#f),this.#f=t,await this.#g(e),e.debug?.("processing pokes took",performance.now()-t)};async#g(e){await this.#p.withLock(async()=>{const t=Date.now();e.debug?.("got poke lock at",t);const n=[],r=this.#r;let i=Number.MIN_SAFE_INTEGER,s=0,o=0;for(;this.#s.length;){const l=this.#s[0],{normalizedTimestamp:u,lastMutationIDChanges:c}=l,d=Object.keys(c);if(!(d.length===1&&d[0]===r)&&u!==void 0){const y=u+this.#o.bufferSizeMs,g=t-y;if(g<0)break;const{bufferNeededMs:I}=l;if(I!==void 0&&(i=Math.max(i,I)),l.debugOriginTimestamp!==void 0){const h=(l.debugServerReceivedTimestamp??0)-l.debugOriginTimestamp,p=(l.debugServerSentTimestamp??0)-l.debugOriginTimestamp,m=l.receivedTimestamp-l.debugOriginTimestamp,w=t-l.debugOriginTimestamp;this.#v+=w,this.#C.unshift(w),this.#C.length>this.#a&&(this.#C.length=this.#a),e.debug?.("poke latency breakdown:",`
server received:`,h,"(+",h,")",`
server sent (server buffer`,l.serverBufferMs,"):",p,"(+",p-h,")",`
client received:`,m,"(+",m-p,")",`
playback (offset`,l.playbackOffsetMs,", buffer",this.#o.bufferSizeMs,"):",w,"(+",w-m,")")}s++,this.#m++,g>ya&&(e.debug?.("poke",this.#m,"playback missed by",g-ya),this.#D++,o++)}const v=this.#s.shift();oe(v),n.push(v)}s>0&&(this.#_++,oe(i!==Number.MIN_SAFE_INTEGER),this.#o.recordMissable(t,o>0,i,e),o>0&&(this.#S++,e.debug?.("frame",this.#_,"contains",o,"missed pokes"))),e.debug?.("merging",n.length,"remaining buffer length",this.#s.length);const a=vx(n);if(a===void 0){e.debug?.("frame is empty");return}try{const l=performance.now(),{lastMutationIDChanges:u,baseCookie:c,patch:d,cookie:f}=a,v={baseCookie:c,pullResponse:{lastMutationIDChanges:u,patch:d,cookie:f}};e.debug?.("poking replicache"),await this.#e(v),await this.#t.updatePresence(a.presence??[]),e.debug?.("poking replicache took",performance.now()-l)}catch(l){String(l).indexOf("unexpected base cookie for poke")>-1&&await this.#n()}e.debug?.("playback stats (misses / total = percent missed):",`
pokes:`,this.#D,"/",this.#m,"=",this.#D/this.#m,`
frames:`,this.#S,"/",this.#_,"=",this.#S/this.#_,`
avg poke latency:`,this.#v/this.#m,`
recent poke latencies:`,this.#C)})}handleDisconnect(){this.#i.debug?.("clearing buffer and playback offset due to disconnect"),this.#s.length=0,this.#c=void 0,this.#o.reset()}},Sx=class{#e;#t;#n=new Set;#r=new Set;#i=!1;#s;constructor(e,t){this.#e=e,this.#s=[e],this.#t=t}updatePresence(e){if(e.length===0)return;const t=this.#s,n=new Set(this.#s);for(const r of e)switch(r.op){case"clear":n.clear();break;case"put":n.add(r.key);break;case"del":n.delete(r.key);break}if(n.add(this.#e),!Ix(t,n)){this.#s=Array.from(n);for(const r of this.#n)Ph(r,this.#s,this.#t),this.#r.delete(r)}}addSubscription(e){const t={callback:e};return this.#n.add(t),this.#o(t),()=>{this.#n.delete(t)}}#o(e){this.#r.add(e),this.#i||(this.#i=!0,queueMicrotask(()=>{const t=this.#t;this.#i=!1;for(const n of this.#r)this.#n.has(n)&&(Ph(n,this.#s,t),this.#r.delete(n))}))}clearSubscriptions(){this.#n.clear()}handleDisconnect(){this.#a()}#a(){this.updatePresence([{op:"clear"}])}};function Ph(e,t,n){try{e.callback(t)}catch(r){n.error?.("Error in presence subscription callback:",r),queueMicrotask(()=>{throw new Error("Error in presence subscription callback.",{cause:r})})}}function Ix(e,t){if(e.length!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}var jl="_reflectReloadReason";function Ex(e,t,n){typeof localStorage>"u"?e.error?.("Reflect reloaded the page.",n):localStorage[jl]=n,t()}function Cx(e){if(typeof localStorage>"u")return;const t=localStorage[jl];t&&(delete localStorage[jl],e.error?.("Reflect reloaded the page.",t))}var hg=class extends Error{kind;name="ServerError";constructor(e,t){super(e+": "+t),this.kind=e}};function dg(e){return e instanceof hg}function xx(e){return dg(e)&&_x(e.kind)}function _x(e){return e==="AuthInvalidated"||e==="Unauthorized"}function $h(e,t,n){const r=()=>` For example: "${n}s://myapp-myteam.reflect.net/".`;if(!t.startsWith(`${n}://`)&&!t.startsWith(`${n}s://`))throw new Error(`ReflectOptions.${e} must use the "${n}" or "${n}s" scheme.`);let i;try{i=new URL(t)}catch{throw new Error(`ReflectOptions.${e} must be a valid URL.${r()}`)}const s=i.toString();if(i.pathname!=="/")throw new Error(`ReflectOptions.${e} must not contain a path component (other than "/").${r()}`);for(const[o,a]of[["search","?"],["hash","#"]])if(i[o]||s.endsWith(a))throw new Error(`ReflectOptions.${e} must not contain a ${o} component.${r()}`);return s}function Dx(e,t){if(e)return $h("server",e,"http");if(t){const n=$h("socketOrigin",t,"ws");return ZC(n)}return null}var Nh=5e3,Mx=5e3,Px=5e3,$x=5e3,Nx=5e3,Rx=1e4,Tx=6,wa={clientID:"",id:-1},Lx=1;function Ox(e){return`Server reported that client is ahead of server (${e}). This probably happened because the server is in development mode and restarted. Currently when this happens, the dev server loses its state and on reconnect sees the client as ahead. If you see this in other cases, it may be a bug in Reflect.`}function Hx(e){return{type:e.type}}var zx=class{version=ig;#e;#t;userID;roomID;#n;#r;#i;#s;#o;#a=wa;#u=()=>{};#f=!1;onOnlineChange=null;#c;#p;#m=null;#D=0;#_=0;#S=0;#v=0;#C=()=>{};#R;#M;get onUpdateNeeded(){return this.#c}set onUpdateNeeded(e){this.#c=e,this.#e.onUpdateNeeded=e&&(t=>{e(Hx(t))})}#g=z();#T=null;#I=new Map;#d=0;#h=void 0;#P=z();#l=z();#w=void 0;#$=new AbortController;#L;#y=0;#H(e){e!==this.#y&&(this.#y=e,this.#l.resolve(e),this.#l=z())}#E=void 0;#x=void 0;#U;#k;#re=()=>location.reload();constructor(e){const{userID:t,roomID:n,onOnlineChange:r,jurisdiction:i,hiddenTabDisconnectDelay:s=Nx}=e;if(!t)throw new Error("ReflectOptions.userID must not be empty.");if(!FC(n))throw new Error(`ReflectOptions.roomID must match ${rg.toString()}.`);const o=Dx(e.server,e.socketOrigin);if(this.#i=ux(o,e.enableAnalytics),i!==void 0&&i!=="eu")throw new Error('ReflectOptions.jurisdiction must be "eu" if present.');if(s<0)throw new Error("ReflectOptions.hiddenTabDisconnectDelay must not be negative.");this.onOnlineChange=r,this.#U=e,this.#r=this.#K({consoleLogLevel:e.logLevel??"error",server:o,enableAnalytics:this.#i});const a=this.#r,l={schemaVersion:e.schemaVersion,logLevel:a.logLevel,logSinks:[a.logSink],mutators:e.mutators,name:`reflect-${t}-${n}`,pusher:(d,f)=>this.#Y(d,f),puller:(d,f)=>this.#Z(d,f),pushDelay:0,requestOptions:{maxDelayMs:0,minDelayMs:0},licenseKey:"reflect-client-static-key",experimentalCreateKVStore:jx(e)};let u;const c={enableLicensing:!1,exposeInternalAPI:d=>{u=d}};this.#e=new bC({...l,...c}),this.#R=u,this.#e.getAuth=this.#X,this.#c=this.#e.onUpdateNeeded,this.#t=o,this.roomID=n,this.userID=t,this.#p=i,this.#n=new mi(a.logLevel,{roomID:n,clientID:this.#e.clientID},a.logSink),Cx(this.#n),this.#k=new dx({reportIntervalMs:hx,host:location.host,source:"client",reporter:this.#i?d=>this.#j(d):()=>Promise.resolve(),lc:this.#n}),this.#k.tags.push(`version:${this.version}`),this.#o=new Sx(this.#e.clientID,this.#n),this.#s=new kx(d=>this.#e.poke(d),this.#o,()=>this.#W(),this.#e.clientID,this.#n),this.#L=UC(KC(),s,this.#$.signal),this.#M=new XC(this,this.#n,o,()=>this.#e.auth,()=>this.#R.lastMutationID(),this.#$.signal,QC()),this.#se()}#K(e){return fx(e)}get idbName(){return this.#e.idbName}get schemaVersion(){return this.#e.schemaVersion}get clientID(){return this.#e.clientID}get clientGroupID(){return this.#e.clientGroupID}get mutate(){return this.#e.mutate}get closed(){return this.#e.closed}close(){const e=this.#n.withContext("close");return this.#y!==0&&this.#N(e,{client:"ReflectClosed"}),this.#M.send("ReflectClosed"),e.debug?.("Aborting closeAbortController due to close()"),this.#$.abort(),this.#k.stop(),this.#o.clearSubscriptions(),this.#e.close()}subscribe(e,t){return this.#e.subscribe(e,t)}query(e){return this.#e.query(e)}experimentalWatch(e,t){return this.#e.experimentalWatch(e,t)}subscribeToPresence(e){return this.#o.addSubscription(e)}#V=e=>{const t=this.#n;if(t.debug?.("received message",e.data),this.closed){t.debug?.("ignoring message because already closed");return}const n=s=>this.#w?.reject(new Error(`Invalid message received from server: ${s instanceof Error?s.message+". ":""}${i}`));let r;const{data:i}=e;try{r=Tr(JSON.parse(i),H1)}catch(s){n(s);return}switch(this.#_++,r[0]){case"connected":return this.#B(t,r);case"error":return this.#ie(t,r);case"pong":return this.#u();case"poke":return this.#q(t,r);case"pull":return this.#G(t,r);default:n()}};#Q=e=>{const t=ka(e.target,this.#n);if(this.#E===void 0)t.error?.("Got open event but connect start time is undefined. This should not happen.");else{const r=Date.now()-this.#E;t.info?.("Got socket open event",{navigatorOnline:navigator.onLine,timeToOpenMs:r})}};#z=e=>{const t=ka(e.target,this.#n),{code:n,reason:r,wasClean:i}=e;t.info?.("Got socket close event",{code:n,reason:r,wasClean:i});const s=i?"CleanClose":"AbruptClose";this.#g.reject(new Th(s)),this.#N(t,{client:s})};async#ie(e,t){const[,n,r]=t;n==="VersionNotSupported"&&this.onUpdateNeeded?.({type:n}),(n==="InvalidConnectionRequestLastMutationID"||n==="InvalidConnectionRequestBaseCookie")&&(await UI(this.#e.idbName),Ex(e,this.#re,Ox(n)));const i=new hg(n,r);e.info?.(`${n}: ${r}}`),this.#w?.reject(i),e.debug?.("Rejecting connect resolver due to error",i),this.#g.reject(i),this.#N(e,{server:n})}#B(e,t){const n=Date.now(),[,r]=t;e=Fl(r.wsid,e),this.#D===0?this.#O("firstConnect"):this.#v>0&&this.#O("connectAfterError"),this.#D++,this.#S=n,this.#k.lastConnectError.clear();const i=this.#v;this.#v=0;let s,o;this.#E===void 0?e.error?.("Got connected message but connect start time is undefined. This should not happen."):(s=n-this.#E,this.#k.timeToConnectMs.set(s),o=r.timestamp!==void 0?n-r.timestamp:void 0,this.#E=void 0);let a;this.#x===void 0?e.error?.("Got connected message but total to connect start time is undefined. This should not happen."):(a=n-this.#x,this.#x=void 0),this.#k.setConnected(s??0,a??0),e.info?.("Connected",{navigatorOnline:navigator.onLine,timeToConnectMs:s,totalTimeToConnectMs:a,connectMsgLatencyMs:o,connectedCount:this.#D,proceedingConnectErrorCount:i}),this.#a=wa,e.debug?.("Resolving connect resolver"),this.#H(2),this.#g.resolve()}async#J(e){oe(this.#t),oe(this.#y===0);const t=Hr();e=Fl(t,e),e.info?.("Connecting...",{navigatorOnline:navigator.onLine}),this.#H(1),oe(this.#E===void 0);const n=Date.now();this.#E=n,this.#x===void 0&&(this.#x=n);const r=await this.#ne();if(this.closed)return;this.#m=r;const i=setTimeout(()=>{e.debug?.("Rejecting connect resolver due to timeout"),this.#g.reject(new Rh("Connect")),this.#N(e,{client:"ConnectTimeout"})},Rx);this.#$.signal.addEventListener("abort",()=>{clearTimeout(i)});const s=Ax(og(this.#t),r,this.clientID,await this.clientGroupID,this.roomID,this.userID,this.#e.auth,this.#p,this.#d,t,this.#U.logLevel==="debug",e);if(!this.closed){s.addEventListener("message",this.#V),s.addEventListener("open",this.#Q),s.addEventListener("close",this.#z),this.#h=s,this.#P.resolve(s);try{e.debug?.("Waiting for connection to be acknowledged"),await this.#g.promise}finally{clearTimeout(i)}}}#N(e,t){switch(this.#y===1&&this.#v++,e.info?.("disconnecting",{navigatorOnline:navigator.onLine,reason:t,connectStart:this.#E,totalToConnectStart:this.#x,connectedAt:this.#S,connectionDuration:this.#S?Date.now()-this.#S:0,messageCount:this.#_,connectionState:this.#y,connectErrorCount:this.#v}),this.#y){case 2:{this.#E!==void 0&&e.error?.("disconnect() called while connected but connect start time is defined. This should not happen.");break}case 1:{this.#k.lastConnectError.set(fg(t)),this.#k.timeToConnectMs.set(cg),this.#k.setConnectError(t),this.#v%Tx===1&&this.#O(`connectErrorCount=${this.#v}`),this.#E===void 0&&e.error?.("disconnect() called while connecting but connect start time is undefined. This should not happen.");break}case 0:e.error?.("disconnect() called while disconnected");break}this.#P=z(),e.debug?.("Creating new connect resolver"),this.#g=z(),this.#H(0),this.#_=0,this.#E=void 0,this.#S=0,this.#h?.removeEventListener("message",this.#V),this.#h?.removeEventListener("open",this.#Q),this.#h?.removeEventListener("close",this.#z),this.#h?.close(),this.#h=void 0,this.#a=wa,this.#s.handleDisconnect(),this.#o.handleDisconnect()}async#q(e,t){this.#C();const n=t[1],r=await this.#s.handlePoke(n);r!==void 0&&(this.#d=r)}#W(){const e=this.#n;e.info?.("out of order poke, disconnecting"),this.#y!==0&&this.#N(e,{client:"UnexpectedBaseCookie"})}#G(e,t){this.#C();const n=t[1];e=e.withContext("requestID",n.requestID),e.debug?.("Handling pull response",n);const r=this.#I.get(n.requestID);if(!r){e.debug?.("No resolver found");return}r.resolve(t[1])}async#Y(e,t){await this.#g.promise;const n=this.#n.withContext("requestID",t);if(n.debug?.(`pushing ${e.mutations.length} mutations`),e.pushVersion===0)return{httpRequestInfo:{errorMessage:"",httpStatusCode:200}};const r=this.#h;oe(r);const i=e.clientGroupID!==await this.clientGroupID,s=i?0:e.mutations.findIndex(a=>a.clientID===this.#a.clientID&&a.id===this.#a.id)+1;n.debug?.(i?"pushing for recovery":"pushing",e.mutations.length-s,"mutations of",e.mutations.length,"mutations.");const o=Date.now();for(let a=s;a<e.mutations.length;a++){const l=e.mutations[a],u=["push",{timestamp:o,clientGroupID:e.clientGroupID,mutations:[{timestamp:o-Math.round(performance.now()-l.timestamp),id:l.id,clientID:l.clientID,name:l.name,args:l.args}],pushVersion:e.pushVersion,schemaVersion:e.schemaVersion,requestID:t}];va(r,u),i||(this.#a={clientID:l.clientID,id:l.id})}return{httpRequestInfo:{errorMessage:"",httpStatusCode:200}}}#X=()=>{const{auth:e}=this.#U;return typeof e=="function"?e():e};async#A(e){const t=await this.#X();t&&(e.debug?.("Got auth token"),this.#e.auth=t)}async#se(){if(this.#n.info?.(`Starting Reflect version: ${this.version}`),this.#t===null){this.#n.info?.("No socket origin provided, not starting connect loop.");return}let e=0;const t=this.#n,n=()=>{let s=t;return this.#h&&(s=ka(this.#h,s)),s.withContext("runLoopCounter",e)};await this.#A(t);let r=!1,i=!1;for(;!this.closed;){e++;let s=n();try{switch(this.#y){case 0:{if(this.#L.visibilityState==="hidden"&&(this.#k.setDisconnectedWaitingForVisible(),this.#x=void 0),await this.#L.waitForVisible(),r&&await this.#A(s),await this.#J(s),this.closed)break;oe(this.#h),s=n(),s.debug?.("Connected successfully"),i=!1,r=!1,this.#b(!0);break}case 1:s.error?.("unreachable"),i=!0;break;case 2:{const o=new AbortController;this.#C=()=>o.abort();const[a,l]=YC(Mx,o.signal);this.#w=z();let u;(d=>{d[d.Ping=0]="Ping",d[d.Hidden=2]="Hidden"})(u||(u={}));const c=await Sa([a,l,this.#L.waitForHidden(),this.#l.promise,this.#w.promise]);if(this.closed){this.#w=void 0;break}switch(c){case 0:{await this.#ee(s,this.#w.promise)===0&&(i=!0);break}case 2:this.#N(s,{client:"Hidden"}),this.#b(!1);break}this.#w=void 0}}}catch(o){if(this.#y!==2&&s.error?.("Failed to connect",o,{lmid:this.#d,baseCookie:this.#m}),s.debug?.("Got an exception in the run loop","state:",this.#y,"exception:",o),xx(o)){if(!r){r=!0;continue}r=!0}(dg(o)||o instanceof Rh||o instanceof Th)&&(i=!0)}if(i){this.#b(!1);let o=!1;const a=new URL(this.#t);a.pathname="/api/canary/v0/get",a.searchParams.set("id",Hr());const l=new AbortController;fetch(a,{signal:l.signal}).then(u=>{o=!0}).catch(u=>{o=!1}),s.debug?.("Sleeping",Nh,"ms before reconnecting due to error, state:",this.#y),await ds(Nh),l.abort(),o||(s.info?.("Canary request failed, resetting total time to connect start time."),this.#x=void 0)}}}async#Z(e,t){const n=this.#n.withContext("requestID",t);if(n.debug?.("Pull",e),e.pullVersion===0)return{httpRequestInfo:{errorMessage:"",httpStatusCode:200}};if(e.clientGroupID===await this.clientGroupID){const a=Tr(e.cookie,js),l=this.#T;return this.#T=null,l?.resolve(a),{httpRequestInfo:{errorMessage:"",httpStatusCode:200}}}await this.#g.promise;const r=this.#h;oe(r),n.debug?.("Pull is for mutation recovery");const i=Tr(e.cookie,js),s=["pull",{clientGroupID:e.clientGroupID,cookie:i,requestID:t}];va(r,s);const o=z();this.#I.set(t,o);try{let a;switch((u=>{u[u.Timeout=0]="Timeout",u[u.Response=1]="Response"})(a||(a={})),await Sa([ds($x),o.promise])){case 0:throw n.debug?.("Mutation recovery pull timed out"),new Error("Pull timed out");case 1:{n.debug?.("Returning mutation recovery pull response");const u=await o.promise;return{response:{cookie:u.cookie,lastMutationIDChanges:u.lastMutationIDChanges,patch:[]},httpRequestInfo:{errorMessage:"",httpStatusCode:200}}}default:oe(!1,"unreachable")}}finally{o.reject("timed out"),this.#I.delete(t)}}#b(e){this.#f!==e&&(this.#f=e,this.onOnlineChange?.(e))}get online(){return this.#f}async#ee(e,t){e.debug?.("pinging");const{promise:n,resolve:r}=z();this.#u=r;const i=["ping",{}],s=performance.now();oe(this.#h),va(this.#h,i);const o=await Sa([n,ds(Px),t])===0,a=performance.now()-s;return o?(e.debug?.("ping succeeded in",a,"ms"),1):(e.info?.("ping failed in",a,"ms - disconnecting"),this.#N(e,{client:"PingTimeout"}),0)}async#j(e){if(this.#t===null){this.#n.info?.("Skipping metrics report, socketOrigin is null");return}const t=JSON.stringify({series:e}),n=new URL("/api/metrics/v0/report",this.#t);n.searchParams.set("clientID",this.clientID),n.searchParams.set("clientGroupID",await this.clientGroupID),n.searchParams.set("roomID",this.roomID),n.searchParams.set("userID",this.userID),n.searchParams.set("requestID",Hr());const r=await fetch(n.toString(),{method:"POST",body:t,keepalive:!0});if(!r.ok){const i=await r.text();throw new Error(`unexpected response: ${r.status} ${r.statusText} body: ${i}`)}}#O(e){this.#te(e)}async#te(e){if(oe(this.#t),!this.closed)try{await nx(e,this.#t,this.#n,this.#$.signal,this.#i)}catch(t){this.#n.info?.("Error checking connectivity for",e,t)}}#ne(){return this.#T??=z(),this.#e.pull(),this.#T.promise}};function Ax(e,t,n,r,i,s,o,a,l,u,c,d){const f=new URL(e);f.pathname=`/api/sync/v${Lx}/connect`;const{searchParams:v}=f;return v.set("clientID",n),v.set("clientGroupID",r),v.set("roomID",i),v.set("userID",s),a!==void 0&&v.set("jurisdiction",a),v.set("baseCookie",t===null?"":String(t)),v.set("ts",String(performance.now())),v.set("lmid",String(l)),v.set("wsid",u),c&&v.set("debugPerf",(!0).toString()),d.info?.("Connecting to",f.toString()),new WebSocket(f,o===""||o===void 0?void 0:encodeURIComponent(o))}function ka({url:e},t){const n=new URL(e).searchParams.get("wsid")??Hr();return Fl(n,t)}function Fl(e,t){return t.withContext("wsid",e)}function Sa(e){return Promise.race(e.map((t,n)=>t.then(()=>n)))}var Rh=class extends Error{constructor(e){super(`${e} timed out`)}},Th=class extends Error{};function bx(e){return new Em(e)}function jx(e){switch(e.kvStore){case"idb":return;case"mem":case void 0:return bx;default:return e.kvStore}}const Fx={initClientState:fw,initBoardState:mw,updateBoardName:vw,cycleBoardMode:gw,putRetroItem:yw,updateRetroValue:Sw,deleteRetroItem:ww,voteOnRetroItem:Ew};function Ux(e,t){ee.exports.useEffect(()=>{e()},t)}var Io={exports:{}},Eo={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vx=ee.exports,Bx=Symbol.for("react.element"),Wx=Symbol.for("react.fragment"),Gx=Object.prototype.hasOwnProperty,Kx=Vx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Qx={key:!0,ref:!0,__self:!0,__source:!0};function pg(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)Gx.call(t,r)&&!Qx.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:Bx,type:e,key:s,ref:o,props:i,_owner:Kx.current}}Eo.Fragment=Wx;Eo.jsx=pg;Eo.jsxs=pg;(function(e){e.exports=Eo})(Io);const Jx=Io.exports.Fragment,N=Io.exports.jsx,Ne=Io.exports.jsxs,mg=ee.exports.createContext(null),qx=()=>{const e={}.VITE_REFLECT_URL;if(!e)throw new Error("VITE_REFLECT_URL required");const t=localStorage.getItem("userId")??Rr();localStorage.setItem("userId",t);const n=location.pathname.slice(1),r=n||Rr();return n||history.replaceState({},"",`/${r}`),{r:new zx({server:e,userID:t,roomID:r,auth:t,mutators:Fx}),userId:t,boardId:r}};function Yx({children:e}){const[t,n]=ee.exports.useState(null),[r,i]=ee.exports.useState(null),[s,o]=ee.exports.useState(null);return Ux(async()=>{const{r:a,userId:l,boardId:u}=qx();window.r=a,await a.mutate.initClientState({userId:l,userInfo:pw()}),await a.mutate.initBoardState(l),n(a),i(l),o(u)},[]),N(mg.Provider,{value:ee.exports.useMemo(()=>t&&r&&s?{r:t,userId:r,boardId:s}:null,[t,r,s]),children:t&&r&&s?N(Jx,{children:e}):null})}const vg=()=>{const e=ee.exports.useContext(mg);if(!e)throw new Error("AppState not found");return e},kn=()=>vg().r,Sc=()=>vg().userId;function Xx(){const e=kn(),t=Y0(e);return zu(e,async n=>{const i=(await Promise.allSettled(t.map(a=>cw(n,a)))).map(a=>a.status==="fulfilled"?a.value:null).filter(a=>!!a),s=new Set,o=[];for(const a of i)s.has(a.userId)||(s.add(a.userId),o.push(a));return o},[],[t])}function Ic(){const e=kn();return zu(e,t=>fo(t),{name:"Unnamed Board",owner:null,mode:"viewing"})}function Zx(e){const t=kn();return zu(t,n=>Iw(n,e),[],[e])}const e_="_avatar_crjip_1",t_={avatar:e_};function n_({client:e}){return N("div",{className:t_.avatar,style:{backgroundColor:e.userInfo.color,boxShadow:`0 0 1rem ${e.userInfo.color}`},children:e.userInfo.avatar})}const r_="_icon_phifk_1",Sn={icon:r_},i_=()=>N("svg",{className:Sn.icon,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:N("path",{d:"M10 5a3 3 0 1 1-6 0 3 3 0 0 1 6 0ZM1.615 16.428a1.224 1.224 0 0 1-.569-1.175 6.002 6.002 0 0 1 11.908 0c.058.467-.172.92-.57 1.174A9.953 9.953 0 0 1 7 18a9.953 9.953 0 0 1-5.385-1.572ZM16.25 5.75a.75.75 0 0 0-1.5 0v2h-2a.75.75 0 0 0 0 1.5h2v2a.75.75 0 0 0 1.5 0v-2h2a.75.75 0 0 0 0-1.5h-2v-2Z"})}),s_=()=>N("svg",{className:Sn.icon,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:N("path",{fillRule:"evenodd",d:"M16.704 4.153a.75.75 0 0 1 .143 1.052l-8 10.5a.75.75 0 0 1-1.127.075l-4.5-4.5a.75.75 0 0 1 1.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 0 1 1.05-.143Z",clipRule:"evenodd"})}),gg=()=>N("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:Sn.icon,children:N("path",{d:"M1 8.25a1.25 1.25 0 1 1 2.5 0v7.5a1.25 1.25 0 1 1-2.5 0v-7.5ZM11 3V1.7c0-.268.14-.526.395-.607A2 2 0 0 1 14 3c0 .995-.182 1.948-.514 2.826-.204.54.166 1.174.744 1.174h2.52c1.243 0 2.261 1.01 2.146 2.247a23.864 23.864 0 0 1-1.341 5.974C17.153 16.323 16.072 17 14.9 17h-3.192a3 3 0 0 1-1.341-.317l-2.734-1.366A3 3 0 0 0 6.292 15H5V8h.963c.685 0 1.258-.483 1.612-1.068a4.011 4.011 0 0 1 2.166-1.73c.432-.143.853-.386 1.011-.814.16-.432.248-.9.248-1.388Z"})}),o_=()=>N("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:Sn.icon,children:N("path",{d:"M18.905 12.75a1.25 1.25 0 1 1-2.5 0v-7.5a1.25 1.25 0 0 1 2.5 0v7.5ZM8.905 17v1.3c0 .268-.14.526-.395.607A2 2 0 0 1 5.905 17c0-.995.182-1.948.514-2.826.204-.54-.166-1.174-.744-1.174h-2.52c-1.243 0-2.261-1.01-2.146-2.247.193-2.08.651-4.082 1.341-5.974C2.752 3.678 3.833 3 5.005 3h3.192a3 3 0 0 1 1.341.317l2.734 1.366A3 3 0 0 0 13.613 5h1.292v7h-.963c-.685 0-1.258.482-1.612 1.068a4.01 4.01 0 0 1-2.166 1.73c-.432.143-.853.386-1.011.814-.16.432-.248.9-.248 1.388Z"})}),a_=()=>N("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:Sn.icon,children:N("path",{fillRule:"evenodd",d:"M8.75 1A2.75 2.75 0 0 0 6 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 1 0 .23 1.482l.149-.022.841 10.518A2.75 2.75 0 0 0 7.596 19h4.807a2.75 2.75 0 0 0 2.742-2.53l.841-10.52.149.023a.75.75 0 0 0 .23-1.482A41.03 41.03 0 0 0 14 4.193V3.75A2.75 2.75 0 0 0 11.25 1h-2.5ZM10 4c.84 0 1.673.025 2.5.075V3.75c0-.69-.56-1.25-1.25-1.25h-2.5c-.69 0-1.25.56-1.25 1.25v.325C8.327 4.025 9.16 4 10 4ZM8.58 7.72a.75.75 0 0 0-1.5.06l.3 7.5a.75.75 0 1 0 1.5-.06l-.3-7.5Zm4.34.06a.75.75 0 1 0-1.5-.06l-.3 7.5a.75.75 0 1 0 1.5.06l.3-7.5Z",clipRule:"evenodd"})}),yg=()=>N("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:Sn.icon,children:N("path",{d:"m2.695 14.762-1.262 3.155a.5.5 0 0 0 .65.65l3.155-1.262a4 4 0 0 0 1.343-.886L17.5 5.501a2.121 2.121 0 0 0-3-3L3.58 13.419a4 4 0 0 0-.885 1.343Z"})}),l_=()=>Ne("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:Sn.icon,children:[N("path",{d:"M10 12.5a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5Z"}),N("path",{fillRule:"evenodd",d:"M.664 10.59a1.651 1.651 0 0 1 0-1.186A10.004 10.004 0 0 1 10 3c4.257 0 7.893 2.66 9.336 6.41.147.381.146.804 0 1.186A10.004 10.004 0 0 1 10 17c-4.257 0-7.893-2.66-9.336-6.41ZM14 10a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z",clipRule:"evenodd"})]});async function u_(e){await navigator.clipboard.writeText(e)}function c_(e){return new Promise(t=>{setTimeout(t,e)})}const f_="_unstyledButton_7rd6i_1",h_="_iconButton_7rd6i_10",wg={unstyledButton:f_,iconButton:h_};function d_({children:e,onClick:t}){return N("button",{className:wg.unstyledButton,type:"button",onClick:t,children:e})}function zr({children:e,onClick:t,color:n="inherit"}){return N("button",{className:wg.iconButton,type:"button",onClick:t,style:{color:n},children:e})}function p_({value:e,color:t}){const[n,r]=ee.exports.useState(!1);return N(zr,{color:t,onClick:async()=>{await u_(e),r(!0),await c_(1e3),r(!1)},children:n?N(s_,{}):N(i_,{})})}const m_="_header_hnpgi_1",v_="_boardInfo_hnpgi_8",g_="_boardTitle_hnpgi_14",y_="_users_hnpgi_24",Wi={header:m_,boardInfo:v_,boardTitle:g_,users:y_},w_="_input_wx2tj_1",k_={input:w_};function S_({autoFocus:e,value:t="",onChange:n,onBlur:r,onEscape:i}){return N("input",{type:"text",className:k_.input,autoFocus:e,defaultValue:t,onBlur:s=>s.currentTarget.value===t?r?.():n(s.currentTarget.value),onKeyDown:s=>{s.key==="Escape"?i?.():s.key==="Enter"&&n(s.currentTarget.value)}})}const kg=(e,t)=>{kn();const[n,r]=ee.exports.useReducer((i,{type:s,value:o=""})=>{if(!e)return i;switch(s){case"start-editing":return{...i,isEditing:!0,value:o};case"stop-editing":return{...i,isEditing:!1};case"change-value":return t(o),{...i,isEditing:!1};default:return i}},{isEditing:!1,value:""});return{state:n,startEditing:i=>r({type:"start-editing",value:i}),stopEditing:()=>r({type:"stop-editing"}),changeValue:i=>r({type:"change-value",value:i})}};function I_(){const e=Xx(),t=Ic(),n=Sc(),r=kn(),i=n===t.owner,{state:{isEditing:s,value:o},startEditing:a,stopEditing:l,changeValue:u}=kg(i,c=>r.mutate.updateBoardName({userId:n,name:c}));return Ne("div",{className:Wi.header,children:[Ne("div",{className:Wi.boardInfo,children:[s?N(S_,{autoFocus:!0,value:o,onChange:u,onBlur:l,onEscape:l}):N("h1",{className:Wi.boardTitle,children:i?N(d_,{onClick:()=>a(t.name),children:t.name}):t.name}),i&&N(zr,{onClick:()=>{r.mutate.cycleBoardMode(n)},color:"var(--cyan)",children:t.mode==="viewing"?N(l_,{}):t.mode==="voting"?N(gg,{}):N(yg,{})}),N(p_,{value:location.href,color:"var(--cyan)"})]}),N("div",{className:Wi.users,children:e.map(c=>N(n_,{client:c},c.id))})]})}const E_="_textarea_nrtst_1",C_={textarea:E_};function Sg({value:e="",disabled:t,onChange:n,onEscape:r}){return N("textarea",{className:C_.textarea,defaultValue:e,disabled:t,onKeyDown:i=>{i.key==="Escape"?r?.():i.key==="Enter"&&(i.metaKey||i.ctrlKey)&&n(i.currentTarget.value)}})}const x_="_item_qv9s8_1",__="_actionsContainer_qv9s8_23",D_="_actions_qv9s8_23",Gi={item:x_,actionsContainer:__,actions:D_};function M_({item:e}){const t=Sc(),n=t===e.author,r=kn(),{state:{isEditing:i,value:s},startEditing:o,stopEditing:a,changeValue:l}=kg(n,f=>r.mutate.updateRetroValue({id:e.id,value:f})),u=Ic(),c=u.mode==="editing",d=u.mode!=="viewing";return i?N(Sg,{value:s,onChange:l,onEscape:a}):Ne("div",{className:Gi.item,children:[N("pre",{children:e.value}),Ne("div",{className:Gi.actionsContainer,children:[Ne("div",{className:Gi.actions,children:[Ne("small",{children:["Votes: ",N("strong",{children:e.upvotes?.length||0})]}),d&&N(zr,{onClick:()=>{r.mutate.voteOnRetroItem({id:e.id,userId:t})},color:"var(--black)",children:(e.upvotes||[]).includes(t)?N(o_,{}):N(gg,{})})]}),n&&c&&Ne("div",{className:Gi.actions,children:[N(zr,{onClick:()=>o(e.value),color:"var(--black)",children:N(yg,{})}),N(zr,{onClick:()=>r.mutate.deleteRetroItem(e.id),color:"var(--black)",children:N(a_,{})})]})]})]})}const P_="_column_1b3ca_1",$_="_columnHeader_1b3ca_7",N_="_columnTitle_1b3ca_15",R_="_columnSubtitle_1b3ca_26",T_="_columnList_1b3ca_40",yr={column:P_,columnHeader:$_,columnTitle:N_,columnSubtitle:R_,columnList:T_};function Ki({id:e,title:t,subTitle:n}){const r=kn(),[i,s]=ee.exports.useState(!1),[o,a]=ee.exports.useState(Rr()),l=Zx(e),u=Sc(),c=Ic(),d=c.mode==="editing";return c.mode==="viewing"&&l.sort((v,y)=>y.upvotes?.length-v.upvotes?.length),Ne("div",{className:yr.column,children:[Ne("div",{className:yr.columnHeader,children:[N("h2",{className:yr.columnTitle,children:t}),N("h3",{className:yr.columnSubtitle,children:n})]}),Ne("div",{className:yr.columnList,children:[d&&N(Sg,{disabled:i,onChange:async v=>{s(!0),await r.mutate.putRetroItem({id:o,column:e,value:v,author:u,upvotes:[]}),s(!1),a(Rr())},onEscape:()=>a(Rr())},o),l.map(v=>N(M_,{item:v},v.id))]})]})}const L_="_main_kaocl_1",O_={main:L_};function H_(){return Ne("div",{className:O_.main,children:[N(Ki,{id:"wins",title:"Wins",subTitle:"What went well?"}),N(Ki,{id:"improvements",title:"Improvements",subTitle:"What could be improved?"}),N(Ki,{id:"learnings",title:"Learnings",subTitle:"What did we learn?"}),N(Ki,{id:"questions",title:"Questions",subTitle:"What is unclear?"})]})}function z_(){return N(Yx,{children:Ne("div",{className:Zo.container,children:[N("div",{className:Zo.header,children:N(I_,{})}),N("main",{className:Zo.main,children:N(H_,{})})]})})}const Ig=document.getElementById("root");if(Ig===null)throw new Error("root element is null");const A_=Ia.createRoot(Ig);A_.render(N(ee.exports.StrictMode,{children:N(z_,{})}));
